function init(){var e=[],t=[{images:["all"],frames:[[899,431,52,54],[768,367,62,61],[892,489,57,81],[951,496,61,63],[832,367,52,54],[704,367,62,61],[833,489,57,81],[953,431,61,63],[2,121,700,80],[275,523,436,50],[843,244,91,91],[2,284,700,79],[740,430,91,91],[647,430,91,91],[554,430,91,91],[461,430,91,91],[141,430,132,132],[368,430,91,91],[833,423,64,64],[275,430,91,91],[931,2,91,91],[2,203,700,79],[2,2,700,117],[704,52,175,57],[848,200,16,42],[848,136,24,23],[848,111,24,23],[2,365,700,63],[886,337,41,53],[848,161,22,37],[704,2,225,48],[881,95,141,119],[704,111,142,120],[2,430,137,132],[704,233,137,132],[929,362,65,67],[881,52,45,34],[936,289,75,71],[936,216,75,71]],animations:{blood_0:[0],blood_1:[1],blood_2:[2],blood_3:[3],blood_drops_0:[4],blood_drops_1:[5],blood_drops_2:[6],blood_drops_3:[7],button_blue:[8],button_blue_little:[9],button_credits:[13],button_green:[11],button_home:[12],button_more_games:[13],button_pause:[14],button_play:[15],button_play_big:[16],button_restart:[17],button_skip:[18],button_sound_off:[19],button_sound_on:[20],button_yellow:[21],checkered_pic:[22],combo_x4:[23],danger_sign:[24],direction_hint:[25],direction_hint_red:[26],gui_panel:[27],lock:[28],mini_star:[29],progress_bar:[30],road_sign_1:[31],road_sign_1_shadow:[32],road_sign_2:[33],road_sign_2_shadow:[34],selector:[35],shadow:[36],star_off:[37],star_on:[38]}},{images:["humans_cars"],frames:[[2,169,112,54],[203,57,112,54],[444,2,108,52],[334,2,108,52],[219,113,84,54],[133,114,84,54],[2,58,199,54],[2,2,199,54],[2,114,129,53],[203,2,129,53],[377,105,67,29],[305,117,67,29],[360,197,40,47],[360,148,40,47],[318,197,40,47],[318,148,40,47],[488,105,40,47],[446,105,40,47],[116,170,69,65],[564,191,39,41],[558,148,39,41],[530,105,39,41],[523,202,39,41],[482,202,39,41],[441,202,39,41],[255,169,61,64],[481,56,50,47],[429,56,50,47],[377,56,50,47],[481,56,50,47],[554,51,50,47],[554,2,50,47],[317,57,58,58],[519,154,37,46],[480,154,37,46],[441,154,37,46],[519,154,37,46],[402,184,37,46],[402,136,37,46],[187,170,66,68]],animations:{"cars/car_1":[0],"cars/car_1_blood":[1],"cars/car_2":[2],"cars/car_2_blood":[3],"cars/car_3":[4],"cars/car_3_blood":[5],"cars/car_4":[6],"cars/car_4_blood":[7],"cars/car_5":[8],"cars/car_5_blood":[9],"cars/car_6":[10],"cars/car_6_blood":[11],"human_0/0":[12],"human_0/1":[13],"human_0/2":[14],"human_0/3":[15],"human_0/4":[16],"human_0/5":[17],human_0_die:[18],"human_1/0":[19],"human_1/1":[20],"human_1/2":[21],"human_1/3":[22],"human_1/4":[23],"human_1/5":[24],human_1_die:[25],"human_2/0":[26],"human_2/1":[27],"human_2/2":[28],"human_2/3":[29],"human_2/4":[30],"human_2/5":[31],human_2_die:[32],"human_3/0":[33],"human_3/1":[34],"human_3/2":[35],"human_3/3":[36],"human_3/4":[37],"human_3/5":[38],human_3_die:[39]}},{images:["objects"],frames:[[704,412,81,57],[704,471,74,59],[787,448,35,33],[780,483,55,32],[2,409,700,82],[2,265,700,142],[2,64,700,199],[2,2,715,60],[2,595,700,41],[2,493,700,57],[2,552,700,41],[704,369,102,41],[787,412,41,34],[780,517,33,31],[704,532,33,26],[704,157,105,104],[719,2,115,94],[704,263,104,104],[704,98,132,57]],animations:{"objects/dirt_1":[0],"objects/dirt_2":[1],"objects/flower_1":[2],"objects/flower_2":[3],"objects/road_1":[4],"objects/road_2":[5],"objects/road_3":[6],"objects/road_4":[7],"objects/road_bottom":[8],"objects/road_middle":[9],"objects/road_top":[10],"objects/shield":[11],"objects/stone_1":[12],"objects/stone_2":[13],"objects/trash":[14],"objects/tree_1":[15],"objects/tree_2":[16],"objects/tree_3":[17],"objects/zebra":[18]}},{images:["blue_font"],frames:[[1,29,8,8],[10,4,16,33],[27,3,22,18],[50,4,27,33],[78,1,29,40],[108,4,36,33],[145,4,33,33],[179,3,14,18],[194,1,17,40],[212,1,17,40],[230,1,24,24],[255,9,24,24],[280,23,18,19],[299,15,20,12],[320,22,16,15],[337,3,23,37],[361,4,30,33],[392,4,23,33],[416,4,29,33],[446,4,30,33],[477,4,30,33],[1,43,29,33],[31,43,29,33],[61,43,28,33],[90,43,29,33],[120,43,29,33],[150,51,16,25],[167,50,18,31],[186,46,25,27],[212,51,24,16],[237,46,25,27],[263,43,28,33],[292,43,32,33],[325,43,35,33],[361,43,32,33],[394,43,29,33],[424,43,32,33],[457,43,31,33],[1,82,30,33],[32,82,30,33],[63,82,35,33],[99,82,21,33],[121,82,32,33],[154,82,34,33],[189,82,30,33],[220,82,39,33],[260,82,35,33],[296,82,30,33],[327,82,32,33],[360,82,31,39],[392,82,33,33],[426,82,29,33],[456,82,34,33],[1,132,34,33],[36,132,35,33],[72,132,48,33],[121,132,33,33],[155,132,32,33],[188,132,29,33],[218,128,18,42],[237,131,23,37],[261,128,18,42],[280,132,22,16],[303,158,29,10],[333,122,21,16],[355,132,32,33],[388,132,32,33],[421,132,29,33],[451,132,32,33],[1,171,29,33],[31,171,30,33],[62,171,30,33],[93,171,35,33],[129,171,21,33],[151,171,32,33],[184,171,34,33],[219,171,30,33],[250,171,49,33],[300,171,35,33],[336,171,30,33],[367,171,32,33],[400,171,31,39],[432,171,33,33],[466,171,29,33],[1,218,34,33],[36,218,35,33],[72,218,35,33],[108,218,48,33],[157,218,33,33],[191,218,35,33],[227,218,29,33],[257,215,20,40],[278,217,12,37],[291,215,20,40],[312,227,24,15],[337,218,16,33],[354,211,23,13],[378,228,14,13],[393,241,18,19],[412,218,28,33]],animations:{"blue_font_ ":[0],"blue_font_!":[1],'blue_font_"':[2],"blue_font_#":[3],blue_font_$:[4],"blue_font_%":[5],"blue_font_&":[6],"blue_font_'":[7],"blue_font_(":[8],"blue_font_)":[9],"blue_font_*":[10],"blue_font_+":[11],"blue_font_,":[12],"blue_font_-":[13],"blue_font_.":[14],"blue_font_/":[15],blue_font_0:[16],blue_font_1:[17],blue_font_2:[18],blue_font_3:[19],blue_font_4:[20],blue_font_5:[21],blue_font_6:[22],blue_font_7:[23],blue_font_8:[24],blue_font_9:[25],"blue_font_:":[26],"blue_font_;":[27],"blue_font_<":[28],"blue_font_=":[29],"blue_font_>":[30],"blue_font_?":[31],"blue_font_@":[32],blue_font_A:[33],blue_font_B:[34],blue_font_C:[35],blue_font_D:[36],blue_font_E:[37],blue_font_F:[38],blue_font_G:[39],blue_font_H:[40],blue_font_I:[41],blue_font_J:[42],blue_font_K:[43],blue_font_L:[44],blue_font_M:[45],blue_font_N:[46],blue_font_O:[47],blue_font_P:[48],blue_font_Q:[49],blue_font_R:[50],blue_font_S:[51],blue_font_T:[52],blue_font_U:[53],blue_font_V:[54],blue_font_W:[55],blue_font_X:[56],blue_font_Y:[57],blue_font_Z:[58],"blue_font_[":[59],"blue_font_\\":[60],"blue_font_]":[61],"blue_font_^":[62],blue_font__:[63],"blue_font_`":[64],blue_font_a:[65],blue_font_b:[66],blue_font_c:[67],blue_font_d:[68],blue_font_e:[69],blue_font_f:[70],blue_font_g:[71],blue_font_h:[72],blue_font_i:[73],blue_font_j:[74],blue_font_k:[75],blue_font_l:[76],blue_font_m:[77],blue_font_n:[78],blue_font_o:[79],blue_font_p:[80],blue_font_q:[81],blue_font_r:[82],blue_font_s:[83],blue_font_t:[84],blue_font_u:[85],blue_font_v:[86],blue_font_w:[87],blue_font_x:[88],blue_font_y:[89],blue_font_z:[90],"blue_font_{":[91],"blue_font_|":[92],"blue_font_}":[93],"blue_font_~":[94],"blue_font_¡":[95],"blue_font_¨":[96],"blue_font_·":[97],"blue_font_¸":[98],"blue_font_¿":[99]}},{images:["white_font"],frames:[[1,31,2,6],[4,5,9,32],[14,5,18,15],[33,9,21,24],[55,1,19,40],[75,5,26,32],[102,5,25,32],[128,5,10,15],[139,2,13,38],[153,2,14,38],[168,5,17,19],[186,9,20,24],[207,26,10,15],[218,15,20,11],[239,26,9,11],[249,5,18,32],[268,5,20,32],[289,5,13,32],[303,5,19,32],[323,5,18,32],[342,5,21,32],[364,5,18,32],[383,5,20,32],[404,5,18,32],[423,5,20,32],[444,5,20,32],[465,15,9,22],[475,15,11,26],[487,10,17,22],[1,48,20,20],[22,47,17,22],[40,42,20,32],[61,42,28,32],[90,42,23,32],[114,42,20,32],[135,42,19,32],[155,42,20,32],[176,42,19,32],[196,42,20,32],[217,42,20,32],[238,42,21,32],[260,42,9,32],[270,42,16,32],[287,42,22,32],[310,42,21,32],[332,42,29,32],[362,42,23,32],[386,42,20,32],[407,42,19,32],[427,42,21,32],[449,42,19,32],[469,42,19,32],[489,42,19,32],[1,78,20,32],[22,78,23,32],[46,78,32,32],[79,78,25,32],[105,78,26,32],[132,78,21,32],[154,75,13,37],[168,78,18,32],[187,75,13,37],[201,78,20,21],[222,104,20,11],[243,75,12,13],[256,83,23,27],[280,83,20,27],[301,83,19,27],[321,83,20,27],[342,83,19,27],[362,83,20,27],[383,83,20,27],[404,83,21,27],[426,83,9,27],[436,83,16,27],[453,83,22,27],[476,83,21,27],[1,125,29,27],[31,125,23,27],[55,125,20,27],[76,125,19,27],[96,125,21,27],[118,125,19,27],[138,125,19,27],[158,125,19,27],[178,125,20,27],[199,125,23,27],[223,125,32,27],[256,125,25,27],[282,125,26,27],[309,125,21,27],[331,117,16,38],[348,116,9,39],[358,117,15,38],[374,132,18,13],[393,120,9,32],[403,119,15,11],[419,146,2,6],[422,144,12,13],[435,120,20,32]],animations:{"white_font_ ":[0],"white_font_!":[1],'white_font_"':[2],"white_font_#":[3],white_font_$:[4],"white_font_%":[5],"white_font_&":[6],"white_font_'":[7],"white_font_(":[8],"white_font_)":[9],"white_font_*":[10],"white_font_+":[11],"white_font_,":[12],"white_font_-":[13],"white_font_.":[14],"white_font_/":[15],white_font_0:[16],white_font_1:[17],white_font_2:[18],white_font_3:[19],white_font_4:[20],white_font_5:[21],white_font_6:[22],white_font_7:[23],white_font_8:[24],white_font_9:[25],"white_font_:":[26],"white_font_;":[27],"white_font_<":[28],"white_font_=":[29],"white_font_>":[30],"white_font_?":[31],"white_font_@":[32],white_font_A:[33],white_font_B:[34],white_font_C:[35],white_font_D:[36],white_font_E:[37],white_font_F:[38],white_font_G:[39],white_font_H:[40],white_font_I:[41],white_font_J:[42],white_font_K:[43],white_font_L:[44],white_font_M:[45],white_font_N:[46],white_font_O:[47],white_font_P:[48],white_font_Q:[49],white_font_R:[50],white_font_S:[51],white_font_T:[52],white_font_U:[53],white_font_V:[54],white_font_W:[55],white_font_X:[56],white_font_Y:[57],white_font_Z:[58],"white_font_[":[59],"white_font_\\":[60],"white_font_]":[61],"white_font_^":[62],white_font__:[63],"white_font_`":[64],white_font_a:[65],white_font_b:[66],white_font_c:[67],white_font_d:[68],white_font_e:[69],white_font_f:[70],white_font_g:[71],white_font_h:[72],white_font_i:[73],white_font_j:[74],white_font_k:[75],white_font_l:[76],white_font_m:[77],white_font_n:[78],white_font_o:[79],white_font_p:[80],white_font_q:[81],white_font_r:[82],white_font_s:[83],white_font_t:[84],white_font_u:[85],white_font_v:[86],white_font_w:[87],white_font_x:[88],white_font_y:[89],white_font_z:[90],"white_font_{":[91],"white_font_|":[92],"white_font_}":[93],"white_font_~":[94],"white_font_¡":[95],"white_font_¨":[96],"white_font_·":[97],"white_font_¸":[98],"white_font_¿":[99]}},{images:["splash"],frames:[[286,286,140,140],[286,144,140,140],[144,286,140,140],[144,144,140,140],[286,2,140,140],[144,2,140,140],[2,286,140,140],[2,144,140,140],[2,2,140,140]],animations:{"splash/0":[0],"splash/1":[1],"splash/2":[2],"splash/3":[3],"splash/4":[4],"splash/5":[5],"splash/6":[6],"splash/7":[7],"splash/8":[8]}}],n=[],r=[Images.HINT_ARROW,"objects/background_1","objects/background_2","objects/background_3","objects/background_4",Images.HYPNOCAT,Images.TITLE,Images.TITLE_BACK,Images.FILL_BOTTOM,Images.MENU_SHADOW,Images.BLUE_BACK];DNGameConfig.needShowRotateScreen&&r.push(Images.ROTATE);for(var i=0;i<t.length;i++)r.push(t[i].images[0]);for(var i=0;i<r.length;i++)e.push({src:"assets/art/"+r[i]+".png",id:r[i]});for(var i=0;i<n.length;i++)e.push({src:"assets/art/"+n[i]+".jpg",id:n[i]});var s=[];createjs.Sound.alternateExtensions=["m4a"];for(var i=0;i<Sounds.ALL.length;i++)s.push({src:Sounds.ALL[i]+".ogg",id:Sounds.ALL[i]});Constants.g_isPC=!Utils.IsMobileBrowser(),new DNStateManager(e,s,t,[])}var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},DNGameState=function(e){function t(){e.call(this),this.liveTime=0,this.forceLiveTime=0,this.gameObjects=new Array,this.gui=new Array,this.newGameObjects=new Array,this.initiliazed=!1,this.handlersBlocked=!1,this.consoleH=200,this.haveFill=!1}return __extends(t,e),t.prototype.onChangeScale=function(){},t.prototype.getShader=function(){return this.shaderShape},t.prototype.addShader=function(e){this.shaderShape=Utils.DrawRect(Constants.ASSETS_WIDTH,Constants.SCREEN_HEIGHT,"#000000",this),this.addChildAt(this.shaderShape,0),this.shaderShape.alpha=0,this.shaderShape.y=-(Constants.SCREEN_HEIGHT-Constants.ASSETS_HEIGHT)/2,createjs.Tween.get(this.shaderShape).wait(e).to({alpha:.7},600,createjs.Ease.linear)},t.prototype.blockHandlers=function(){this.handlersBlocked=!0},t.prototype.unblockHandlers=function(){this.handlersBlocked=!1},t.prototype.hideShader=function(){this.blockHandlers(),createjs.Tween.removeTweens(this.shaderShape),createjs.Tween.get(this.shaderShape).to({alpha:0},350,createjs.Ease.linear).call(function(){return DNStateManager.g_instance.popState()})},t.prototype.consolePrint=function(e){var t=new createjs.Text(e,"bold 35px Verdana","#000000");this.addChild(t),t.x=50,t.y=this.consoleH,this.consoleH+=40},t.prototype.isInitiliazed=function(){return this.initiliazed},t.prototype.onMouseDown=function(e,t){if(!this.handlersBlocked){DNGUIObject.wasHandlerThisFrame=!1;for(var n=0;n<this.gui.length;n++)this.gui[n].onMouseDown(e,t)}},t.prototype.onMouseMove=function(e,t){if(!this.handlersBlocked){DNGUIObject.wasHandlerThisFrame=!1;for(var n=0;n<this.gui.length;n++)this.gui[n].onMouseMove(e,t)}},t.prototype.onMouseUp=function(e,t){if(!this.handlersBlocked){DNGUIObject.wasHandlerThisFrame=!1;for(var n=0;n<this.gui.length;n++)this.gui[n].onMouseUp(e,t)}},t.prototype.addGuiObject=function(e){this.gui.push(e),this.addGameObject(e)},t.prototype.update=function(e){this.liveTime+=e,this.newGameObjects=new Array;for(var t=0;t<this.gameObjects.length;t++){var n=this.gameObjects[t];n.update(e),n.isDead()?n.onDead():this.newGameObjects.push(n)}this.gameObjects=this.newGameObjects},t.prototype.forceUpdate=function(e){this.forceLiveTime+=e;for(var t=0;t<this.gameObjects.length;t++)this.gameObjects[t].forceUpdate(e)},t.prototype.addGameObject=function(e){this.gameObjects.push(e)},t.prototype.addGameObjectAt=function(e,t){this.gameObjects.push(e),t&&t.addChild(e)},t.prototype.addGameObjectAtPos=function(e,t,n,r){this.gameObjects.push(e),t&&(t.addChild(e),e.x=n,e.y=r)},t.prototype.cleanup=function(){},t.prototype.resume=function(){},t.prototype.init=function(){this.initiliazed=!0},t.prototype.onOrientationChanged=function(e){DNGameConfig.needShowRotateScreen&&e&&DNStateManager.g_instance.pushState(new PortraitLockState)},t.prototype.alignByCenter=function(e){if(this.y=(Constants.SCREEN_HEIGHT-Constants.ASSETS_HEIGHT)/2,e&&Constants.ASSETS_HEIGHT<Constants.SCREEN_HEIGHT&&!this.haveFill){this.haveFill=!0;var t=DNAssetsManager.g_instance.getImage(Images.FILL_BOTTOM);this.addChild(t);var n=DNAssetsManager.g_instance.getImage(Images.FILL_BOTTOM);this.addChild(n),n.scaleY=-1,n.y=1;var r=200,i=(Constants.SCREEN_HEIGHT-Constants.ASSETS_HEIGHT)/2+2;i>r?(t.scaleY=i/r,n.scaleY=-(i/r),t.y=Constants.ASSETS_HEIGHT-1):t.y=Constants.ASSETS_HEIGHT-1}},t.prototype.loadLayout=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=this.loadGUIObject(r,t);r.children&&this.loadLayout(r.children,i)}},t.prototype.checkParam=function(e,t){t||console.log("wrong param",e)},t.prototype.loadGUIObject=function(e,t){var n,r=e.picture;switch(e.type){case Layouts.TYPE_LOCALIZABLE_LABEL:n=new DNLocalizableLabel(e.font,e.text,e.align_h,e.max_width,e.max_scale);break;case Layouts.TYPE_BITMAP_LABEL:n=new DNBitmapLabel(e.font,e.text,e.align_h,e.max_width,e.max_scale);break;case Layouts.TYPE_TEXT_BOX:n=new DNTextBox(e.font,e.text,e.max_width,e.max_height,e.max_scale);break;case Layouts.TYPE_LOCALIZABLE_TEXT_BOX:n=new DNLocalizableTextBox(e.font,e.text,e.max_width,e.max_height,e.max_scale);break;case Layouts.TYPE_LOGO_PLACEHOLDER:n=new DNLogoPlaceholder(e.max_width||200,e.max_height||100);break;case Layouts.TYPE_SKEW:this.checkParam(e,r),n=new Skewer(r);break;case Layouts.TYPE_BUTTON_2:this.checkParam(e,r),n=new DNButton2(r);break;case Layouts.TYPE_LONG_BUTTON:n=new DNLongButton(e.text);break;case Layouts.TYPE_BUTTON:this.checkParam(e,r),n=new DNButton(r);break;case Layouts.TYPE_STATIC_PICTURE:this.checkParam(e,r),n=new DNStaticPicture(r);break;case Layouts.TYPE_PLACEHOLDER:n=new DNPlaceholder;break;case Layouts.TYPE_JELLY_BUTTON:n=new DNJellyButton(r);break;case Layouts.TYPE_TEXT_FIELD:n=new DNTextField(e.text,e.font,e.align);break;case Layouts.TYPE_FLAT_BUTTON:n=new DNFlatButton(r);break;case Layouts.TYPE_PROGRESS_BAR:n=new DNProgressBar(e.back,r);break;case Layouts.TYPE_LANGUAGE_SELECTOR:n=new DNLanguageSelector(this,DNGameConfig.ALL_GAME_LANGUAGES)}return n?(n.name=e.name,n.x=e.x||0,n.y=e.y||0,n.rotation=e.rotation||0,n.scaleX=n.scaleY=e.scale||1,e.scale_y&&(n.scaleY=e.scale_y),n.alpha=e.alpha||1,this.addGuiObject(n),t.addChild(n)):console.log("Parsing layout error. Cant find type: ",e.type),n},t.prototype.findGUIObject=function(e){for(var t=0;t<this.gui.length;t++)if(this.gui[t].name==e)return this.gui[t];return null},t.prototype.setHandler=function(e,t){var n=this.findGUIObject(e);n?n.setHandler(t):console.log("cant find control",e)},t.prototype.onPushStateTop=function(){},t.prototype.onPause=function(){},t.prototype.onResume=function(){},t.prototype.onRestart=function(){},t.prototype.onKeyUp=function(){},t.prototype.onKeyDown=function(){},t.prototype.onChangeLanguage=function(){},t}(createjs.Container),DNSwipableGameState=function(e){function t(){e.apply(this,arguments),this.touchX=0,this.touchY=0,this.touchTime=0,this.swipeDistance=60}return __extends(t,e),t.prototype.onSwipeUp=function(){},t.prototype.onSwipeDown=function(){},t.prototype.onSwipeLeft=function(){},t.prototype.onSwipeRight=function(){},t.prototype.onMouseDown=function(t,n){e.prototype.onMouseDown.call(this,t,n),this.touchX=t,this.touchY=n,this.touchTime=this.liveTime},t.prototype.onMouseUp=function(t,n){e.prototype.onMouseUp.call(this,t,n),this.liveTime-this.touchTime<.5&&(n-this.touchY<-this.swipeDistance&&this.onSwipeUp(),n-this.touchY>+this.swipeDistance&&this.onSwipeDown(),t-this.touchX<-this.swipeDistance&&this.onSwipeLeft(),t-this.touchX>+this.swipeDistance&&this.onSwipeRight())},t}(DNGameState),DNGameObject=function(e){function t(){e.call(this),this.liveTime=0,this.forceLiveTime=0,this.killed=!1}return __extends(t,e),t.prototype.getLiveTime=function(){return this.liveTime},t.prototype.update=function(e){this.liveTime+=e},t.prototype.forceUpdate=function(e){this.forceLiveTime+=e},t.prototype.kill=function(){this.killed=!0},t.prototype.unkill=function(){this.killed=!1},t.prototype.isDead=function(){return this.killed},t.prototype.onDead=function(){this.parent&&this.parent.removeChild(this)},t}(createjs.Container),DNTimer=function(e){function t(t,n){e.call(this),this.count=1e6,this.loop=!1,this.time=t,this.count=n,this.count||(this.loop=!0)}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t),this.liveTime>this.time&&(this.runAction,this.liveTime-=this.time,this.loop||(this.count--,this.count<=0&&this.kill()))},t.prototype.runAction=function(){},t}(DNGameObject),DNGUIObject=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.onMouseDown=function(){},t.prototype.onMouseUp=function(){},t.prototype.onMouseMove=function(){},t.prototype.setHandler=function(){},t.wasHandlerThisFrame=!1,t}(DNGameObject),DN_TEXT_ALIGN_HOR;!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.CENTER=2]="CENTER"}(DN_TEXT_ALIGN_HOR||(DN_TEXT_ALIGN_HOR={}));var DN_TEXT_ALIGN_VERT;!function(e){e[e.TOP=0]="TOP",e[e.MIDDLE=1]="MIDDLE",e[e.BOTTOM=2]="BOTTOM"}(DN_TEXT_ALIGN_VERT||(DN_TEXT_ALIGN_VERT={}));var DNBitmapLabel=function(e){function t(t,n,r,i,s){e.call(this),this.maxW=0,this.alignH=2,this.alignW=0,this.pic=new createjs.Container,this.symbols=[],this.maxScale=1e3,void 0!=r&&(this.alignH=r),this.maxW=i||0,this.font=t,this.maxScale=s||1e3,Constants.DRAW_GABARITES&&(this.debugShape=Utils.DrawRect(i,this.font.height,"#ff0000",this),this.debugShape.alpha=.5),this.addChild(this.pic),n&&this.setText(n)}return __extends(t,e),t.prototype.setText=function(e){this.text=e,this.pic.removeAllChildren(),this.symbols=[];for(var t=0,n=0;n<e.length;n++){var r=e.charAt(n),i=new createjs.Container,s=DNAssetsManager.g_instance.getImage(this.font.name+r);s.getBounds()?this.font.charSet[r]?(i.addChild(s),this.pic.addChild(i),i.x=t,i.x+=this.font.charSet[r].offset_x,i.y+=this.font.charSet[r].offset_y,t+=this.font.charSet[r].width,this.symbols.push(i)):console.log("Error. No description data for char:",r):console.log("Error. Cant find char in font",this.font.name,r)}this.calcScale(),this.calcAlign()},t.prototype.setMinScale=function(e){this.pic.scaleX=this.pic.scaleY=e,this.calcAlign()},t.prototype.calcScale=function(){var e=1;0!=this.maxW&&this.pic.getBounds().width>this.maxW&&(e=this.maxW/this.pic.getBounds().width),this.pic.scaleX=this.pic.scaleY=Math.min(e,this.maxScale)},t.prototype.calcAlign=function(){if(this.pic.getBounds())switch(this.alignH){case 2:this.pic.x=.5*-this.pic.getBounds().width*this.pic.scaleX,this.debugShape&&(this.debugShape.x=-this.maxW/2);break;case 0:this.pic.x=0,this.debugShape&&(this.debugShape.x=0);break;case 1:this.pic.x=-this.pic.getBounds().width*this.pic.scaleX,this.debugShape&&(this.debugShape.x=-this.maxW)}},t.prototype.getText=function(){return this.text},t}(DNGUIObject),DNFlatButton=function(e){function t(t,n){e.call(this),this.func=null,this.enabled=!0,this.wasHandlerThisFrame=!1,this.setPicture(t),this.func=n}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t),this.wasHandlerThisFrame=!1},t.prototype.setPicture=function(e){this.picture&&this.picture.parent&&this.picture.parent.removeChild(this.picture),this.picture=DNAssetsManager.g_instance.getCenteredImageWithProxy(e),this.addChild(this.picture)},t.prototype.setHandler=function(e){this.func=e},t.prototype.onMouseDown=function(e,t){this.hitTestSmart(e,t)?(this.liveTime=0,DNGUIObject.wasHandlerThisFrame||(DNGUIObject.wasHandlerThisFrame=!0,this.wasHandlerThisFrame=!0,this.func(),DNSoundManager.g_instance.play(Sounds.CLICK))):this.onMissClick()},t.prototype.hitTestSmart=function(e,t){if(!this.parent||!this.visible||!this.enabled)return!1;var n=this.picture.localToGlobal(0,0);n.x/=Constants.SCREEN_SCALE,n.y/=Constants.SCREEN_SCALE;var r=.6*this.picture.getBounds().width*this.scaleX,i=.6*this.picture.getBounds().height*this.scaleY;return n.x<e+r&&n.x>e-r&&n.y<t+i&&n.y>t-i},t.prototype.onMissClick=function(){},t}(DNGUIObject),DNButton=function(e){function t(t,n){e.call(this),this.selected=!1,this.func=null,this.enabled=!0,this.picture=DNAssetsManager.g_instance.getCenteredImageWithProxy(t),this.addChild(this.picture),this.func=n,this.picWidth=1.15*this.picture.getBounds().width,this.picHeight=1.15*this.picture.getBounds().height}return __extends(t,e),t.prototype.getPicture=function(){return this.picture},t.prototype.setHandler=function(e){this.func=e},t.prototype.select=function(){this.selected||(createjs.Tween.removeTweens(this.picture),createjs.Tween.get(this.picture).to({scaleX:1.15,scaleY:1.15},150,createjs.Ease.linear),this.selected=!0)},t.prototype.deselect=function(){this.selected&&(createjs.Tween.removeTweens(this.picture),createjs.Tween.get(this.picture).to({scaleX:1,scaleY:1},150,createjs.Ease.linear),this.selected=!1)},t.prototype.onMouseDown=function(e,t){this.hitTestSmart(e,t)&&!DNGUIObject.wasHandlerThisFrame&&(this.liveTime=0,this.select(),DNGUIObject.wasHandlerThisFrame=!0)},t.prototype.onMouseUp=function(e,t){this.hitTestSmart(e,t)&&this.selected&&(DNGUIObject.wasHandlerThisFrame||(DNGUIObject.wasHandlerThisFrame=!0,this.func&&this.func(),DNSoundManager.g_instance.play(Sounds.CLICK))),this.deselect()},t.prototype.onMouseMove=function(e,t){this.hitTestSmart(e,t)||this.deselect()},t.prototype.hitTestSmart=function(e,t){if(this.enabled){if(!this.parent||!this.visible)return!1;var n=this.picture.localToGlobal(0,0);n.x/=Constants.SCREEN_SCALE,n.y/=Constants.SCREEN_SCALE;var r=.6*this.picture.getBounds().width*this.scaleX,i=.6*this.picture.getBounds().height*this.scaleY;return n.x<e+r&&n.x>e-r&&n.y<t+i&&n.y>t-i}},t.prototype.setEnabled=function(e){this.enabled=e},t}(DNGUIObject),DNButton2=function(e){function t(t,n){e.call(this),this.selected=!1,this.overlay=new createjs.Container,this.enabled=!0,this.picture=DNAssetsManager.g_instance.getCenteredImageWithProxy(t),this.addChild(this.picture),this.pictureDown=DNAssetsManager.g_instance.getCenteredImageWithProxy(t+"_down"),this.pictureDown.getBounds()||(this.pictureDown=this.picture),this.addChild(this.pictureDown),this.pictureDown.visible=!1,this.callback=n,this.picWidth=1.15*this.picture.getBounds().width,this.picHeight=1.15*this.picture.getBounds().height,this.addChild(this.overlay)}return __extends(t,e),t.prototype.onChangeSelection=function(){},t.prototype.setHandler=function(e){this.callback=e},t.prototype.select=function(){this.selected||(this.picture.visible=!1,this.pictureDown.visible=!0,this.selected=!0,this.onChangeSelection(this.selected))},t.prototype.deselect=function(){this.selected&&(this.selected=!1,this.pictureDown.visible=!1,this.picture.visible=!0,this.onChangeSelection(this.selected))},t.prototype.onMouseDown=function(e,t){this.hitTestSmart(e,t)&&(DNGUIObject.wasHandlerThisFrame=!0,this.liveTime=0,this.select())},t.prototype.onMouseUp=function(e,t){this.hitTestSmart(e,t)&&this.selected&&(this.callback&&this.callback(),DNSoundManager.g_instance.play(Sounds.CLICK)),this.deselect()},t.prototype.onMouseMove=function(e,t){this.hitTestSmart(e,t)||this.deselect()},t.prototype.hitTestSmart=function(e,t){if(!this.parent||!this.visible||!this.enabled)return!1;var n=this.picture.localToGlobal(0,0);n.x/=Constants.SCREEN_SCALE,n.y/=Constants.SCREEN_SCALE;var r=.6*this.picWidth*this.scaleX,i=.6*this.picHeight*this.scaleY;return n.x<e+r&&n.x>e-r&&n.y<t+i&&n.y>t-i},t}(DNGUIObject),DNTextField=function(e){function t(t,n,r){e.call(this),this.textWidth=0,this.fontNamePrefix="",this.letterDistance=0,this.align="left",n&&(this.fontNamePrefix=n.name,this.letterDistance=n.letterDist),r&&this.setAlign(r),t&&this.setText(t)}return __extends(t,e),t.prototype.setAlign=function(e){this.align=e},t.prototype.setText=function(e){if(this.text!=e){this.text=e,this.removeAllChildren();var t=0,n=new createjs.Container;this.addChild(n);for(var r=0;r<e.length;r++){var i=e.charAt(r),s=DNAssetsManager.g_instance.getImage(this.fontNamePrefix+i);n.addChild(s),s.x=t,t+=s.getBounds().width+this.letterDistance}this.textWidth=t,"center"==this.align&&(n.x=-n.getBounds().width/2)}},t.prototype.getWidth=function(){return this.textWidth},t.prototype.getText=function(){return this.text},t}(DNGUIObject),DNTextBox=function(e){function t(t,n,r,i,s){e.call(this),this.textScale=1,this.minScale=.1,this.text="",s&&(this.textScale=s),this.maxTextWidth=r,this.maxTextHeight=i,this.font=t,this.setText(n)}return __extends(t,e),t.prototype.setText=function(e){this.text=e,this.calcScale()},t.prototype.calcScale=function(){if(this.removeAllChildren(),Constants.DRAW_GABARITES){var e=new createjs.Shape;e.graphics.beginFill("#0000ff"),e.graphics.drawRect(0,0,this.maxTextWidth,this.maxTextHeight),e.graphics.endFill(),e.alpha=.5,e.x=-this.maxTextWidth/2,this.addChild(e)}for(var t=0,n=new DNBitmapLabel(this.font," "),r=n.getBounds().width,i=this.text.length,s="",o=[],u=0,a=0;i+1>a;a++)if(" "==this.text.charAt(a)||a==i){if(0!=s.length){var n=new DNBitmapLabel(this.font,s);n.scaleX=n.scaleY=this.textScale,o.push(n);var f=n.getBounds().width*this.textScale;f>u&&(u=f)}s=""}else s+=this.text.charAt(a);for(var l=0,c=0,h=0,p=0,a=0;a<o.length;a++){c+=(o[a].getBounds().width+r)*this.textScale,h++;var d=a==o.length-1;if(c>this.maxTextWidth||d){h>1&&c>this.maxTextWidth&&(c-=o[a].getBounds().width,h--,a--);for(var v="",m=p;p+h>m;m++)v+=o[m].getText(),v+=" ";var g=new DNBitmapLabel(this.font,v);g.scaleX=g.scaleY=this.textScale,this.addChild(g),g.y=l,l+=this.font.height*this.textScale,c=0,p+=h,h=0,t=l}}(t>this.maxTextHeight||u>this.maxTextWidth)&&this.textScale>this.minScale&&(this.textScale-=.05,this.calcScale())},t}(DNGUIObject),Car=function(e){function t(t,n){if(e.call(this),this.waitTime=0,this.hasBlood=!1,this.frags=0,this.wasSportSound=!1,this.speedX=n,this.carID=t,this.addChild(DNAssetsManager.g_instance.getCenteredImageWithProxy("cars/car_"+t)),0>n&&(this.scaleX=-1),Constants.DRAW_BOUNDS){var r=Utils.DrawRect(this.getWidth(),this.getHeight(),"#0000ff",this);this.addChild(r),r.y=-this.getHeight()/2,r.x=-this.getWidth()/2,r.alpha=.5}5==t&&(this.waitTime=.9)}return __extends(t,e),t.prototype.getWidth=function(){return t.sizesW[this.carID-1]},t.prototype.getHeight=function(){return t.sizesH[this.carID-1]},t.prototype.addBlood=function(){this.frags++,this.hasBlood||(this.hasBlood=!0,this.removeAllChildren(),this.addChild(DNAssetsManager.g_instance.getCenteredImageWithProxy("cars/car_"+this.carID+"_blood")))},t.prototype.update=function(t){e.prototype.update.call(this,t),!this.wasSportSound&&this.waitTime<.3&&this.waitTime>0&&(this.wasSportSound=!0,DNSoundManager.g_instance.play(Sounds.SPORT_CAR)),this.waitTime-=t,this.waitTime<0&&(this.x+=t*this.speedX)},t.prototype.getFrags=function(){return this.frags},t.prototype.resetFrags=function(){this.frags=-100},t.prototype.movesLeft=function(){return this.speedX<0},t.sizesW=[112,108,84,199,129,67],t.sizesH=[54,52,54,54,53,29],t}(DNGameObject),DNLocalizableTextBox=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.setText=function(t){e.prototype.setText.call(this,DNStringManager.getInstance().getString(t))},t}(DNTextBox),DNLongButton=function(e){function t(t,n){e.call(this,"",n),this.label=new DNLocalizableLabel(Fonts.whiteFont,t,2,.9*this.getBounds().width,.7),this.addChild(this.label),this.label.y=-52}return __extends(t,e),t.prototype.onChangeSelection=function(){},t}(DNButton2),HumanState;!function(e){e[e.stateStartRound=0]="stateStartRound",e[e.stateWait=1]="stateWait",e[e.stateSkipCar=2]="stateSkipCar",e[e.stateRun=3]="stateRun"}(HumanState||(HumanState={}));var Human=function(e){function t(t){switch(e.call(this),this.roadsCrossed=[],this.saved=!1,this.humanID=t,this.humanID){case 0:this.runSpeed=170;break;case 1:this.runSpeed=130;break;case 2:this.runSpeed=90;break;case 3:this.runSpeed=110}var n=DNAssetsManager.g_instance.getCenteredImageWithProxy("shadow");if(this.addChild(n),n.y=13,this.clip=new DNMovieClip("human_"+t,.05/(this.runSpeed/150),!0,6),this.addChild(this.clip),this.setState(0),Constants.DRAW_BOUNDS){var r=Utils.DrawRect(this.getWidth(),this.getHeight(),"#FF00ff",this);this.addChild(r),r.y=-this.getHeight()/2,r.x=-this.getWidth()/2,r.alpha=.5}this.scaleX=this.scaleY=.8}return __extends(t,e),t.prototype.getID=function(){return this.humanID},t.prototype.getHeight=function(){switch(this.humanID){case 2:return 30;case 3:case 1:case 0:return 25}},t.prototype.getWidth=function(){switch(this.humanID){case 2:return 35;case 3:case 1:case 0:return 25}},t.prototype.isMoving=function(){return 3==this.state},t.prototype.update=function(t){e.prototype.update.call(this,t),this.clip.update(t),this.y<50&&!this.saved&&(this.saved=!0,PlayState.g_instance.onSaveHuman(this),DNSoundManager.g_instance.play(Sounds.SAVE)),this.saved&&this.updatePosition(t),this.y<-200&&this.kill()},t.prototype.isSaved=function(){return this.saved},t.prototype.updatePosition=function(e){this.lastY=this.y,3==this.state&&(this.y-=this.runSpeed*e)},t.prototype.stepBack=function(){this.y=this.lastY,this.setState(2)},t.prototype.canTap=function(){switch(this.state){case 0:case 1:case 2:return!0}return!1},t.prototype.onTap=function(){switch(this.state){case 0:case 1:case 2:return 3==this.humanID?DNSoundManager.g_instance.play(Utils.AnyOf(Sounds.TOUCH_WOMAN_1,Sounds.TOUCH_WOMAN_2),.5):DNSoundManager.g_instance.play(Utils.AnyOf(Sounds.TOUCH_PEOPLE_1,Sounds.TOUCH_PEOPLE_2),.5),this.setState(3),!0}return!1},t.prototype.onRoadEnded=function(){this.setState(1)},t.prototype.setState=function(e){switch(this.state=e,this.state){case 0:this.clip.pause();break;case 2:this.clip.gotoAndStop(0);break;case 1:this.clip.gotoAndStop(0);break;case 3:this.clip.play()}},t.prototype.safePosition=function(){return 1==this.state||0==this.state},t.prototype.getState=function(){return this.state},t.prototype.onIntersectRoad=function(e){var t=this.roadsCrossed.indexOf(e);-1==t&&(this.roadsCrossed.push(e),e.stopsHuman()&&this.setState(1))},t}(DNGameObject),MainMenuFly=function(e){function t(t){e.call(this),this.rotSpeed=Utils.RandomRange(-15,15),this.shadowPic=DNAssetsManager.g_instance.getCenteredImageWithProxy(t+"_shadow"),this.addChild(this.shadowPic),this.shadowPic.x=5,this.shadowPic.y=10,this.normPic=DNAssetsManager.g_instance.getCenteredImageWithProxy(t),this.addChild(this.normPic)}return __extends(t,e),t.prototype.forceUpdate=function(t){e.prototype.forceUpdate.call(this,t),this.x-=130*t,this.y+=130*t,this.normPic.rotation+=this.rotSpeed*t,this.shadowPic.rotation+=this.rotSpeed*t,this.y>900&&this.kill()},t}(DNGameObject),MainState=function(e){function t(){var t=this;e.call(this),this.layout=[{type:Layouts.TYPE_STATIC_PICTURE,x:350,y:400,picture:"objects/background_1"},{type:Layouts.TYPE_PLACEHOLDER,name:"layer"},{type:Layouts.TYPE_STATIC_PICTURE,x:350,y:300,picture:Images.TITLE_BACK,name:"title_back"},{type:Layouts.TYPE_STATIC_PICTURE,x:350,y:300,picture:Images.TITLE,name:"title"},{type:Layouts.TYPE_BUTTON,x:350,y:600,picture:Images.BUTTON_PLAY_BIG,name:"play"},{type:Layouts.TYPE_BUTTON,x:150,y:600,picture:Images.BUTTON_CREDITS,name:"credits"},{type:Layouts.TYPE_BUTTON,x:550,y:600,picture:Images.BUTTON_MORE_GAMES,name:"more_games"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_SOUND_ON,x:80,y:235,name:"sound_on",scale:.8},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_SOUND_OFF,x:80,y:235,name:"sound_off",scale:.8},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.MENU_SHADOW,x:350,y:691},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.MENU_SHADOW,x:350,y:109,scale_y:-1}],this.objects=[],this.loadLayout(this.layout,this),this.setHandler("play",function(){return t.onPlayTouch()}),this.setHandler("credits",function(){return t.onCreditsTouch()}),this.setHandler("more_games",function(){return t.onMoreGamesTouch()}),this.title=this.findGUIObject("title"),this.layer=this.findGUIObject("layer");for(var n=0;15>n;n++)this.forceUpdate(.5);this.update(0),createjs.Tween.get(this.findGUIObject("play"),{loop:!0}).to({scaleX:1.1,scaleY:1.1},150,createjs.Ease.cubicOut).to({scaleX:.9,scaleY:.9},300,createjs.Ease.cubicIn).to({scaleX:1,scaleY:1},150,createjs.Ease.linear).wait(2500),this.setHandler("sound_on",function(){return t.changeSound()}),this.setHandler("sound_off",function(){return t.changeSound()}),this.findGUIObject("more_games").visible=DNGameConfig.haveMoreGames,this.setSoundButtons()}return __extends(t,e),t.prototype.changeSound=function(){DNSoundManager.g_instance.setSoundEnabled(!DNSoundManager.g_instance.isSoundEnabled()),this.setSoundButtons()},t.prototype.setSoundButtons=function(){var e=this.findGUIObject("sound_on"),t=this.findGUIObject("sound_off");e.visible=DNSoundManager.g_instance.isSoundEnabled(),t.visible=!DNSoundManager.g_instance.isSoundEnabled()},t.prototype.forceUpdate=function(t){e.prototype.forceUpdate.call(this,t),this.forceLiveTime>=1.8&&(this.spawnSigns(),this.forceLiveTime=0)},t.prototype.spawnSigns=function(){for(var e=0;4>e;e++)this.addGameObjectAtPos(new MainMenuFly(e%2?Images.ROAD_SIGN_1:Images.ROAD_SIGN_2),this.layer,200+380*e,-100)},t.prototype.onPlayTouch=function(){DNStateManager.g_instance.pushState(new ShadeInState(new SelectLevelState))},t.prototype.update=function(t){e.prototype.update.call(this,t),this.title.y=300+5*Math.sin(2*this.liveTime)},t.prototype.onCreditsTouch=function(){DNGameConfig.goMoreGames()},t.prototype.onMoreGamesTouch=function(){DNGameConfig.goMoreGames()},t}(DNGameState),AutoreleaseEffect=function(e){function t(t,n,r,i){e.call(this),this.frames=new Array,this.frame=-1,this.loop=!1,this.paused=!1,this.frameTime=r;for(var s=0;n>s;s++)this.frames.push(DNAssetsManager.g_instance.getCenteredImageWithProxy(t+s));i&&(this.loop=i),this.update(100)}return __extends(t,e),t.prototype.pause=function(){this.paused=!0},t.prototype.play=function(){this.paused=!1,this.liveTime=0},t.prototype.gotoAndStop=function(e){this.pause(),this.removeAllChildren(),this.addChild(this.frames[e])},t.prototype.totalFrames=function(){return this.frames.length},t.prototype.setLoop=function(e){this.loop=e},t.prototype.setFrameTime=function(e){this.frameTime=e},t.prototype.update=function(t){if(!this.paused&&(e.prototype.update.call(this,t),this.liveTime>this.frameTime)){this.liveTime=0,this.frame++,this.frame>=this.frames.length&&(this.frame=this.frames.length-1,this.loop?this.frame=0:this.kill()),this.removeAllChildren();var n=this.frames[this.frame];this.addChild(n)}},t}(DNGameObject),Constants=function(){function e(){}return e.TIME_STEP=1/30,e.PHYS_SCALE=100,e.MOUSE_DOWN="stagemousedown",e.MOUSE_UP="stagemouseup",e.MOUSE_MOVE="stagemousemove",e.LAYER_OFFSET_X=-5,e.LAYER_OFFSET_Y=-7,e.FIELD_OFFSET_X=64,e.FIELD_OFFSET_Y=132,e.HUMANS_COUNT=18,e.ASSETS_WIDTH=700,e.ASSETS_HEIGHT=800,e.PIXEL_RATIO=1,e.SCREEN_HEIGHT=800,e.SCREEN_WIDTH=700,e.SCREEN_SCALE=1,e.DPI=-1,e.g_isPC=!0,e.DEBUG_MODE=!1,e.COOL_TRANSITION_SPEED=500,e.HINT_DELAY=5,e.DRAW_GABARITES=!1,e.TRANSITION_PAUSE=100,e.TRANSITION_DELAY=100,e.TRANSITION_TIME=300,e.DRAW_BOUNDS=!1,e}(),CoolTransitionInState=function(e){function t(t){e.call(this),this.count=0,this.nextState=t,this.count=Math.ceil(Constants.SCREEN_HEIGHT/200);for(var n=0;n<this.count;n++);}return __extends(t,e),t.prototype.onShowLine=function(){var e=this;this.count--,0==this.count&&createjs.Tween.get(this).wait(Constants.TRANSITION_PAUSE).call(function(){return e.goNextState()})},t.prototype.goNextState=function(){DNStateManager.g_instance.changeState(this.nextState),DNStateManager.g_instance.pushState(new CoolTransitionOutState)},t.prototype.alignByCenter=function(){},t}(DNGameState),CoolTransitionOutState=function(e){function t(){e.call(this),this.count=0,this.count=Math.ceil(Constants.SCREEN_HEIGHT/200);for(var t=0;t<this.count;t++);}return __extends(t,e),t.prototype.onHideLine=function(){this.count--,0==this.count&&DNStateManager.g_instance.popState()},t.prototype.alignByCenter=function(){},t}(DNGameState),CreditsState=function(e){function t(){e.call(this),this.hiddingNow=!1,this.shader=DNAssetsManager.g_instance.getImage(Images.BLUE_BACK),this.addChild(this.shader),this.container=new createjs.Container,this.addChild(this.container),this.container.x=Constants.ASSETS_WIDTH/2,this.container.scaleX=this.container.scaleY=.8;for(var t=["","","","","","PROGRAMMING / GAME DESIGN:","Konstantin Boronenkov","","ART:","Vladimir Makarov","Anna Turkova","","MUSIC:","Alexander Ahura","","Hypnocat Studio 2015","gibbetsfeedback@gmail.com"],n=0;n<t.length;n++){var r=new DNBitmapLabel(Fonts.whiteFont,t[n]);this.container.addChild(r),r.y=40*n}var i=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.HYPNOCAT);this.addChild(i),i.x=Constants.ASSETS_WIDTH/2,i.y=640;var s=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.MENU_SHADOW);this.addChild(s),s.x=350,s.y=s.getBounds().height/2-1,s.scaleY=-1;var o=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.MENU_SHADOW);this.addChild(o),o.x=350,o.y=800-o.getBounds().height/2+1,this.alpha=0,createjs.Tween.get(this).to({alpha:1},500,createjs.Ease.linear)}return __extends(t,e),t.prototype.onMouseDown=function(){this.hide()},t.prototype.hide=function(){this.hiddingNow||(createjs.Tween.removeTweens(this),createjs.Tween.get(this).to({alpha:0},400,createjs.Ease.linear).call(function(){return DNStateManager.g_instance.popState()}),this.hiddingNow=!0)},t}(DNGameState),DNAssetsManager=function(){function e(t,n,r,i,s){this.imageNameToSpriteSheetName=new Object,this.athlasNameToPicturesCount=new Object,e.g_instance=this,this.athlases=r,this.localizableImages=i,this.manifest=t,this.soundManifest=n,this.progressCallBack=s,this.startDownLoad()}return e.prototype.startDownLoad=function(){var e=this;this.loader=new createjs.LoadQueue,this.loader.addEventListener("progress",function(t){return e.progressCallBack(t)}),this.loader.addEventListener("complete",function(t){return e.handleComplete(t)}),createjs.Sound.registerManifest(this.soundManifest,"assets/sound/"),this.loader.installPlugin(createjs.SoundJS),this.loader.loadManifest(this.manifest)},e.prototype.handleComplete=function(){for(var e=0;e<this.athlases.length;e++){var t=this.athlases[e];this.athlasNameToPicturesCount[t.images[0]]=t.frames.length,t.images=[this.getBitmap(t.images[0]).image];for(var n=new createjs.SpriteSheet(t),r=n.getAnimations(),i=0;i<r.length;i++)this.imageNameToSpriteSheetName[r[i]]=n}DNStateManager.g_instance.allAssetsLoaded()},e.prototype.getAthlasFramesCount=function(e){return this.athlasNameToPicturesCount[e]},e.prototype.getResult=function(e){return this.loader.getResult(e)},e.prototype.getBitmap=function(e){var t=new createjs.Bitmap(this.loader.getResult(e));return t.getBounds()||console.log("bitmap error",e),t},e.prototype.getCenteredBitmap=function(e){var t=new createjs.Bitmap(this.loader.getResult(e));return t.image||console.log("ERROR HERE",e),t.image?(t.x=-t.image.width/2,t.y=-t.image.height/2,t):t},e.prototype.getImage=function(e){return-1!=this.localizableImages.indexOf(e)&&(e=DNStringManager.getInstance().getLanguagePrefix()+e),this.imageNameToSpriteSheetName[e]?this.getSprite(e):this.getBitmap(e)},e.prototype.getCenteredImage=function(e){var t=this.getImage(e);return t.x=-t.getBounds().width/2,t.y=-t.getBounds().height/2,t},e.prototype.getCenteredImageWithProxy=function(e){var t=new createjs.Container;return t.addChild(this.getCenteredImage(e)),t},e.prototype.getCenteredBitmapWithProxy=function(e){var t=new createjs.Container;return t.addChild(this.getCenteredBitmap(e)),t},e.prototype.getSprite=function(e){var t=new createjs.Sprite(this.imageNameToSpriteSheetName[e],e);return t.stop(),t},e.prototype.getCenteredSprite=function(e){var t=this.getSprite(e);return t.x=-t.getBounds().width/2,t.y=-t.getBounds().height/2,t},e}(),DNCharDesc=function(){function e(){}return e}(),DNBitmapFont=function(){function e(){}return e}(),Fonts=function(){function e(){}return e.blueFont={name:"blue_font_",height:36,charSet:{" ":{offset_x:-4,offset_y:25,width:20},"!":{offset_x:-1,offset_y:0,width:20},'"':{offset_x:-3,offset_y:-1,width:22},"#":{offset_x:-3,offset_y:0,width:27},$:{offset_x:-3,offset_y:-3,width:29},"%":{offset_x:-2,offset_y:0,width:38},"&":{offset_x:-2,offset_y:0,width:34},"'":{offset_x:-3,offset_y:-1,width:15},"(":{offset_x:-2,offset_y:-3,width:18},")":{offset_x:-3,offset_y:-3,width:18},"*":{offset_x:-2,offset_y:-3,width:26},"+":{offset_x:-2,offset_y:5,width:26},",":{offset_x:-3,offset_y:19,width:17},"-":{offset_x:-2,offset_y:11,width:22},".":{offset_x:-2,offset_y:18,width:17},"/":{offset_x:-6,offset_y:-1,width:18},0:{offset_x:-2,offset_y:0,width:31},1:{offset_x:-2,offset_y:0,width:25},2:{offset_x:-3,offset_y:0,width:29},3:{offset_x:-3,offset_y:0,width:30},4:{offset_x:-2,offset_y:0,width:32},5:{offset_x:-2,offset_y:0,width:31},6:{offset_x:-2,offset_y:0,width:31},7:{offset_x:-3,offset_y:0,width:28},8:{offset_x:-2,offset_y:0,width:31},9:{offset_x:-2,offset_y:0,width:31},":":{offset_x:-2,offset_y:8,width:17},";":{offset_x:-4,offset_y:7,width:17},"<":{offset_x:-2,offset_y:3,width:26},"=":{offset_x:-2,offset_y:8,width:26},">":{offset_x:-2,offset_y:3,width:26},"?":{offset_x:-3,offset_y:0,width:28},"@":{offset_x:-2,offset_y:0,width:33},A:{offset_x:-3,offset_y:0,width:35},B:{offset_x:-3,offset_y:0,width:33},C:{offset_x:-2,offset_y:0,width:31},D:{offset_x:-3,offset_y:0,width:33},E:{offset_x:-3,offset_y:0,width:31},F:{offset_x:-2,offset_y:0,width:31},G:{offset_x:-2,offset_y:0,width:31},H:{offset_x:-2,offset_y:0,width:37},I:{offset_x:-2,offset_y:0,width:24},J:{offset_x:-3,offset_y:0,width:32},K:{offset_x:-2,offset_y:0,width:35},L:{offset_x:-2,offset_y:0,width:31},M:{offset_x:-2,offset_y:0,width:41},N:{offset_x:-2,offset_y:0,width:36},O:{offset_x:-2,offset_y:0,width:31},P:{offset_x:-2,offset_y:0,width:33},Q:{offset_x:-2,offset_y:0,width:31},R:{offset_x:-2,offset_y:0,width:33},S:{offset_x:-3,offset_y:0,width:29},T:{offset_x:-3,offset_y:0,width:33},U:{offset_x:-3,offset_y:0,width:34},V:{offset_x:-3,offset_y:0,width:35},W:{offset_x:-3,offset_y:0,width:48},X:{offset_x:-3,offset_y:0,width:33},Y:{offset_x:-3,offset_y:0,width:32},Z:{offset_x:-3,offset_y:0,width:29},"[":{offset_x:-2,offset_y:-4,width:19},"\\":{offset_x:-5,offset_y:-1,width:18},"]":{offset_x:-2,offset_y:-4,width:20},"^":{offset_x:-3,offset_y:0,width:22},_:{offset_x:-4,offset_y:26,width:27},"`":{offset_x:-4,offset_y:-10,width:20},a:{offset_x:-2,offset_y:0,width:33},b:{offset_x:-3,offset_y:0,width:33},c:{offset_x:-2,offset_y:0,width:31},d:{offset_x:-3,offset_y:0,width:33},e:{offset_x:-3,offset_y:0,width:29},f:{offset_x:-2,offset_y:0,width:31},g:{offset_x:-2,offset_y:0,width:31},h:{offset_x:-2,offset_y:0,width:37},i:{offset_x:-2,offset_y:0,width:24},j:{offset_x:-3,offset_y:0,width:32},k:{offset_x:-2,offset_y:0,width:35},l:{offset_x:-2,offset_y:0,width:31},m:{offset_x:-2,offset_y:0,width:50},n:{offset_x:-2,offset_y:0,width:37},o:{offset_x:-2,offset_y:0,width:31},p:{offset_x:-2,offset_y:0,width:33},q:{offset_x:-2,offset_y:0,width:32},r:{offset_x:-2,offset_y:0,width:33},s:{offset_x:-3,offset_y:0,width:29},t:{offset_x:-3,offset_y:0,width:33},u:{offset_x:-2,offset_y:0,width:37},v:{offset_x:-3,offset_y:0,width:35},w:{offset_x:-3,offset_y:0,width:48},x:{offset_x:-3,offset_y:0,width:33},y:{offset_x:-2,offset_y:0,width:37},z:{offset_x:-3,offset_y:0,width:29},"{":{offset_x:-2,offset_y:-3,width:21},"|":{offset_x:-2,offset_y:-1,width:14},"}":{offset_x:-2,offset_y:-3,width:22},"~":{offset_x:-3,offset_y:9,width:24},"¡":{offset_x:-2,offset_y:0,width:18},"¨":{offset_x:-2,offset_y:-7,width:25},"·":{offset_x:-1,offset_y:10,width:17},"¸":{offset_x:-3,offset_y:23,width:18},"¿":{offset_x:-2,offset_y:0,width:30}}},e.whiteFont={name:"white_font_",height:43,charSet:{" ":{offset_x:-1,offset_y:35,width:9},"!":{offset_x:0,offset_y:9,width:9},'"':{offset_x:0,offset_y:9,width:17},"#":{offset_x:0,offset_y:13,width:21},$:{offset_x:0,offset_y:5,width:19},"%":{offset_x:0,offset_y:9,width:26},"&":{offset_x:0,offset_y:9,width:25},"'":{offset_x:0,offset_y:9,width:10},"(":{offset_x:0,offset_y:6,width:12},")":{offset_x:-1,offset_y:6,width:12},"*":{offset_x:-1,offset_y:9,width:15},"+":{offset_x:0,offset_y:13,width:20},",":{offset_x:-1,offset_y:30,width:9},"-":{offset_x:0,offset_y:19,width:20},".":{offset_x:0,offset_y:30,width:9},"/":{offset_x:-1,offset_y:9,width:16},0:{offset_x:2,offset_y:9,width:22},1:{offset_x:9,offset_y:9,width:22},2:{offset_x:3,offset_y:9,width:22},3:{offset_x:4,offset_y:9,width:22},4:{offset_x:0,offset_y:9,width:21},5:{offset_x:4,offset_y:9,width:22},6:{offset_x:2,offset_y:9,width:22},7:{offset_x:4,offset_y:9,width:22},8:{offset_x:2,offset_y:9,width:22},9:{offset_x:2,offset_y:9,width:22},":":{offset_x:0,offset_y:19,width:9},";":{offset_x:-2,offset_y:19,width:9},"<":{offset_x:0,offset_y:14,width:17},"=":{offset_x:0,offset_y:15,width:20},">":{offset_x:0,offset_y:14,width:17},"?":{offset_x:0,offset_y:9,width:20},"@":{offset_x:0,offset_y:9,width:28},A:{offset_x:-1,offset_y:9,width:21},B:{offset_x:0,offset_y:9,width:20},C:{offset_x:0,offset_y:9,width:19},D:{offset_x:0,offset_y:9,width:20},E:{offset_x:0,offset_y:9,width:19},F:{offset_x:0,offset_y:9,width:20},G:{offset_x:0,offset_y:9,width:20},H:{offset_x:0,offset_y:9,width:21},I:{offset_x:0,offset_y:9,width:9},J:{offset_x:-1,offset_y:9,width:15},K:{offset_x:0,offset_y:9,width:21},L:{offset_x:0,offset_y:9,width:21},M:{offset_x:0,offset_y:9,width:29},N:{offset_x:0,offset_y:9,width:23},O:{offset_x:0,offset_y:9,width:20},P:{offset_x:0,offset_y:9,width:19},Q:{offset_x:0,offset_y:9,width:21},R:{offset_x:0,offset_y:9,width:19},S:{offset_x:0,offset_y:9,width:19},T:{offset_x:0,offset_y:9,width:19},U:{offset_x:0,offset_y:9,width:20},V:{offset_x:-1,offset_y:9,width:21},W:{offset_x:0,offset_y:9,width:28},X:{offset_x:-1,offset_y:9,width:23},Y:{offset_x:-1,offset_y:9,width:24},Z:{offset_x:0,offset_y:9,width:21},"[":{offset_x:0,offset_y:6,width:13},"\\":{offset_x:-1,offset_y:9,width:16},"]":{offset_x:0,offset_y:6,width:13},"^":{offset_x:0,offset_y:9,width:19},_:{offset_x:-1,offset_y:35,width:18},"`":{offset_x:-1,offset_y:6,width:9},a:{offset_x:-1,offset_y:14,width:21},b:{offset_x:0,offset_y:14,width:20},c:{offset_x:0,offset_y:14,width:19},d:{offset_x:0,offset_y:14,width:20},e:{offset_x:0,offset_y:14,width:19},f:{offset_x:0,offset_y:12,width:20},g:{offset_x:-1,offset_y:12,width:20},h:{offset_x:0,offset_y:14,width:21},i:{offset_x:0,offset_y:14,width:9},j:{offset_x:-1,offset_y:14,width:15},k:{offset_x:0,offset_y:14,width:21},l:{offset_x:0,offset_y:14,width:21},m:{offset_x:0,offset_y:14,width:29},n:{offset_x:0,offset_y:14,width:23},o:{offset_x:0,offset_y:14,width:20},p:{offset_x:0,offset_y:14,width:19},q:{offset_x:0,offset_y:14,width:21},r:{offset_x:0,offset_y:14,width:19},s:{offset_x:0,offset_y:14,width:19},t:{offset_x:0,offset_y:14,width:19},u:{offset_x:0,offset_y:14,width:20},v:{offset_x:-1,offset_y:14,width:21},w:{offset_x:-1,offset_y:14,width:31},x:{offset_x:-1,offset_y:14,width:23},y:{offset_x:-1,offset_y:14,width:24},z:{offset_x:0,offset_y:14,width:21},"{":{offset_x:0,offset_y:6,width:16},"|":{offset_x:0,offset_y:5,width:9},"}":{offset_x:0,offset_y:6,width:15},"~":{offset_x:0,offset_y:21,width:18},"¡":{offset_x:0,offset_y:9,width:9},"¨":{offset_x:-1,offset_y:8,width:13},"·":{offset_x:-1,offset_y:35,width:9},"¸":{offset_x:0,offset_y:33,width:12},"¿":{offset_x:0,offset_y:9,width:20},"关":{offset_x:0,offset_y:9,width:35}}},e}(),DNFontDef=function(){function e(){}return e}(),DNGameConfig=function(){function e(){}return e.loadAPI=function(){},e.submitHighScore=function(){},e.showLeaderboards=function(){},e.showAds=function(){},e.pauseGame=function(){DNStateManager.g_instance.onPause()},e.resumeGame=function(){DNStateManager.g_instance.onResume()},e.restartGame=function(){DNStateManager.g_instance.onRestart()},e.soundChange=function(e){DNSoundManager.g_instance.setSoundEnabled(e)},e.goMoreGames=function(){Play68.goHome()},e.getBrandingPic=function(){if(!DNAssetsManager.g_instance)return null;var e=DNAssetsManager.g_instance.getImage(Images.LOGO);return e.getBounds()?DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.LOGO):null},e.goLogo=function(){},e.needShowRotateScreen=!1,e.haveHighScores=!0,e.adsFrequency=100,e.haveMoreGames=!1,e.haveBranding=!1,e.ALL_GAME_LANGUAGES=["en","ru","it","de","tr","es","pt","fr","nl"],e}(),DNJellyButton=function(e){function t(t,n){e.call(this),this.selected=!1,this.func=null,this.enabled=!0,this.picture=DNAssetsManager.g_instance.getCenteredImageWithProxy(t),this.addChild(this.picture),this.func=n}return __extends(t,e),t.prototype.getPicture=function(){return this.picture},t.prototype.setHandler=function(e){this.func=e},t.prototype.forceUpdate=function(t){e.prototype.forceUpdate.call(this,t),this.jellier&&(this.jellier.update(t),this.jellier.isDead()&&(this.jellier=null))},t.prototype.select=function(){this.selected||(this.picture.scaleX=this.picture.scaleY=1,this.jellier=new Jellier(this.picture,15,0),this.selected=!0)},t.prototype.deselect=function(){this.selected&&(this.selected=!1)},t.prototype.onMouseDown=function(e,t){this.hitTestSmart(e,t)&&!DNGUIObject.wasHandlerThisFrame&&(DNGUIObject.wasHandlerThisFrame=!0,this.liveTime=0,this.select())},t.prototype.onMouseUp=function(e,t){this.hitTestSmart(e,t)&&this.selected&&(DNGUIObject.wasHandlerThisFrame||(DNGUIObject.wasHandlerThisFrame=!0,this.func&&this.func(),DNSoundManager.g_instance.play(Sounds.CLICK))),this.deselect()},t.prototype.onMouseMove=function(e,t){this.hitTestSmart(e,t)||this.deselect()},t.prototype.hitTestSmart=function(e,t){if(this.enabled){if(!this.parent||!this.visible)return!1;var n=this.picture.localToGlobal(0,0);n.x/=Constants.SCREEN_SCALE,n.y/=Constants.SCREEN_SCALE;var r=.6*this.picture.getBounds().width*this.scaleX,i=.6*this.picture.getBounds().height*this.scaleY;return n.x<e+r&&n.x>e-r&&n.y<t+i&&n.y>t-i}},t.prototype.setEnabled=function(e){this.enabled=e},t}(DNGUIObject),DNLanguageSelector=function(e){function t(n,r){var i=this;e.call(this,"flags/back",null),this.allLanguages=[],this.state=t.STATE_NORMAL,this.shape=new createjs.Shape,this.cellSize=75,this.picture.y=1,this.shape.graphics.beginFill("#000000"),this.shape.graphics.drawRect(0,0,3*this.cellSize,3*this.cellSize),this.shape.graphics.endFill(),this.addChildAt(this.shape,0),this.shape.x=90-this.cellSize/2,this.shape.y=-this.cellSize/2,this.shape.alpha=0,this.setHandler(function(){return i.onTap()}),this.allLanguagesNames=r;for(var s=0;s<this.allLanguagesNames.length;s++)this.allLanguages.push(new DNFlatButton("flags/"+this.allLanguagesNames[s],function(){return i.onFlagTap()})),this.addChild(this.allLanguages[s]),n.addGuiObject(this.allLanguages[s]),this.allLanguages[s].visible=!1;this.setLanguage(DNStringManager.getInstance().getLanguage())}return __extends(t,e),t.prototype.setLanguage=function(e){this.addChild(DNAssetsManager.g_instance.getCenteredImageWithProxy("flags/"+e)),DNStringManager.getInstance().setLanguage(e)},t.prototype.onTap=function(){switch(this.state){case t.STATE_NORMAL:this.show();break;case t.STATE_SHOWED:this.hide()}},t.prototype.show=function(){var e=this;createjs.Tween.removeTweens(this.shape),createjs.Tween.get(this.shape).wait(400).to({alpha:.45},400,createjs.Ease.linear),this.state=t.STATE_SHOW;for(var n=0;n<this.allLanguages.length;n++){this.allLanguages[n].y=0,this.allLanguages[n].enabled=!1,this.allLanguages[n].visible=!0,this.allLanguages[n].scaleX=this.allLanguages[n].scaleY=.5;var r=createjs.Tween.get(this.allLanguages[n]).wait(50*n).to({y:this.cellSize*(n%3),x:90+Math.floor(n/3)*+this.cellSize,scaleX:.9,scaleY:.9},400,createjs.Ease.cubicOut);n==this.allLanguages.length-1&&r.call(function(){return e.onShowEnded()})}},t.prototype.hide=function(){var e=this;createjs.Tween.removeTweens(this.shape),createjs.Tween.get(this.shape).to({alpha:0},400,createjs.Ease.linear),this.state=t.STATE_HIDE;for(var n=0;n<this.allLanguages.length;n++){this.allLanguages[n].enabled=!1;var r=createjs.Tween.get(this.allLanguages[n]).wait(70*n).to({x:0,y:0,scaleX:.5,scaleY:.5},300,createjs.Ease.cubicOut);n==this.allLanguages.length-1&&r.call(function(){return e.onHideEnded()})}},t.prototype.onShowEnded=function(){this.state=t.STATE_SHOWED;for(var e=0;e<this.allLanguages.length;e++)this.allLanguages[e].enabled=!0},t.prototype.onHideEnded=function(){for(var e=0;e<this.allLanguages.length;e++)this.allLanguages[e].visible=!1;this.state=t.STATE_NORMAL},t.prototype.onFlagTap=function(){if(this.state==t.STATE_SHOWED)for(var e=0;e<this.allLanguages.length;e++)if(this.allLanguages[e].wasHandlerThisFrame)return this.setLanguage(this.allLanguagesNames[e]),void this.hide()},t.prototype.onMouseDown=function(n,r){(this.state==t.STATE_SHOWED||this.state==t.STATE_NORMAL)&&e.prototype.onMouseDown.call(this,n,r)},t.prototype.onMissClick=function(){this.state==t.STATE_SHOWED&&this.hide()},t.STATE_NORMAL=0,t.STATE_SHOW=1,t.STATE_SHOWED=2,t.STATE_HIDE=3,t}(DNFlatButton),DNLoadingBar=function(e){function t(t,n,r){e.call(this),this.loadingShape=new createjs.Shape,this.loadingShapeBack1=new createjs.Shape,this.loadingShapeBack2=new createjs.Shape,this.maxWidth=300,this.deltaY=50,this.loadingShapeBack1.graphics.beginFill(n),this.loadingShapeBack1.graphics.drawRect(-4,-4,this.maxWidth+8,this.deltaY+8),this.loadingShapeBack1.graphics.endFill(),this.addChild(this.loadingShapeBack1),this.loadingShape.graphics.beginFill(r),this.loadingShape.graphics.drawRect(0,0,this.maxWidth,this.deltaY),this.loadingShape.graphics.endFill(),this.addChild(this.loadingShape),this.loadingShape.scaleX=0,this.loadingShape.x=-this.maxWidth/2,this.loadingShape.y=1.5*+this.deltaY,this.loadingShapeBack1.x=this.loadingShape.x,this.loadingShapeBack1.y=this.loadingShape.y,this.labelPercentDownload=new createjs.Text("0%","bold 35px Verdana",t),this.labelPercentDownload.textAlign="center",this.addChild(this.labelPercentDownload),this.labelPercentDownload.y=75}return __extends(t,e),t.prototype.setProgress=function(e){this.labelPercentDownload.text=(100*e).toFixed(0)+"%",this.loadingShape.scaleX=e},t}(createjs.Container),DNLocalizableLabel=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.setText=function(t){e.prototype.setText.call(this,DNStringManager.getInstance().getString(t))},t}(DNBitmapLabel),DNLogoPlaceholder=function(e){function t(t,n){if(e.call(this),this.scaleCalculated=!1,this.maxWidth=t,this.maxHeight=n,this.visible=DNGameConfig.haveBranding,Constants.DEBUG_MODE){var r=new createjs.Shape;r.graphics.beginFill("#ff0000"),r.graphics.drawRect(0,0,t,n),r.graphics.endFill(),r.x=-t/2,r.y=-n/2,this.addChild(r)}else this.picture=DNGameConfig.getBrandingPic(),this.addChild(this.picture);this.calcScale()}return __extends(t,e),t.prototype.calcScale=function(){if(!this.scaleCalculated){if(!this.picture||!this.picture.getBounds())return;try{var e=Math.min(this.maxWidth/this.picture.getBounds().width,this.maxHeight/this.picture.getBounds().height);1>e&&(this.picture.scaleX=this.picture.scaleY=e),this.scaleCalculated=!0}catch(t){console.log("error, logo placeholder pic")}}},t.prototype.update=function(t){e.prototype.update.call(this,t),this.calcScale()},t.prototype.onMouseDown=function(e,t){this.hitTestSmart(e,t)&&DNGameConfig.goLogo()},t.prototype.hitTestSmart=function(e,t){if(!this.parent||!this.visible)return!1;if(!this.picture||!this.picture.getBounds())return!1;var n=this.localToGlobal(0,0);n.x/=Constants.SCREEN_SCALE,n.y/=Constants.SCREEN_SCALE;var r=.5*this.picture.getBounds().width*this.scaleX,i=.5*this.picture.getBounds().height*this.scaleY;return n.x<e+r&&n.x>e-r&&n.y<t+i&&n.y>t-i},t}(DNGUIObject),DNMovieClip=function(e){function t(t,n,r,i){e.call(this),this.frames=[],this.frame=0,this.loop=!1,this.paused=!1,this.frameTime=n,i||(i=DNAssetsManager.g_instance.getAthlasFramesCount(t));for(var s=0;i>s;s++)this.frames.push(DNAssetsManager.g_instance.getCenteredImageWithProxy(t+"/"+s)),this.addChild(this.frames[s]);r&&(this.loop=r),this.goto(0)}return __extends(t,e),t.prototype.pause=function(){this.paused=!0},t.prototype.play=function(){this.paused=!1,this.liveTime=0},t.prototype.gotoAndStop=function(e){this.goto(e),this.pause()},t.prototype.goto=function(e){this.frame=e;for(var t=0;t<this.frames.length;t++)this.frames[t].visible=t==e},t.prototype.totalFrames=function(){return this.frames.length},t.prototype.setLoop=function(e){this.loop=e},t.prototype.setFrameTime=function(e){this.frameTime=e},t.prototype.update=function(t){this.paused||(e.prototype.update.call(this,t),this.liveTime>this.frameTime&&(this.liveTime=0,this.frame++,this.frame>=this.frames.length&&(this.frame=this.frames.length-1,this.loop?this.frame=0:this.kill()),this.goto(this.frame)))},t}(DNGameObject),DNPlaceholder=function(e){function t(){e.call(this)}return __extends(t,e),t}(DNGUIObject),DNProgressBar=function(e){function t(t,n){e.call(this),this.shape=new createjs.Shape,this.width=0,t&&this.addChild(DNAssetsManager.g_instance.getImage(t));var r=DNAssetsManager.g_instance.getImage(n);this.addChild(r),this.width=r.getBounds().width,this.shape.graphics.beginFill("#000000"),this.shape.graphics.drawRect(0,0,r.getBounds().width,r.getBounds().height),this.shape.graphics.endFill(),r.mask=this.shape}return __extends(t,e),t.prototype.setProgress=function(e){e>1&&(e=1),this.shape.x=(e-1)*this.width},t}(DNGUIObject),DNStateManager=function(){function e(t,n,r,i){var s=this;this.statesConstainer=new createjs.Container,this.mouseDown=!1,this.timeDevider=1,this.liveTime=0,this.debugDraw=!1,this.isLoading=!0,this.lastTime=0,this.lastMouseUpHandlerTime=-1,this.lastMouseDownHandlerTime=-1,this.lastMouseMoveHandlerTime=-1,DNGameConfig.loadAPI(),e.g_instance=this,this.states=Array(),this.canvas=document.getElementById("canvas"),this.stage=new createjs.Stage(this.canvas),this.stage.autoClear=!1;var o=navigator.userAgent.indexOf("Android")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1);o&&createjs.Touch.isSupported()&&this.stage.enableDOMEvents(!1),createjs.Touch.enable(this.stage),this.stage.enableMouseOver(5),createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED,createjs.Ticker.setFPS(60),createjs.Ticker.addEventListener("tick",function(e){return s.update(e)}),Constants.DEBUG_MODE&&(document.onkeydown=function(e){return s.onKeyDown(e)},document.onkeyup=function(e){return s.onKeyUp(e)}),this.pushState(new PreloaderState(t,n,r,i)),this.stage.addChild(this.statesConstainer),Constants.PIXEL_RATIO=window.devicePixelRatio?window.devicePixelRatio:1,Constants.g_isPC?(window.onresize=function(e){return s.onResize(e)},this.onResize(null)):(viewporter.ACTIVE?(window.addEventListener("viewportready",function(){return s.onOrientationChanged()}),window.addEventListener("viewportchange",function(){return s.onOrientationChanged()})):window.addEventListener("orientationchange",function(){return s.onOrientationChanged()}),this.onOrientationChanged()),this.stage.addEventListener(Constants.MOUSE_MOVE,function(e){return s.handleMouse(e)}),this.stage.addEventListener(Constants.MOUSE_DOWN,function(e){return s.handleMouse(e)}),this.stage.addEventListener(Constants.MOUSE_UP,function(e){return s.handleMouse(e)})}return e.prototype.isLandscape=function(){return viewporter.isLandscape()},e.prototype.onOrientationChanged=function(){this.resizeTo(window.innerWidth,window.innerHeight),DNGameConfig.needShowRotateScreen&&!this.isLoading&&0!=this.states.length&&this.states[this.states.length-1].onOrientationChanged(this.isLandscape())},e.prototype.onResize=function(){this.resizeTo(window.innerWidth,window.innerHeight)},e.prototype.resizeTo=function(e,t){Constants.SCREEN_SCALE=t>e?e/Constants.ASSETS_WIDTH*Constants.PIXEL_RATIO:Math.min(e/Constants.ASSETS_WIDTH,t/Constants.ASSETS_HEIGHT)*Constants.PIXEL_RATIO,Constants.SCREEN_HEIGHT=t/Constants.SCREEN_SCALE*Constants.PIXEL_RATIO,this.canvas.width=Constants.ASSETS_WIDTH*Constants.SCREEN_SCALE,this.canvas.height=t*Constants.PIXEL_RATIO,this.canvas.style.width=this.canvas.width/Constants.PIXEL_RATIO+"px",this.canvas.style.height=this.canvas.height/Constants.PIXEL_RATIO+"px",this.statesConstainer.scaleX=this.statesConstainer.scaleY=Constants.SCREEN_SCALE,this.canvas.style.marginLeft=(e-Constants.ASSETS_WIDTH*Constants.SCREEN_SCALE/Constants.PIXEL_RATIO)/2+"px",this.canvas.style.marginTop="0px",0!=this.states.length&&this.states[this.states.length-1].onChangeScale()},e.prototype.allAssetsLoaded=function(){var e=this;this.isLoading=!1,window.onpagehide&&(window.onpagehide=function(t){return e.onLostFocus(t)}),window.onblur&&(window.onblur=function(t){return e.onLostFocus(t)}),window.onpageshow&&(window.onpageshow=function(t){return e.onFocus(t)}),window.onfocus&&(window.onfocus=function(t){return e.onFocus(t)}),GameData.getInstance().load(),this.changeState(new MainState),DNGameConfig.needShowRotateScreen&&this.isLandscape()&&this.pushState(new PortraitLockState)},e.prototype.update=function(e){this.debugDraw&&this.stage.update(e);var t=createjs.Ticker.getTime(),n=t-this.lastTime;this.lastTime=t;var r=.001*n/this.timeDevider;if(this.liveTime+=r,DNSoundManager.g_instance.update(),0!=this.states.length){var i=this.states[this.states.length-1];i.isInitiliazed()||i.init(),i.update(r)}for(var s=0;s<this.states.length;s++)this.states[s].alignByCenter(0==s);for(var s=0;s<this.states.length;s++)this.states[s].forceUpdate(r);this.debugDraw||this.stage.update(e)},e.prototype.changeState=function(e){for(;0!=this.states.length;)this.popState();this.pushState(e)},e.prototype.pushState=function(e){0!=this.states.length&&this.states[this.states.length-1].onPushStateTop(),this.states.push(e),this.statesConstainer.addChild(e)},e.prototype.popState=function(){0!=this.states.length&&(this.states[this.states.length-1].cleanup(),this.statesConstainer.removeChild(this.states[this.states.length-1]),this.states.pop(),0!=this.states.length&&this.states[this.states.length-1].resume())},e.prototype.onLostFocus=function(){DNSoundManager.g_instance.onLostFocus()},e.prototype.onFocus=function(){DNSoundManager.g_instance.onFocus()},e.prototype.handleMouse=function(e){if(0!=this.states.length){e.preventDefault();var t=this.states[this.states.length-1];switch(e.type){case Constants.MOUSE_DOWN:if(DNSoundManager.g_instance.init(),this.isLoading||DNSoundManager.g_instance.playMusic(.15),this.liveTime==this.lastMouseDownHandlerTime)return;this.lastMouseDownHandlerTime=this.liveTime,this.mouseDown=!0,t.onMouseDown(e.stageX/Constants.SCREEN_SCALE,e.stageY/Constants.SCREEN_SCALE);break;case Constants.MOUSE_UP:if(this.liveTime==this.lastMouseUpHandlerTime)return;this.lastMouseUpHandlerTime=this.liveTime,this.mouseDown=!1,t.onMouseUp(e.stageX/Constants.SCREEN_SCALE,e.stageY/Constants.SCREEN_SCALE);break;case Constants.MOUSE_MOVE:if(this.liveTime==this.lastMouseMoveHandlerTime)return;this.lastMouseMoveHandlerTime=this.liveTime,this.mouseDown&&t.onMouseMove(e.stageX/Constants.SCREEN_SCALE,e.stageY/Constants.SCREEN_SCALE)}}},e.prototype.onKeyDown=function(e){switch(e.keyCode){case 65:this.timeDevider=5;break;case 66:this.timeDevider=.1;break;case 68:this.timeDevider=20}this.stage.update(),0!=this.states.length&&this.states[this.states.length-1].onKeyDown(e.keyCode)},e.prototype.onKeyUp=function(e){switch(e.keyCode){case 65:case 66:case 68:this.timeDevider=1}0!=this.states.length&&this.states[this.states.length-1].onKeyUp(e.keyCode)},e.prototype.onPause=function(){0!=this.states.length&&this.states[this.states.length-1].onPause()},e.prototype.onResume=function(){0!=this.states.length&&this.states[this.states.length-1].onResume()},e.prototype.onRestart=function(){0!=this.states.length&&this.states[this.states.length-1].onRestart()},e.prototype.isMouseDownNow=function(){return this.mouseDown},e.prototype.statesCount=function(){return this.states.length},e.prototype.setDebugDraw=function(e){this.debugDraw=e},e.prototype.onChangeLanguage=function(){for(var e=0;e<this.states.length;e++)this.states[e].onChangeLanguage()},e}(),DNStaticPicture=function(e){function t(t){e.call(this),this.addChild(DNAssetsManager.g_instance.getCenteredImageWithProxy(t))}return __extends(t,e),t}(DNGUIObject),DNStringManager=function(){function e(){this.container=new createjs.Container,this.strings=new Object,this.allStrings=null,this.allStrings=g_strings,this.setLanguage("en")}return e.getInstance=function(){return e.g_instance},e.prototype.getString=function(e){return this.strings?this.strings[e]||"["+e+"]":"[no language]"},e.prototype.setLanguage=function(e){this.strings=this.allStrings[e],this.language=e,DNStateManager.g_instance&&DNStateManager.g_instance.onChangeLanguage()},e.prototype.getLanguagePrefix=function(){return"en"==this.language?"":this.language+"/"},e.prototype.getLanguage=function(){return this.language},e.g_instance=new e,e}(),FPSCounter=function(e){function t(){e.call(this),this.textField=new createjs.Text("0","bold 40px Verdana","#FF0000"),this.counter=0,this.addChild(this.textField)}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t),this.counter++,this.liveTime>=1&&(this.liveTime-=1,this.textField.text=this.counter.toString(),this.counter=0)},t}(DNGameObject),GameData=function(){function e(){this.totalScore=0,this.levelsCompleted=0,this.LEVELS_COMPLETED="LEVELS_COMPLETED",this.TOTAL_SCORE="TOTAL_SCORE",this.STARS_PER_LEVEL="STARS_PER_LEVEL",this.LEVEL_1={time:60,task:1,humans:[{x:137,id:0},{x:343,id:2},{x:513,id:1}],roads:[{y:294,h:70,min:2,max:5,speed:-250},{y:353,h:70,min:2,max:5,speed:220},{y:545,h:70,min:1,max:5,speed:-350}],objects:[{name:"objects/background_4",x:350,y:400,layer:0},{name:"objects/road_2",x:350,y:325,layer:0},{name:"objects/road_1",x:350,y:545,layer:0},{name:"objects/tree_2",x:190,y:198,layer:1},{name:"objects/tree_1",x:408,y:202,layer:1},{name:"objects/tree_3",x:565,y:208,layer:1},{name:"objects/tree_1",x:48,y:450,layer:1},{name:"objects/flower_1",x:31,y:180,layer:0},{name:"objects/flower_2",x:116,y:200,layer:0},{name:"objects/flower_1",x:216,y:620,layer:0},{name:"objects/flower_2",x:33,y:680,layer:0},{name:"objects/flower_2",x:577,y:650,layer:0},{name:"objects/stone_2",x:425,y:450,layer:1}]},this.LEVEL_2={time:50,task:4,humans:[{x:106,id:0},{x:237,id:2},{x:281,id:1},{x:471,id:1},{x:555,id:1}],roads:[{y:223,h:70,min:1,max:5,speed:-200},{y:282,h:70,min:1,max:6,speed:170},{y:577,h:70,min:1.5,max:4,speed:400},{y:689,h:70,min:1.5,max:4,speed:-400}],objects:[{name:"objects/background_2",x:350,y:400,layer:0},{name:"objects/road_2",x:350,y:254,layer:0},{name:"objects/road_1",x:350,y:577,layer:0},{name:"objects/road_1",x:350,y:689,layer:0},{name:"objects/tree_2",x:0,y:0,layer:1},{name:"objects/tree_1",x:194,y:85,layer:1},{name:"objects/tree_3",x:333,y:33,layer:1},{name:"objects/tree_1",x:480,y:106,layer:1},{name:"objects/tree_1",x:617,y:41,layer:1},{name:"objects/tree_1",x:77,y:480,layer:1},{name:"objects/tree_1",x:221,y:386,layer:1},{name:"objects/tree_1",x:361,y:485,layer:1},{name:"objects/tree_1",x:494,y:386,layer:1},{name:"objects/tree_1",x:622,y:468,layer:1},{name:"objects/flower_1",x:38,y:400,layer:0},{name:"objects/flower_1",x:119,y:367,layer:0},{name:"objects/flower_1",x:225,y:493,layer:0},{name:"objects/flower_1",x:361,y:385,layer:0},{name:"objects/stone_2",x:612,y:362,layer:0},{name:"objects/shield",x:174,y:174,layer:1},{name:"objects/shield",x:390,y:174,layer:1},{name:"objects/shield",x:174,y:642,layer:1},{name:"objects/shield",x:390,y:642,layer:1}]},this.LEVEL_3={time:25,task:2,humans:[{x:168,id:2},{x:418,id:2},{x:563,id:1}],roads:[{y:435,h:70,min:1.5,max:5,speed:-140},{y:377,h:70,min:1.5,max:5,speed:-160},{y:319,h:70,min:1.5,max:5,speed:-200},{y:672,h:70,min:1.5,max:2,speed:500}],objects:[{name:"objects/background_3",x:350,y:400,layer:0},{name:"objects/road_3",x:350,y:378,layer:0},{name:"objects/road_1",x:350,y:672,layer:0},{name:"objects/tree_2",x:147,y:552,layer:1},{name:"objects/tree_1",x:351,y:557,layer:1},{name:"objects/tree_3",x:541,y:552,layer:1},{name:"objects/flower_1",x:51,y:228,layer:0},{name:"objects/flower_1",x:132,y:141,layer:0},{name:"objects/flower_1",x:217,y:228,layer:0},{name:"objects/stone_2",x:301,y:188,layer:0},{name:"objects/flower_1",x:391,y:103,layer:0},{name:"objects/stone_1",x:482,y:200,layer:0},{name:"objects/flower_1",x:617,y:233,layer:0},{name:"objects/stone_2",x:65,y:765,layer:0},{name:"objects/stone_1",x:224,y:734,layer:0},{name:"objects/flower_1",x:331,y:765,layer:0},{name:"objects/stone_2",x:582,y:767,layer:0},{name:"objects/flower_1",x:66,y:162,layer:0},{name:"objects/flower_1",x:89,y:207,layer:0},{name:"objects/flower_1",x:310,y:152,layer:0},{name:"objects/flower_1",x:537,y:260,layer:0},{name:"objects/shield",x:340,y:270,layer:1}]},this.LEVEL_4={time:45,task:1,humans:[{x:135,id:3},{x:298,id:1},{x:382,id:3},{x:531,id:1}],roads:[{y:348,h:70,min:2,max:7,speed:-100},{y:290,h:70,min:3,max:5.5,speed:-150},{y:232,h:70,min:2,max:7,speed:-200},{y:528,h:70,min:1,max:2.5,speed:550},{y:462,h:70,min:1,max:2.5,speed:550},{y:645,h:70,min:1,max:2.5,speed:550}],objects:[{name:"objects/background_1",x:350,y:400,layer:0},{name:"objects/road_3",x:350,y:290,layer:0},{name:"objects/road_2",x:350,y:495,layer:0},{name:"objects/road_1",x:350,y:645,layer:0},{name:"objects/tree_2",x:259,y:84,layer:1},{name:"objects/tree_1",x:620,y:83,layer:1},{name:"objects/tree_3",x:205,y:406,layer:1},{name:"objects/tree_3",x:602,y:411,layer:1},{name:"objects/flower_1",x:83,y:159,layer:0},{name:"objects/flower_1",x:171,y:93,layer:0},{name:"objects/flower_1",x:400,y:132,layer:0},{name:"objects/flower_1",x:567,y:119,layer:0},{name:"objects/flower_1",x:365,y:407,layer:0},{name:"objects/stone_2",x:325,y:172,layer:0},{name:"objects/stone_1",x:470,y:173,layer:0},{name:"objects/stone_1",x:58,y:587,layer:0},{name:"objects/stone_1",x:452,y:578,layer:0},{name:"objects/shield",x:629,y:185,layer:1},{name:"objects/shield",x:56,y:414,layer:1},{name:"objects/shield",x:219,y:596,layer:1},{name:"objects/shield",x:457,y:596,layer:1}]},this.LEVEL_5={time:40,task:3,humans:[{x:231,id:0},{x:298,id:0},{x:361,id:3},{x:429,id:0},{x:500,id:3}],roads:[{y:349,h:70,min:1,max:4,speed:-500,sport_prob:.5},{y:625,h:70,min:1,max:2,speed:480},{y:567,h:70,min:1,max:5,speed:400},{y:509,h:70,min:1,max:5,speed:400}],objects:[{name:"objects/background_2",x:350,y:400,layer:0},{name:"objects/road_1",x:350,y:350,layer:0},{name:"objects/road_3",x:350,y:567,layer:0},{name:"objects/tree_2",x:238,y:197,layer:1},{name:"objects/tree_1",x:384,y:123,layer:1},{name:"objects/tree_3",x:190,y:427,layer:1},{name:"objects/tree_2",x:558,y:427,layer:1},{name:"objects/tree_2",x:32,y:685,layer:1},{name:"objects/tree_1",x:150,y:690,layer:1},{name:"objects/tree_3",x:593,y:695,layer:1},{name:"objects/tree_2",x:703,y:696,layer:1},{name:"objects/flower_1",x:72,y:132,layer:0},{name:"objects/flower_1",x:213,y:276,layer:0},{name:"objects/flower_1",x:278,y:153,layer:0},{name:"objects/flower_1",x:393,y:253,layer:0},{name:"objects/flower_1",x:566,y:167,layer:0},{name:"objects/flower_1",x:172,y:776,layer:0},{name:"objects/flower_1",x:334,y:765,layer:0},{name:"objects/stone_2",x:118,y:232,layer:0},{name:"objects/stone_1",x:106,y:285,layer:0},{name:"objects/stone_1",x:538,y:286,layer:0},{name:"objects/stone_2",x:660,y:173,layer:0},{name:"objects/stone_1",x:645,y:285,layer:0},{name:"objects/stone_2",x:452,y:758,layer:0},{name:"objects/shield",x:33,y:300,layer:1},{name:"objects/shield",x:669,y:459,layer:1}]},this.LEVEL_6={time:35,task:1,humans:[{x:242,id:2},{x:343,id:2},{x:437,id:2}],roads:[{y:317,h:70,min:1,max:2.5,speed:-300},{y:517,h:70,min:1,max:2.5,speed:350},{y:657,h:70,min:1.5,max:2.5,speed:-370}],objects:[{name:"objects/background_2",x:350,y:400,layer:0},{name:"objects/road_1",x:350,y:317,layer:0},{name:"objects/road_1",x:350,y:517,layer:0},{name:"objects/road_1",x:350,y:657,layer:0},{name:"objects/tree_2",x:70,y:155,layer:1},{name:"objects/tree_1",x:221,y:68,layer:1},{name:"objects/tree_3",x:331,y:206,layer:1},{name:"objects/tree_2",x:471,y:102,layer:1},{name:"objects/tree_2",x:623,y:192,layer:1},{name:"objects/tree_1",x:127,y:465,layer:1},{name:"objects/tree_3",x:553,y:371,layer:1},{name:"objects/tree_2",x:303,y:605,layer:1},{name:"objects/tree_2",x:623,y:592,layer:1},{name:"objects/flower_1",x:52,y:53,layer:0},{name:"objects/flower_1",x:202,y:222,layer:0},{name:"objects/flower_1",x:344,y:86,layer:0},{name:"objects/flower_1",x:466,y:222,layer:0},{name:"objects/flower_1",x:628,y:76,layer:0},{name:"objects/flower_1",x:52,y:434,layer:0},{name:"objects/flower_1",x:309,y:388,layer:0},{name:"objects/flower_1",x:506,y:455,layer:0},{name:"objects/flower_1",x:104,y:585,layer:0},{name:"objects/flower_1",x:78,y:768,layer:0},{name:"objects/flower_1",x:296,y:751,layer:0},{name:"objects/flower_1",x:522,y:735,layer:0},{name:"objects/stone_2",x:224,y:593,layer:0},{name:"objects/shield",x:71,y:263,layer:1},{name:"objects/shield",x:630,y:263,layer:1}]},this.LEVEL_7={task:2,humans:[{x:190,id:0},{x:300,id:2},{x:480,id:1}],roads:[{y:130,h:70,min:1,max:4,speed:200},{y:255,h:70,min:3,max:6,speed:-300,sport_prob:.5},{y:523,h:70,min:1,max:5,speed:-350},{y:465,h:70,min:1,max:5,speed:250},{y:407,h:70,min:1,max:5,speed:300},{y:655,h:70,min:1,max:5,speed:210}],objects:[{name:"objects/background_3",x:350,y:400,layer:0},{name:"objects/road_1",x:350,y:130,layer:0},{name:"objects/road_1",x:350,y:255,layer:0},{name:"objects/road_4",x:350,y:350,layer:0},{name:"objects/road_3",x:350,y:465,layer:0},{name:"objects/road_1",x:350,y:655,layer:0},{name:"objects/dirt_2",x:210,y:590,layer:0},{name:"objects/flower_1",x:72,y:736,layer:0},{name:"objects/flower_1",x:534,y:588,layer:0},{name:"objects/flower_1",x:302,y:193,layer:0},{name:"objects/trash",x:246,y:585,layer:0},{name:"objects/zebra",x:263,y:256,layer:0},{name:"objects/zebra",x:465,y:256,layer:0},{name:"objects/tree_2",x:147,y:70,layer:1},{name:"objects/tree_1",x:372,y:328,layer:1},{name:"objects/tree_1",x:604,y:589,layer:1},{name:"objects/tree_2",x:407,y:753,layer:1}]},this.LEVEL_8={task:4,time:25,humans:[{x:157,id:0},{x:258,id:1},{x:354,id:2},{x:462,id:3},{x:556,id:0}],roads:[{y:210,h:70,min:1,max:3,speed:200},{y:150,h:70,min:1,max:3,speed:-300},{y:400,h:70,min:2,max:5,speed:-350,sport_prob:.5},{y:614,h:70,min:1,max:5,speed:250},{y:672,h:70,min:1,max:5,speed:300}],objects:[{name:"objects/background_2",x:350,y:400,layer:0},{name:"objects/road_2",x:350,y:183,layer:0},{name:"objects/road_1",x:350,y:400,layer:0},{name:"objects/road_2",x:350,y:644,layer:0},{name:"objects/dirt_1",x:608,y:70,layer:0},{name:"objects/dirt_2",x:350,y:283,layer:0},{name:"objects/dirt_2",x:110,y:470,layer:0},{name:"objects/dirt_1",x:434,y:533,layer:0},{name:"objects/flower_2",x:621,y:343,layer:0},{name:"objects/flower_2",x:595,y:760,layer:0},{name:"objects/flower_2",x:137,y:267,layer:0},{name:"objects/shield",x:73,y:99,layer:0},{name:"objects/shield",x:645,y:562,layer:0},{name:"objects/shield",x:59,y:720,layer:0},{name:"objects/tree_3",x:313,y:511,layer:1}]},this.LEVEL_9={time:25,task:3,humans:[{x:157,id:1},{x:272,id:2},{x:431,id:3},{x:555,id:1}],roads:[{y:158,h:70,min:1,max:3,speed:200},{y:217,h:70,min:1,max:4,speed:-300},{y:348,h:70,min:1,max:3,speed:-350},{y:586,h:70,min:1,max:5,speed:250},{y:688,h:70,min:1,max:3,speed:300}],objects:[{name:"objects/background_1",x:350,y:400,layer:0},{name:"objects/road_2",x:350,y:189,layer:0},{name:"objects/road_1",x:350,y:348,layer:0},{name:"objects/road_1",x:350,y:586,layer:0},{name:"objects/road_1",x:350,y:688,layer:0},{name:"objects/zebra",x:281,y:586,layer:0},{name:"objects/zebra",x:281,y:347,layer:0},{name:"objects/trash",x:552,y:273,layer:0},{name:"objects/flower_1",x:220,y:745,layer:0},{name:"objects/flower_1",x:536,y:643,layer:0},{name:"objects/flower_1",x:137,y:290,layer:0},{name:"objects/shield",x:350,y:524,layer:0},{name:"objects/tree_3",x:229,y:473,layer:1},{name:"objects/tree_3",x:484,y:473,layer:1},{name:"objects/tree_1",x:362,y:52,layer:1},{name:"objects/tree_2",x:642,y:99,layer:1},{name:"objects/tree_3",x:52,y:94,layer:1}]},this.LEVEL_10={task:4,humans:[{x:179,id:1},{x:265,id:0},{x:419,id:2},{x:509,id:1}],roads:[{y:565,h:70,min:1.5,max:3,speed:200,sport_prob:.35},{y:620,h:70,min:1.5,max:4,speed:-250,sport_prob:.35},{y:675,h:70,min:2.5,max:3,speed:-350,sport_prob:.35},{y:360,h:70,min:1,max:5,speed:250},{y:184,h:70,min:1,max:3,speed:300}],objects:[{name:"objects/background_2",x:350,y:400,layer:0},{name:"objects/road_3",x:350,y:620,layer:0},{name:"objects/road_4",x:350,y:469,layer:0},{name:"objects/road_1",x:350,y:360,layer:0},{name:"objects/road_1",x:350,y:184,layer:0},{name:"objects/zebra",x:226,y:360,layer:0},{name:"objects/zebra",x:468,y:360,layer:0},{name:"objects/flower_1",x:507,y:267,layer:0},{name:"objects/flower_1",x:134,y:417,layer:0},{name:"objects/tree_3",x:65,y:273,layer:1},{name:"objects/tree_2",x:342,y:298,layer:1},{name:"objects/tree_1",x:344,y:469,layer:1},{name:"objects/tree_3",x:350,y:116,layer:1},{name:"objects/tree_3",x:648,y:273,layer:1}]},this.LEVEL_11={task:5,humans:[{x:130,id:0},{x:220,id:1},{x:309,id:2},{x:404,id:2},{x:494,id:3},{x:575,id:0}],roads:[{y:628,h:70,min:2.5,max:3,speed:200},{y:689,h:70,min:1.5,max:4,speed:-300},{y:399,h:70,min:1,max:3,speed:-350},{y:458,h:70,min:1,max:5,speed:250},{y:187,h:70,min:1,max:3,speed:-300}],objects:[{name:"objects/background_3",x:350,y:400,layer:0},{name:"objects/road_1",x:350,y:187,layer:0},{name:"objects/road_2",x:350,y:429,layer:0},{name:"objects/road_4",x:350,y:543,layer:0},{name:"objects/road_2",x:350,y:660,layer:0},{name:"objects/zebra",x:350,y:687,layer:0},{name:"objects/zebra",x:350,y:630,layer:0},{name:"objects/stone_2",x:137,y:573,layer:0},{name:"objects/stone_2",x:559,y:122,layer:0},{name:"objects/flower_1",x:277,y:743,layer:0},{name:"objects/flower_1",x:501,y:500,layer:0},{name:"objects/flower_1",x:216,y:244,layer:0},{name:"objects/tree_3",x:102,y:306,layer:1},{name:"objects/tree_3",x:611,y:306,layer:1},{name:"objects/tree_3",x:260,y:306,layer:1},{name:"objects/tree_3",x:432,y:306,layer:1},{name:"objects/tree_1",x:52,y:514,layer:1},{name:"objects/tree_1",x:647,y:573,layer:1}]},this.LEVEL_12={task:3,humans:[{x:220,id:0},{x:309,id:3},{x:392,id:0},{x:468,id:1}],roads:[{y:312,h:70,min:1,max:4,speed:-250},{y:254,h:70,min:1,max:4,speed:-250},{y:196,h:70,min:1,max:4,speed:-250},{y:638,h:70,min:1,max:4,speed:250},{y:580,h:70,min:1,max:4,speed:250},{y:522,h:70,min:1,max:4,speed:250}],objects:[{name:"objects/background_4",x:350,y:400,layer:0},{name:"objects/road_3",x:350,y:254,layer:0},{name:"objects/road_3",x:350,y:580,layer:0},{name:"objects/tree_2",x:69,y:107,layer:1},{name:"objects/tree_1",x:259,y:78,layer:1},{name:"objects/tree_3",x:426,y:114,layer:1},{name:"objects/tree_2",x:203,y:428,layer:1},{name:"objects/tree_2",x:560,y:732,layer:1},{name:"objects/flower_1",x:52,y:53,layer:0},{name:"objects/flower_1",x:87,y:425,layer:0},{name:"objects/flower_1",x:308,y:458,layer:0},{name:"objects/flower_1",x:452,y:448,layer:0},{name:"objects/flower_1",x:642,y:406,layer:0},{name:"objects/flower_1",x:78,y:768,layer:0},{name:"objects/flower_1",x:642,y:763,layer:0},{name:"objects/stone_2",x:350,y:405,layer:0},{name:"objects/stone_2",x:544,y:455,layer:0},{name:"objects/shield",x:639,y:146,layer:1},{name:"objects/shield",x:95,y:472,layer:1}]},this.LEVEL_13={time:25,task:4,humans:[{x:170,id:0},{x:309,id:3},{x:392,id:0},{x:468,id:1}],roads:[{y:280,h:70,min:1,max:4,speed:-250},{y:220,h:70,min:1,max:4,speed:-250},{y:396,h:70,min:3,max:6,speed:250,sport_prob:1},{y:516,h:70,min:1,max:4,speed:250},{y:636,h:70,min:1,max:4,speed:250}],objects:[{name:"objects/background_4",x:350,y:400,layer:0},{name:"objects/road_2",x:350,y:250,layer:0},{name:"objects/road_1",x:350,y:396,layer:0},{name:"objects/road_1",x:350,y:516,layer:0},{name:"objects/road_1",x:350,y:636,layer:0},{name:"objects/tree_2",x:69,y:107,layer:1},{name:"objects/tree_1",x:286,y:168,layer:1},{name:"objects/tree_3",x:592,y:115,layer:1},{name:"objects/tree_2",x:550,y:335,layer:1},{name:"objects/tree_2",x:73,y:459,layer:1},{name:"objects/tree_2",x:560,y:732,layer:1},{name:"objects/flower_1",x:52,y:53,layer:0},{name:"objects/flower_1",x:177,y:126,layer:0},{name:"objects/flower_1",x:453,y:151,layer:0},{name:"objects/flower_1",x:512,y:116,layer:0},{name:"objects/flower_1",x:232,y:340,layer:0},{name:"objects/flower_1",x:571,y:455,layer:0},{name:"objects/flower_1",x:264,y:579,layer:0},{name:"objects/flower_1",x:78,y:768,layer:0},{name:"objects/flower_1",x:642,y:743,layer:0},{name:"objects/stone_2",x:353,y:455,layer:0},{name:"objects/stone_2",x:128,y:580,layer:0}]},this.LEVEL_15={task:3,humans:[{x:170,id:0},{x:309,id:3},{x:392,id:0},{x:468,id:1},{x:239,id:3},{x:643,id:0}],roads:[{y:327,h:70,min:1,max:4,speed:-400},{y:267,h:70,min:1,max:4,speed:-400},{y:207,h:70,min:1,max:4,speed:-400},{y:599,h:70,min:1,max:4,speed:500},{y:539,h:70,min:1,max:4,speed:600}],objects:[{name:"objects/background_2",x:350,y:400,layer:0},{name:"objects/road_3",x:350,y:267,layer:0},{name:"objects/road_2",x:350,y:569,layer:0},{name:"objects/tree_2",x:82,y:56,layer:1},{name:"objects/tree_1",x:633,y:82,layer:1},{name:"objects/tree_3",x:77,y:427,layer:1},{name:"objects/tree_2",x:348,y:437,layer:1},{name:"objects/tree_2",x:618,y:432,layer:1},{name:"objects/tree_2",x:76,y:707,layer:1},{name:"objects/tree_2",x:634,y:727,layer:1},{name:"objects/flower_1",x:453,y:151,layer:0},{name:"objects/flower_1",x:171,y:467,layer:0},{name:"objects/flower_1",x:218,y:415,layer:0},{name:"objects/flower_1",x:259,y:467,layer:0},{name:"objects/flower_1",x:432,y:422,layer:0},{name:"objects/flower_1",x:469,y:475,layer:0},{name:"objects/flower_1",x:522,y:406,layer:0},{name:"objects/stone_1",x:196,y:152,layer:0},{name:"objects/stone_2",x:523,y:482,layer:0},{name:"objects/shield",x:56,y:155,layer:1}]},this.LEVEL_16={task:4,humans:[{x:145,id:1},{x:307,id:2},{x:385,id:2},{x:552,id:3}],roads:[{y:197,h:70,min:1,max:3,speed:300},{y:256,h:70,min:1,max:4,speed:-300},{y:541,h:70,min:1,max:5,speed:250},{y:686,h:70,min:1,max:3,speed:-300}],objects:[{name:"objects/background_3",x:350,y:400,layer:0},{name:"objects/road_2",x:350,y:227,layer:0},{name:"objects/road_1",x:350,y:541,layer:0},{name:"objects/road_1",x:350,y:686,layer:0},{name:"objects/road_4",x:350,y:756,layer:0},{name:"objects/zebra",x:349,y:541,layer:0},{name:"objects/zebra",x:145,y:686,layer:0},{name:"objects/zebra",x:552,y:686,layer:0},{name:"objects/stone_1",x:301,y:139,layer:0},{name:"objects/trash",x:103,y:605,layer:0},{name:"objects/trash",x:552,y:323,layer:0},{name:"objects/shield",x:467,y:393,layer:0},{name:"objects/shield",x:230,y:393,layer:0},{name:"objects/tree_2",x:225,y:639,layer:1},{name:"objects/tree_3",x:52,y:310,layer:1},{name:"objects/tree_3",x:648,y:490,layer:1},{name:"objects/tree_1",x:349,y:414,layer:1}]},this.LEVEL_17={task:3,time:25,humans:[{x:572,id:1},{x:459,id:2},{x:347,id:2},{x:237,id:3},{x:133,id:3}],roads:[{y:165,h:70,min:1,max:3,speed:200},{y:225,h:70,min:1,max:4,speed:-300},{y:285,h:70,min:1,max:4,speed:-300},{y:556,h:70,min:1,max:5,speed:250},{y:616,h:70,min:1,max:3,speed:-300}],objects:[{name:"objects/background_2",x:350,y:400,layer:0},{name:"objects/road_4",x:350,y:94,layer:0},{name:"objects/road_3",x:350,y:225,layer:0},{name:"objects/road_2",x:350,y:586,layer:0},{name:"objects/zebra",x:350,y:557,layer:0},{name:"objects/zebra",x:350,y:614,layer:0},{name:"objects/flower_2",x:218,y:756,layer:0},{name:"objects/flower_2",x:619,y:488,layer:0},{name:"objects/flower_2",x:125,y:366,layer:0},{name:"objects/dirt_2",x:442,y:695,layer:0},{name:"objects/dirt_1",x:551,y:365,layer:0},{name:"objects/dirt_2",x:255,y:442,layer:0},{name:"objects/dirt_1",x:84,y:365,layer:0},{name:"objects/tree_1",x:73,y:108,layer:1},{name:"objects/tree_3",x:644,y:108,layer:1},{name:"objects/tree_3",x:644,y:411,layer:1},{name:"objects/tree_1",x:499,y:463,layer:1},{name:"objects/tree_2",x:347,y:397,layer:1},{name:"objects/tree_3",x:194,y:463,layer:1},{name:"objects/tree_1",x:72,y:418,layer:1}]},this.LEVEL_18={time:60,task:2,humans:[{x:566,id:0},{x:477,id:3},{x:389,id:2},{x:304,id:1},{x:218,id:3},{x:130,id:0}],roads:[{y:207,h:70,min:2,max:5.5,speed:320},{y:335,h:70,min:2,max:5.5,speed:-300},{y:467,h:70,min:2,max:6.5,speed:-300},{y:595,h:70,min:2,max:5.5,speed:250},{y:653,h:70,min:2,max:4.5,speed:-300}],objects:[{name:"objects/background_1",x:350,y:400,layer:0},{name:"objects/road_1",x:350,y:207,layer:0},{name:"objects/road_1",x:350,y:335,layer:0},{name:"objects/road_1",x:350,y:467,layer:0},{name:"objects/road_2",x:350,y:624,layer:0},{name:"objects/zebra",x:455,y:467,layer:0},{name:"objects/zebra",x:251,y:467,layer:0},{name:"objects/flower_1",x:445,y:110,layer:0},{name:"objects/flower_1",x:406,y:140,layer:0},{name:"objects/flower_1",x:233,y:264,layer:0},{name:"objects/flower_1",x:113,y:530,layer:0},{name:"objects/flower_1",x:569,y:399,layer:0},{name:"objects/tree_2",x:57,y:141,layer:1},{name:"objects/tree_2",x:642,y:262,layer:1},{name:"objects/tree_2",x:58,y:400,layer:1},{name:"objects/tree_2",x:642,y:530,layer:1}]},this.LEVEL_19={time:60,task:2,humans:[{x:603,id:0},{x:520,id:3},{x:438,id:2},{x:355,id:1},{x:269,id:3},{x:181,id:0},{x:96,id:0}],roads:[{y:174,h:70,min:2,max:4,speed:-300},{y:232,h:70,min:2,max:8,speed:400},{y:290,h:70,min:2,max:5,speed:-300},{y:424,h:70,min:2,max:8,speed:-300},{y:480,h:70,min:2,max:5,speed:250},{y:640,h:70,min:2,max:5,speed:-300}],objects:[{name:"objects/background_3",x:350,y:400,layer:0},{name:"objects/road_3",x:350,y:232,layer:0},{name:"objects/road_2",x:350,y:452,layer:0},{name:"objects/road_1",x:350,y:640,layer:0},{name:"objects/dirt_1",x:398,y:560,layer:0},{name:"objects/dirt_2",x:621,y:554,layer:0},{name:"objects/dirt_2",x:125,y:354,layer:0},{name:"objects/trash",x:165,y:354,layer:0},{name:"objects/flower_1",x:648,y:570,layer:0},{name:"objects/stone_2",x:587,y:347,layer:0},{name:"objects/tree_3",x:306,y:122,layer:1},{name:"objects/tree_1",x:501,y:384,layer:1},{name:"objects/tree_2",x:201,y:584,layer:1}]},this.LEVEL_20={time:50,task:3,humans:[{x:603,id:0},{x:520,id:3},{x:438,id:2},{x:355,id:1},{x:269,id:3},{x:181,id:0},{x:96,id:0}],roads:[{y:176,h:70,min:2,max:2,speed:-280},{y:287,h:70,min:3,max:4,speed:320},{y:402,h:70,min:1,max:6,speed:-250,sport_prob:.5},{y:514,h:70,min:1,max:4,speed:-330},{y:627,h:70,min:2,max:3,speed:350}],objects:[{name:"objects/background_3",x:350,y:400,layer:0},{name:"objects/road_1",x:350,y:176,layer:0},{name:"objects/road_1",x:350,y:287,layer:0},{name:"objects/road_1",x:350,y:402,layer:0},{name:"objects/road_1",x:350,y:514,layer:0},{name:"objects/road_1",x:350,y:627,layer:0},{name:"objects/zebra",x:608,y:176,layer:0},{name:"objects/zebra",x:487,y:287,layer:0},{name:"objects/zebra",x:368,y:402,layer:0},{name:"objects/zebra",x:224,y:514,layer:0},{name:"objects/zebra",x:92,y:627,layer:0},{name:"objects/flower_1",x:384,y:696,layer:0},{name:"objects/flower_1",x:307,y:569,layer:0},{name:"objects/flower_1",x:580,y:344,layer:0},{name:"objects/flower_1",x:327,y:233,layer:0},{name:"objects/tree_2",x:144,y:375,layer:1},{name:"objects/tree_3",x:479,y:748,layer:1},{name:"objects/tree_3",x:150,y:743,layer:1},{name:"objects/tree_3",x:460,y:112,layer:1}]},this.LEVEL_22={time:25,task:3,humans:[{x:245,id:2},{x:311,id:2},{x:382,id:2},{x:458,id:2}],roads:[{y:307,h:70,min:1,max:4,speed:-400},{y:249,h:70,min:1,max:4,speed:-400},{y:463,h:70,min:1,max:4,speed:500},{y:598,h:70,min:1,max:4,speed:600}],objects:[{name:"objects/background_1",x:350,y:600,layer:0},{name:"objects/road_2",x:350,y:279,layer:0},{name:"objects/road_1",x:350,y:463,layer:0},{name:"objects/road_1",x:350,y:598,layer:0},{name:"objects/road_4",x:350,y:532,layer:0},{name:"objects/tree_2",x:34,y:145,layer:1},{name:"objects/tree_1",x:154,y:71,layer:1},{name:"objects/tree_3",x:335,y:145,layer:1},{name:"objects/tree_2",x:523,y:145,layer:1},{name:"objects/tree_2",x:648,y:52,layer:1},{name:"objects/tree_2",x:50,y:755,layer:1},{name:"objects/tree_2",x:164,y:815,layer:1},{name:"objects/tree_2",x:348,y:815,layer:1},{name:"objects/tree_2",x:541,y:815,layer:1},{name:"objects/tree_2",x:684,y:745,layer:1},{name:"objects/flower_1",x:87,y:406,layer:0},{name:"objects/flower_1",x:352,y:383,layer:0},{name:"objects/flower_1",x:593,y:406,layer:0},{name:"objects/stone_1",x:200,y:757,layer:0},{name:"objects/stone_2",x:433,y:763,layer:0},{name:"objects/shield",x:54,y:548,layer:1},{name:"objects/shield",x:644,y:548,layer:1}]},this.LEVEL_23={time:15,task:4,humans:[{x:245,id:0},{x:311,id:0},{x:382,id:0},{x:458,id:0}],roads:[{y:464,h:70,min:1,max:3,speed:-500},{y:406,h:70,min:1,max:3,speed:-500},{y:348,h:70,min:1,max:2,speed:-500}],objects:[{name:"objects/background_4",x:350,y:400,layer:0},{name:"objects/road_3",x:350,y:406,layer:0},{name:"objects/tree_2",x:27,y:71,layer:1},{name:"objects/tree_1",x:143,y:7,layer:1},{name:"objects/tree_3",x:272,y:16,layer:1},{name:"objects/tree_2",x:424,y:21,layer:1},{name:"objects/tree_2",x:564,y:21,layer:1},{name:"objects/tree_2",x:712,y:107,layer:1},{name:"objects/tree_2",x:50,y:755,layer:1},{name:"objects/tree_2",x:164,y:815,layer:1},{name:"objects/tree_2",x:348,y:815,layer:1},{name:"objects/tree_2",x:541,y:815,layer:1},{name:"objects/tree_2",x:684,y:745,layer:1},{name:"objects/stone_1",x:139,y:207,layer:0},{name:"objects/stone_2",x:268,y:147,layer:0},{name:"objects/stone_1",x:514,y:114,layer:0},{name:"objects/stone_2",x:518,y:268,layer:0},{name:"objects/stone_2",x:96,y:654,layer:0},{name:"objects/stone_1",x:200,y:157,layer:0},{name:"objects/stone_2",x:433,y:763,layer:0},{name:"objects/stone_1",x:585,y:607,layer:0}]},this.LEVEL_24={task:4,time:25,humans:[{x:603,id:0},{x:520,id:0},{x:438,id:2},{x:355,id:3},{x:269,id:1},{x:181,id:0},{x:96,id:0}],roads:[{y:302,h:70,min:2.5,max:2,speed:-350},{y:359,h:70,min:3.5,max:4,speed:400},{y:415,h:70,min:1.5,max:2,speed:-300},{y:470,h:70,min:1.5,max:4,speed:-400},{y:527,h:70,min:2.5,max:3,speed:250}],objects:[{name:"objects/background_3",x:350,y:400,layer:0},{name:"objects/road_top",x:350,y:282,layer:0},{name:"objects/road_middle",x:350,y:330,layer:0},{name:"objects/road_middle",x:350,y:386,layer:0},{name:"objects/road_middle",x:350,y:442,layer:0},{name:"objects/road_middle",x:350,y:498,layer:0},{name:"objects/road_bottom",x:350,y:546,layer:0},{name:"objects/shield",x:494,y:740,layer:0},{name:"objects/shield",x:214,y:740,layer:0},{name:"objects/trash",x:197,y:344,layer:0},{name:"objects/stone_2",x:475,y:502,layer:0},{name:"objects/flower_1",x:551,y:667,layer:0},{name:"objects/flower_1",x:476,y:631,layer:0},{name:"objects/flower_1",x:199,y:667,layer:0},{name:"objects/flower_1",x:425,y:178,layer:0},{name:"objects/flower_1",x:459,y:126,layer:0},{name:"objects/flower_1",x:217,y:214,layer:0},{name:"objects/tree_2",x:533,y:242,layer:1},{name:"objects/tree_3",x:317,y:143,layer:1},{name:"objects/tree_1",x:122,y:231,layer:1},{name:"objects/tree_2",x:350,y:714,layer:1},{name:"objects/tree_3",x:648,y:667,layer:1},{name:"objects/tree_3",x:62,y:667,layer:1}]},this.LEVEL_25={task:5,humans:[{x:123,id:0},{x:575,id:0},{x:478,id:2},{x:383,id:3},{x:296,id:1},{x:209,id:0}],roads:[{y:157,h:70,min:2,max:5,speed:-300,sport_prob:.5},{y:278,h:70,min:3,max:4,speed:300,sport_prob:.5},{y:457,h:70,min:1,max:2,speed:-300},{y:587,h:70,min:1,max:4,speed:-350},{y:710,h:70,min:2,max:3,speed:350}],objects:[{name:"objects/background_1",x:350,y:400,layer:0},{name:"objects/road_4",x:350,y:218,layer:0},{name:"objects/road_1",x:350,y:157,layer:0},{name:"objects/road_4",x:350,y:339,layer:0},{name:"objects/road_1",x:350,y:278,layer:0},{name:"objects/road_1",x:350,y:457,layer:0},{name:"objects/road_4",x:350,y:648,layer:0},{name:"objects/road_1",x:350,y:587,layer:0},{name:"objects/road_4",x:350,y:771,layer:0},{name:"objects/road_1",x:350,y:710,layer:0},{name:"objects/stone_1",x:340,y:515,layer:0},{name:"objects/flower_1",x:576,y:380,layer:0},{name:"objects/flower_1",x:369,y:521,layer:0},{name:"objects/flower_1",x:159,y:370,layer:0},{name:"objects/tree_3",x:350,y:105,layer:1},{name:"objects/tree_3",x:646,y:371,layer:1},{name:"objects/tree_3",x:71,y:381,layer:1}]},this.LEVEL_26={task:3,time:28,humans:[{x:583,id:2},{x:503,id:2},{x:418,id:2},{x:338,id:2},{x:258,id:2},{x:187,id:2},{x:113,id:2}],roads:[{y:222,h:70,min:1,max:6,speed:-200},{y:162,h:70,min:1,max:5,speed:200},{y:401,h:70,min:1,max:7,speed:-150},{y:461,h:70,min:1,max:5,speed:-250},{y:626,h:70,min:2,max:5,speed:200},{y:686,h:70,min:2,max:5,speed:200}],objects:[{name:"objects/background_4",x:350,y:400,layer:0},{name:"objects/road_2",x:350,y:192,layer:0},{name:"objects/road_2",x:350,y:431,layer:0},{name:"objects/road_2",x:350,y:656,layer:0},{name:"objects/stone_2",x:446,y:557,layer:0},{name:"objects/stone_2",x:453,y:98,layer:0},{name:"objects/flower_2",x:298,y:754,layer:0},{name:"objects/flower_2",x:66,y:545,layer:0},{name:"objects/flower_2",x:310,y:288,layer:0},{name:"objects/trash",x:217,y:304,layer:0},{name:"objects/trash",x:539,y:548,layer:0},{name:"objects/tree_3",x:350,y:105,layer:1},{name:"objects/tree_3",x:646,y:371,layer:1},{name:"objects/tree_3",x:71,y:381,layer:1}]},this.LEVEL_27={time:25,task:4,humans:[{x:553,id:0},{x:472,id:1},{x:384,id:2},{x:301,id:3},{x:221,id:1},{x:142,id:0}],roads:[{y:279,h:70,min:1,max:4,speed:-400},{y:445,h:70,min:1,max:5,speed:300},{y:505,h:70,min:1,max:7,speed:-350},{y:565,h:70,min:1,max:5,speed:-350}],objects:[{name:"objects/background_1",x:350,y:400,layer:0},{name:"objects/road_1",x:350,y:279,layer:0},{name:"objects/road_3",x:350,y:505,layer:0},{name:"objects/dirt_2",x:486,y:353,layer:0},{name:"objects/flower_1",x:223,y:359,layer:0},{name:"objects/trash",x:432,y:347,layer:0},{name:"objects/shield",x:348,y:703,layer:0},{name:"objects/shield",x:58,y:703,layer:0},{name:"objects/shield",x:638,y:703,layer:0},{name:"objects/shield",x:638,y:217,layer:0},{name:"objects/shield",x:58,y:217,layer:0},{name:"objects/tree_3",x:202,y:714,layer:1},{name:"objects/tree_1",x:501,y:704,layer:1},{name:"objects/tree_3",x:625,y:400,layer:1},{name:"objects/tree_2",x:350,y:381,layer:1},{name:"objects/tree_1",x:109,y:406,layer:1}]},this.LEVEL_28={time:25,task:5,humans:[{x:56,id:0},{x:126,id:0},{x:315,id:2},{x:396,id:3},{x:573,id:1},{x:643,id:1}],roads:[{y:159,h:70,min:1,max:4,speed:-400},{y:264,h:70,min:1,max:5,speed:300},{y:369,h:70,min:1,max:4,speed:-350},{y:598,h:70,min:1,max:5,speed:-350},{y:658,h:70,min:1,max:5,speed:350}],objects:[{name:"objects/background_1",x:350,y:400,layer:0},{name:"objects/road_1",x:350,y:159,layer:0},{name:"objects/road_1",x:350,y:264,layer:0},{name:"objects/road_1",x:350,y:369,layer:0},{name:"objects/road_2",x:350,y:628,layer:0},{name:"objects/flower_1",x:518,y:715,layer:0},{name:"objects/flower_1",x:332,y:469,layer:0},{name:"objects/flower_1",x:633,y:321,layer:0},{name:"objects/flower_1",x:163,y:216,layer:0},{name:"objects/shield",x:485,y:317,layer:0},{name:"objects/shield",x:215,y:317,layer:0},{name:"objects/zebra",x:350,y:598,layer:0},{name:"objects/zebra",x:350,y:656,layer:0},{name:"objects/tree_2",x:123,y:500,layer:1},{name:"objects/tree_1",x:233,y:483,layer:1},{name:"objects/tree_3",x:484,y:505,layer:1},{name:"objects/tree_2",x:593,y:478,layer:1}]},this.LEVEL_29={task:4,time:20,humans:[{x:61,id:0},{x:158,id:0},{x:258,id:2},{x:440,id:3},{x:537,id:1},{x:637,id:1}],roads:[{y:183,h:70,min:1,max:4,speed:-400},{y:243,h:70,min:1,max:5,speed:300},{y:303,h:70,min:1,max:4,speed:-350},{y:573,h:70,min:1,max:5,speed:-450},{y:675,h:70,min:1,max:5,speed:450}],objects:[{name:"objects/background_2",x:350,y:400,layer:0},{name:"objects/road_3",x:350,y:243,layer:0},{name:"objects/road_1",x:350,y:573,layer:0},{name:"objects/road_1",x:350,y:675,layer:0},{name:"objects/flower_2",x:535,y:147,layer:0},{name:"objects/flower_2",x:183,y:709,layer:0},{name:"objects/flower_2",x:557,y:447,layer:0},{name:"objects/stone_2",x:248,y:162,layer:0},{name:"objects/stone_1",x:430,y:93,layer:0},{name:"objects/stone_2",x:180,y:415,layer:0},{name:"objects/shield",x:350,y:614,layer:0},{name:"objects/shield",x:350,y:363,layer:0},{name:"objects/dirt_2",x:467,y:110,layer:0},{name:"objects/shield",x:350,y:110,layer:0},{name:"objects/trash",x:487,y:647,layer:0},{name:"objects/dirt_1",x:548,y:400,layer:0},{name:"objects/dirt_2",x:508,y:458,layer:0},{name:"objects/dirt_1",x:224,y:459,layer:0},{name:"objects/dirt_2",x:127,y:393,layer:0},{name:"objects/tree_2",x:123,y:500,layer:1},{name:"objects/tree_1",x:233,y:483,layer:1},{name:"objects/tree_3",x:484,y:505,layer:1},{name:"objects/tree_2",x:593,y:478,layer:1}]},this.LEVEL_30={task:7,time:20,humans:[{x:603,id:0},{x:520,id:0},{x:438,id:2},{x:355,id:3},{x:269,id:1},{x:181,id:0},{x:96,id:0}],roads:[{y:302,h:70,min:3,max:5,speed:-350,sport_prob:1},{y:359,h:70,min:3,max:5,speed:400,sport_prob:1},{y:415,h:70,min:3,max:5,speed:-300,sport_prob:1},{y:470,h:70,min:3,max:5,speed:-400,sport_prob:1},{y:527,h:70,min:3,max:5,speed:250,sport_prob:1}],objects:[{name:"objects/background_1",x:350,y:400,layer:0},{name:"objects/road_top",x:350,y:282,layer:0},{name:"objects/road_middle",x:350,y:330,layer:0},{name:"objects/road_middle",x:350,y:386,layer:0},{name:"objects/road_middle",x:350,y:442,layer:0},{name:"objects/road_middle",x:350,y:498,layer:0},{name:"objects/road_bottom",x:350,y:546,layer:0},{name:"objects/shield",x:494,y:740,layer:0},{name:"objects/shield",x:214,y:740,layer:0},{name:"objects/trash",x:197,y:344,layer:0},{name:"objects/stone_2",x:475,y:502,layer:0},{name:"objects/flower_1",x:551,y:667,layer:0},{name:"objects/flower_1",x:476,y:631,layer:0},{name:"objects/flower_1",x:199,y:667,layer:0},{name:"objects/flower_1",x:425,y:178,layer:0},{name:"objects/flower_1",x:459,y:126,layer:0},{name:"objects/flower_1",x:217,y:214,layer:0},{name:"objects/tree_2",x:533,y:242,layer:1},{name:"objects/dirt_1",x:317,y:143,layer:1},{name:"objects/tree_1",x:122,y:231,layer:1},{name:"objects/dirt_2",x:350,y:714,layer:1},{name:"objects/tree_3",x:648,y:667,layer:1},{name:"objects/tree_3",x:62,y:667,layer:1}]},this.LEVEL_31={time:40,task:2,humans:[{x:603,id:0},{x:520,id:0},{x:438,id:1},{x:269,id:1},{x:181,id:0},{x:96,id:0}],roads:[{y:132,h:70,min:2.5,max:4,speed:-350},{y:189,h:70,min:3.5,max:7,speed:400},{y:245,h:70,min:1.5,max:6,speed:-300},{y:300,h:70,min:1.5,max:7,speed:-400},{y:357,h:70,min:2.5,max:6,speed:250},{y:472,h:70,min:2.5,max:8,speed:-350},{y:529,h:70,min:3.5,max:5,speed:400},{y:585,h:70,min:1.5,max:6,speed:-300},{y:640,h:70,min:1.5,max:7,speed:-400},{y:697,h:70,min:2.5,max:7,speed:250}],objects:[{name:"objects/background_3",x:350,y:570,layer:0},{name:"objects/road_top",x:350,y:112,layer:0},{name:"objects/road_middle",x:350,y:160,layer:0},{name:"objects/road_middle",x:350,y:216,layer:0},{name:"objects/road_middle",x:350,y:272,layer:0},{name:"objects/road_middle",x:350,y:328,layer:0},{name:"objects/road_bottom",x:350,y:376,layer:0},{name:"objects/road_top",x:350,y:452,layer:0},{name:"objects/road_middle",x:350,y:500,layer:0},{name:"objects/road_middle",x:350,y:556,layer:0},{name:"objects/road_middle",x:350,y:612,layer:0},{name:"objects/road_middle",x:350,y:668,layer:0},{name:"objects/road_bottom",x:350,y:716,layer:0},{name:"objects/trash",x:300,y:400,layer:0},{name:"objects/trash",x:197,y:415,layer:0}]},this.LEVEL_32={task:4,time:20,humans:[{x:603,id:2},{x:520,id:0},{x:181,id:2},{x:96,id:0}],roads:[{y:189,h:70,min:3.5,max:7,speed:400},{y:245,h:70,min:1.5,max:6,speed:-300},{y:300,h:70,min:1.5,max:7,speed:-400},{y:357,h:70,min:2.5,max:6,speed:250},{y:472,h:70,min:2.5,max:8,speed:-350},{y:529,h:70,min:3.5,max:5,speed:400},{y:585,h:70,min:1.5,max:6,speed:-300},{y:640,h:70,min:1.5,max:7,speed:-400}],objects:[{name:"objects/background_3",x:350,y:570,layer:0},{name:"objects/road_top",x:350,y:169,layer:0},{name:"objects/road_middle",x:350,y:216,layer:0},{name:"objects/road_middle",x:350,y:272,layer:0},{name:"objects/road_middle",x:350,y:328,layer:0},{name:"objects/road_bottom",x:350,y:376,layer:0},{name:"objects/road_top",x:350,y:452,layer:0},{name:"objects/road_middle",x:350,y:500,layer:0},{name:"objects/road_middle",x:350,y:556,layer:0},{name:"objects/road_middle",x:350,y:612,layer:0},{name:"objects/road_bottom",x:350,y:659,layer:0},{name:"objects/trash",x:197,y:415,layer:0},{name:"objects/tree_2",x:350,y:425,layer:1},{name:"objects/tree_1",x:400,y:700,layer:1}]},this.allLevels=[this.LEVEL_1,this.LEVEL_18,this.LEVEL_19,this.LEVEL_20,this.LEVEL_2,this.LEVEL_4,this.LEVEL_5,this.LEVEL_6,this.LEVEL_7,this.LEVEL_15,this.LEVEL_31,this.LEVEL_12,this.LEVEL_23,this.LEVEL_25,this.LEVEL_22,this.LEVEL_28,this.LEVEL_24,this.LEVEL_13,this.LEVEL_27,this.LEVEL_9,this.LEVEL_26,this.LEVEL_3,this.LEVEL_8,this.LEVEL_17,this.LEVEL_16,this.LEVEL_29,this.LEVEL_10,this.LEVEL_11,this.LEVEL_30,this.LEVEL_32]}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.save=function(){try{window.localStorage.setItem(this.LEVELS_COMPLETED,this.levelsCompleted.toString(),!0),window.localStorage.setItem(this.TOTAL_SCORE,this.totalScore.toString(),!0),window.localStorage.setItem(this.STARS_PER_LEVEL,JSON.stringify(this.starsPerLevel),!0)}catch(e){}},e.prototype.load=function(){try{this.levelsCompleted=+window.localStorage.getItem(this.LEVELS_COMPLETED)||0,this.totalScore=+window.localStorage.getItem(this.TOTAL_SCORE)||0,this.starsPerLevel=[],this.levelsCompleted>0;for(var e=0;e<this.getTotalLevels();e++)this.starsPerLevel.push(0);window.localStorage.getItem(this.STARS_PER_LEVEL)&&(this.starsPerLevel=JSON.parse(window.localStorage.getItem(this.STARS_PER_LEVEL)))}catch(t){}},e.prototype.onWinLevel=function(e,t,n){this.totalScore+=t,this.starsPerLevel[e]=Math.max(n,this.starsPerLevel[e]),e==this.levelsCompleted&&(this.levelsCompleted=Math.min(this.getTotalLevels(),this.levelsCompleted+1)),this.save();/*updateShare(this.getLevelsCompleted(),this.totalScore);Play68.setRankingLevelScoreDesc(this.getLevelsCompleted(),this.totalScore)*/},e.prototype.getStarsInLevel=function(e){return this.starsPerLevel[e]},e.prototype.getLevelsCompleted=function(){return Constants.DEBUG_MODE?this.getTotalLevels()-1:this.levelsCompleted},e.prototype.getTotalScore=function(){return this.totalScore},e.prototype.getLevelData=function(e){return this.allLevels[e]},e.prototype.getTotalLevels=function(){return this.allLevels.length},e}(),Images=function(){function e(){}return e.ROTATE="rotate",e.FILL_BOTTOM="fill_bottom",e.HYPNOCAT="hypnocat",e.LOGO="logo",e.GUI_PANEL="gui_panel",e.BUTTON_PAUSE="button_pause",e.BUTTON_HOME="button_home",e.BUTTON_MORE_GAMES="button_more_games",e.BUTTON_CREDITS="button_credits",e.BUTTON_PLAY="button_play",e.BUTTON_PLAY_BIG="button_play_big",e.BUTTON_RESTART="button_restart",e.BUTTON_SOUND_ON="button_sound_on",e.BUTTON_SOUND_OFF="button_sound_off",e.PROGRESS_BAR="progress_bar",e.BLUE_BACK="blue_back",e.CHECKERED_PIC="checkered_pic",e.BUTTON_BLUE_LITTLE="button_blue_little",e.BUTTON_BLUE="button_blue",e.BUTTON_GREEN="button_green",e.BUTTON_YELLOW="button_yellow",e.STAR_ON="star_on",e.STAR_OFF="star_off",e.MENU_SHADOW="menu_shadow",e.SELECTOR="selector",e.TITLE="title",e.TITLE_BACK="title_back",e.COMBO_X4="combo_x4",e.MINI_STAR="mini_star",e.DIRECTION_HINT="direction_hint",e.DIRECTION_HINT_RED="direction_hint_red",e.DANGER_SIGN="danger_sign",e.BUTTON_SKIP="button_skip",e.LOCK="lock",e.ROAD_SIGN_1="road_sign_1",e.ROAD_SIGN_2="road_sign_2",e.ROAD_SIGN_1_SHADOW="road_sign_1_shadow",e.ROAD_SIGN_2_SHADOW="road_sign_2_shadow",e.HINT_ARROW="hint_arrow",e}(),Jellier=function(e){function t(t,n,r,i){e.call(this),this.jellyScale=.1,this.maxScale=.2,i&&(this.maxScale=i),this.origScale=t.scaleX,this.speed=n,this.obj=t,this.delay=r}return __extends(t,e),t.prototype.update=function(t){if(this.delay>0)return void (this.delay-=t);e.prototype.update.call(this,t);var n=this.liveTime*this.speed;this.jellyScale=this.maxScale*(3*Math.PI-n)/(3*Math.PI);var r=Math.sin(n)*this.jellyScale;this.obj.scaleX=this.origScale+r,this.obj.scaleY=this.origScale-r,n>=3*Math.PI&&(this.obj.scaleX=this.obj.scaleY=1*this.origScale,this.kill())},t}(DNGameObject),Layouts=function(){function e(){}return e.TYPE_LOCALIZABLE_LABEL="localizable_label",e.TYPE_LOCALIZABLE_TEXT_BOX="localizable_text_box",e.TYPE_TEXT_BOX="text_box",e.TYPE_BITMAP_LABEL="bitmap_label",e.TYPE_SKEW="skew",e.TYPE_STATIC_PICTURE="static_picture",e.TYPE_BUTTON="button",e.TYPE_BUTTON_2="button_2",e.TYPE_LONG_BUTTON="long_button",e.TYPE_PLACEHOLDER="placeholder",e.TYPE_LOGO_PLACEHOLDER="TYPE_LOGO_PLACEHOLDER",e.TYPE_FLAT_BUTTON="flat_button",e.TYPE_JELLY_BUTTON="jelly_button",e.TYPE_TEXT_FIELD="textfield",e.TYPE_PROGRESS_BAR="progress_bar",e.TYPE_LANGUAGE_SELECTOR="language_selector",e.NAME_BUTTON_PLAY="play",e.NAME_BUTTON_CREDITS="credits",e.NAME_SOUND_PLACE="sound",e.NAME_BUTTON_BACK="back",e.NAME_SELECT_LEVEL_PANEL="select_level_panel",e.NAME_BUTTON_CLOSE="close",e.NAME_BUTTON_EXIT="exit",e.NAME_BUTTON_RESTART="restart",e.NAME_PANEL="panel",e.NAME_CAPTION="caption",e.NAME_BUTTON_MORE_GAMES="more_games",e.NAME_PAUSE="pause",e.NAME_SCORE="score",e.NAME_HIGHSCORE="highscore",e.NAME_MOVES="moves",e.NAME_TITLE="title",e}(),LoseState=function(e){function t(t,n){var r=this;e.call(this),this.canSkipByTap=!1,this.addShader(100),this.level=t;var i=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.CHECKERED_PIC);this.addChild(i);var s=new DNBitmapLabel(Fonts.blueFont,n);i.addChild(s),s.y=-17,i.x=350,i.y=100,i.alpha=0,createjs.Tween.get(i).to({alpha:1},300,createjs.Ease.linear),createjs.Tween.get(i).to({y:400},1e3,createjs.Ease.bounceOut).call(function(){return r.canTap()}).wait(3500).call(function(){return r.restart()}),this.tapHint=new DNBitmapLabel(Fonts.whiteFont,"K L O P Q R"),this.addChild(this.tapHint),this.tapHint.x=350,this.tapHint.y=480,this.tapHint.alpha=0,createjs.Tween.get(this.tapHint).wait(800).to({alpha:1},300,createjs.Ease.linear),DNSoundManager.g_instance.play(Sounds.LOSE,.4)}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.restart=function(){DNStateManager.g_instance.pushState(new ShadeInState(new PlayState(this.level)))},t.prototype.update=function(t){e.prototype.update.call(this,t),this.tapHint.scaleX=this.tapHint.scaleY=1+.02*Math.sin(5*this.liveTime)},t.prototype.canTap=function(){this.canSkipByTap=!0},t.prototype.onMouseDown=function(){this.canSkipByTap&&(createjs.Tween.removeAllTweens(),this.restart())},t}(DNGameState),MonsterKillEffect=function(e){function t(){var t=this;e.call(this),this.addChild(DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.COMBO_X4)),this.alpha=0,this.scaleX=this.scaleY=.2,createjs.Tween.get(this).to({alpha:1,scaleX:1,scaleY:1},300,createjs.Ease.backOut).wait(400).to({alpha:0},250,createjs.Ease.linear).call(function(){return t.kill()})}return __extends(t,e),t}(DNGameObject),PauseState=function(e){function t(t){var n=this;e.call(this),this.layout=[{type:Layouts.TYPE_PLACEHOLDER,x:350,y:420,name:"panel",children:[{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.BLUE_BACK,x:0,y:0,scale_y:.4},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.CHECKERED_PIC,x:0,y:-200,children:[{type:Layouts.TYPE_BITMAP_LABEL,x:0,y:-20,text:"E  T",font:Fonts.blueFont,scale:1.5}]},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_PLAY,x:150,y:60,name:"play"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_SOUND_ON,x:-150,y:-65,name:"sound_on"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_SOUND_OFF,x:-150,y:-65,name:"sound_off"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_RESTART,x:0,y:60,name:"restart"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_HOME,x:-150,y:60,name:"exit"},{type:Layouts.TYPE_BITMAP_LABEL,x:80,y:-100,name:"level",font:Fonts.whiteFont,scale:1.2}]}],this.level=t,this.addShader(200),this.loadLayout(this.layout,this),this.findGUIObject("level").setText("A B  "+(t+1)),this.setHandler("exit",function(){return n.onExitTouch()}),this.setHandler("play",function(){return n.onPlayTouch()}),this.setHandler("restart",function(){return n.onRestartTouch()});var r=this.findGUIObject("panel");r.alpha=0,r.scaleY=.3,this.blockHandlers(),createjs.Tween.get(r).to({alpha:1,scaleY:1},400,createjs.Ease.circOut).call(function(){return n.unblockHandlers()}),this.setHandler("sound_on",function(){return n.changeSound()}),this.setHandler("sound_off",function(){return n.changeSound()}),this.setSoundButtons()}return __extends(t,e),t.prototype.changeSound=function(){DNSoundManager.g_instance.setSoundEnabled(!DNSoundManager.g_instance.isSoundEnabled()),this.setSoundButtons()},t.prototype.setSoundButtons=function(){var e=this.findGUIObject("sound_on"),t=this.findGUIObject("sound_off");e.visible=DNSoundManager.g_instance.isSoundEnabled(),t.visible=!DNSoundManager.g_instance.isSoundEnabled()},t.prototype.onRestartTouch=function(){DNStateManager.g_instance.pushState(new ShadeInState(new PlayState(this.level)))},t.prototype.onPlayTouch=function(){var e=this.findGUIObject("panel");createjs.Tween.removeTweens(e),createjs.Tween.get(e).to({alpha:0,scaleY:.3},350,createjs.Ease.circOut),this.hideShader()},t.prototype.onExitTouch=function(){DNStateManager.g_instance.pushState(new ShadeInState(new SelectLevelState))},t}(DNGameState),PlayState=function(e){function t(n){var r=this;e.call(this),this.layout=[{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.GUI_PANEL,x:350,y:40,children:[{type:Layouts.TYPE_PROGRESS_BAR,picture:Images.PROGRESS_BAR,x:2,y:-25,name:"time_left_bar"},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.MINI_STAR,x:70,y:-2,name:"mini_star"},{type:Layouts.TYPE_BITMAP_LABEL,x:115,y:-23,scale:.9,name:"time_left",font:Fonts.whiteFont},{type:Layouts.TYPE_BITMAP_LABEL,x:-110,y:-23,scale:.9,name:"humans",font:Fonts.whiteFont},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_RESTART,x:280,y:0,scale:.72,name:"restart"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_SKIP,x:280,y:0,name:"skip"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_PAUSE,x:-280,y:0,scale:.72,name:"pause"}]}],this.humansSaved=0,this.roads=[],this.humans=[],this.backLayer=new createjs.Container,this.bloodLayer=new createjs.Container,this.carsLayer=new createjs.Container,this.humansLayer=new createjs.Container,this.frontLayer=new createjs.Container,this.humansToSaveLabel=new DNBitmapLabel(Fonts.whiteFont,"",0),this.timeLeft=25,this.wasFirstTap=!1,this.totalTime=25,this.fateDefined=!1,this.OUT_OF_TIME="FGHI",this.TOO_MANY_DEATHS="PQRS KLMNI",this.wayLen=0,this.waitWin=!1,this.waitLose=!1,this.waitWinTime=1,this.waitLoseTime=.9,this.level=n,t.g_instance=this,this.addChild(this.backLayer),this.addChild(this.bloodLayer),this.addChild(this.carsLayer),this.addChild(this.humansLayer),this.addChild(this.frontLayer),this.loadMap(GameData.getInstance().getLevelData(this.level)),this.calcRoads(),this.backLayer.cache(0,(Constants.ASSETS_HEIGHT-Constants.SCREEN_HEIGHT)/2,Constants.ASSETS_WIDTH,Constants.SCREEN_HEIGHT),this.loadLayout(this.layout,this),this.setHandler("restart",function(){return r.onRestartTouch()}),this.setHandler("pause",function(){return r.onPauseTouch()}),this.setHandler("skip",function(){return r.onSkipTouch()}),this.buttonRestart=this.findGUIObject("restart"),this.timeLeftLabel=this.findGUIObject("time_left"),this.timeLeftLabel.setText(Utils.IntToTimeString(this.timeLeft)),this.humansToSaveLabel=this.findGUIObject("humans"),this.humansToSaveLabel.setText("0/"+this.taskTotal),this.findGUIObject("skip").visible=!1,this.timeLeftBar=this.findGUIObject("time_left_bar"),this.update(0)}return __extends(t,e),t.prototype.defineFate=function(){if(!this.waitWin&&!this.waitLose&&!this.fateDefined){this.fateDefined=!0,createjs.Tween.get(this.timeLeftLabel).to({alpha:0},400,createjs.Ease.linear),this.buttonRestart.setEnabled(!1),createjs.Tween.get(this.buttonRestart).to({alpha:0,scaleX:.5,scaleY:.5},300,createjs.Ease.linear);var e=this.findGUIObject("skip");e.visible=!0,e.alpha=0,e.scaleX=e.scaleY=.5,createjs.Tween.get(e).wait(300).to({alpha:1,scaleX:1,scaleY:1},300,createjs.Ease.backOut)}},t.prototype.onSkipTouch=function(){this.fateDefined&&(this.waitWinTime=0,this.win())},t.prototype.init=function(){e.prototype.init.call(this),0==this.level&&DNStateManager.g_instance.pushState(new TutorialState)},t.prototype.calcRoads=function(){this.roads.sort(function(e,t){return t.y-e.y});for(var e=0;e<this.roads.length-1;e++)this.roads[e].y-this.roads[e+1].y<this.roads[e].getHeight()/2+this.roads[e+1].getHeight()/2&&this.roads[e+1].setStopsHuman(!1);this.roads[0].setStopsHuman(!1);for(var t=this.roads[0].y+this.roads[0].getHeight()/2,e=0;e<this.humans.length;e++)this.humans[e].y=t+this.humans[e].getHeight()/2},t.prototype.onRestartTouch=function(){DNStateManager.g_instance.pushState(new ShadeInState(new t(this.level)))},t.prototype.onPauseTouch=function(){DNStateManager.g_instance.pushState(new PauseState(this.level))},t.prototype.onMouseDown=function(t,n){e.prototype.onMouseDown.call(this,t,n),this.lastX=t,this.lastY=n,this.wayLen=0,n-=this.y;for(var r=null,i=1e5,s=0;s<this.humans.length;s++){var o=Utils.SqrDistance(this.humans[s].x,this.humans[s].y,t,n);4225>o&&i>o&&this.canContinueMoving(this.humans[s])&&this.humans[s].canTap()&&(i=o,r=this.humans[s])}r&&(r.onTap(),this.wasFirstTap=!0)},t.prototype.onMouseMove=function(t,n){e.prototype.onMouseMove.call(this,t,n),this.wayLen<30&&(this.wayLen+=Math.sqrt(Utils.SqrDistance(t,n,this.lastX,this.lastY))),this.lastX=t,this.lastY=n,this.wayLen>=30&&this.onMouseDown(t,n)},t.prototype.createHuman=function(e,t){var n=new Human(t);this.addGameObjectAtPos(n,this.humansLayer,e,700),this.humans.push(n)},t.prototype.createRoad=function(e,t,n,r,i,s){var o=0;s?o=s:(this.level>3&&(o=.07),0==this.level&&(o=0),this.level>15&&(o=.1),this.level>22&&(o=.13));var u=new Road(e,t,n,r,i,o);this.roads.push(u),this.addGameObjectAtPos(u,this.carsLayer,0,e)},t.prototype.update=function(t){e.prototype.update.call(this,t),!this.fateDefined&&this.wasFirstTap&&(this.timeLeft-=t,this.timeLeft<=0&&(this.timeLeft=0,this.lose(this.OUT_OF_TIME)),this.timeLeftLabel.setText(Utils.IntToTimeString(Math.floor(this.timeLeft))),this.timeLeftBar.setProgress(this.timeLeft/this.totalTime));for(var n=0;n<this.humans.length;n++){var r=this.humans[n];if(r.isMoving()){r.updatePosition(t);for(var i=0;i<this.roads.length;i++)if(this.roads[i].checkCarIntersect(r)){r.stepBack();break}}}for(var n=0;n<this.humans.length;n++)for(var r=this.humans[n],i=0;i<this.roads.length;i++){var s=this.roads[i];s.checkKillHuman(r),Math.abs(r.y-s.y)<s.getHeight()/2+r.getHeight()/2&&r.onIntersectRoad(s)}if(this.waitWin&&(this.waitWinTime-=t,this.waitWinTime<=0)){var o=1;return this.timeLeft>=.3*this.totalTime&&o++,this.humansSaved==this.humansTotal&&o++,void DNStateManager.g_instance.pushState(new WinState(this.level,this.calcScore(),o))}return this.waitLose&&(this.waitLoseTime-=t,this.waitLoseTime<=0)?void DNStateManager.g_instance.pushState(new LoseState(this.level,this.loseReason)):void 0},t.prototype.killHuman=function(e,t){e.kill();var n=DNAssetsManager.g_instance.getCenteredImageWithProxy("blood_drops_"+Utils.RandomRangeInt(0,3));this.bloodLayer.addChild(n),n.x=e.x+Utils.RandomRange(-10,10),n.y=e.y+Utils.RandomRange(-10,10),n.alpha=0,n.rotation=Utils.RandomRange(0,360),createjs.Tween.get(n).to({alpha:1},300,createjs.Ease.linear);var r=DNAssetsManager.g_instance.getCenteredImageWithProxy("blood_"+Utils.RandomRangeInt(0,3));this.bloodLayer.addChild(r),r.x=e.x+Utils.RandomRange(-10,10),r.y=e.y+Utils.RandomRange(-10,10),r.scaleX=r.scaleY=.2,r.alpha=0,r.rotation=Utils.RandomRange(0,360),createjs.Tween.get(r).wait(300).to({alpha:1,scaleX:1,scaleY:1},1800,createjs.Ease.circOut);var i=DNAssetsManager.g_instance.getCenteredImageWithProxy("human_"+e.getID()+"_die");i.scaleX=i.scaleY=.9*.8,this.bloodLayer.addChild(i),i.x=e.x,i.y=e.y,i.rotation=Utils.RandomRange(0,360),Utils.RemoveElement(this.humans,e),this.addGameObjectAtPos(new DNMovieClip("splash",.05,!1),this,e.x,e.y),DNSoundManager.g_instance.playAny(Sounds.CRUNCH_1,Sounds.CRUNCH_2,Sounds.CRUNCH_3),this.task>this.humans.length&&this.lose(this.TOO_MANY_DEATHS),t.getFrags()>=3&&(t.resetFrags(),this.addGameObjectAtPos(new MonsterKillEffect,this,e.x,e.y-70)),0==this.humans.length&&this.fateDefined&&this.win()},t.prototype.loadMap=function(e){for(var t=e.humans,n=0;n<t.length;n++)this.createHuman(t[n].x,t[n].id);for(var r=e.roads,n=0;n<r.length;n++)this.createRoad(r[n].y,r[n].h,r[n].min,r[n].max,r[n].speed,r[n].sport_prob);for(var i=e.objects,n=0;n<i.length;n++){var s=DNAssetsManager.g_instance.getCenteredImageWithProxy(i[n].name);0==i[n].layer?this.backLayer.addChild(s):this.frontLayer.addChild(s),s.x=i[n].x,s.y=i[n].y}this.task=e.task,this.taskTotal=this.task,this.humansTotal=this.humans.length,this.timeLeft=e.time||30,this.totalTime=e.time||30},t.prototype.canContinueMoving=function(e){for(var t=0;t<this.roads.length;t++)if(!this.roads[t].canContinueMoving(e))return!1;return!0},t.prototype.onKeyDown=function(e){Constants.DEBUG_MODE&&(console.log(e),90==e&&(Constants.DRAW_BOUNDS=!Constants.DRAW_BOUNDS,this.onRestartTouch()),87==e&&this.win(),39==e&&this.level+1<GameData.getInstance().getTotalLevels()&&DNStateManager.g_instance.changeState(new t(this.level+1)),37==e&&this.level>0&&DNStateManager.g_instance.changeState(new t(this.level-1)))},t.prototype.onSaveHuman=function(e){this.waitLose||this.waitWin||(this.task--,this.humansSaved++,this.humansToSaveLabel.setText(this.humansSaved+"/"+this.taskTotal),Utils.RemoveElement(this.humans,e),this.task<=0&&(this.defineFate(),0==this.humans.length&&this.win()))},t.prototype.win=function(){this.waitWin||this.waitLose||(this.waitWin=!0)},t.prototype.lose=function(e){this.waitWin||this.waitLose||(this.loseReason=e,this.waitLose=!0)},t.prototype.calcScore=function(){return 100*this.humansSaved},t.prototype.alignByCenter=function(){this.y=(Constants.SCREEN_HEIGHT-Constants.ASSETS_HEIGHT)/2},t}(DNGameState),PortraitLockState=function(e){function t(){e.call(this),this.scaleX=this.scaleY=1/Constants.SCREEN_SCALE;var t=window.innerWidth*Constants.PIXEL_RATIO,n=window.innerHeight*Constants.PIXEL_RATIO,r=new createjs.Shape;r.graphics.beginFill("#4aa4c2"),r.graphics.drawRect(0,0,t,n),r.graphics.endFill(),this.addChild(r);var i=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.ROTATE),s=new createjs.Container;this.addChild(s),s.addChild(i),s.x=t/2,s.y=n/2}return __extends(t,e),t.prototype.onOrientationChanged=function(e){e||DNStateManager.g_instance.popState()},t}(DNGameState),PreloaderState=function(e){function t(t,n,r,i){var s=this;e.call(this),this.loadingBar=new DNLoadingBar("#4d9dbe","#444444","#ffffff"),this.logo=new DNLogoPlaceholder(400,130),new DNAssetsManager(t,n,r,i,function(e){return s.handleProgress(e)}),this.addChild(this.loadingBar),this.loadingBar.x=Constants.ASSETS_WIDTH/2,this.loadingBar.y=Constants.ASSETS_HEIGHT/2,this.addChild(this.logo),this.logo.x=Constants.ASSETS_WIDTH/2,this.logo.y=Constants.ASSETS_HEIGHT/2+200}return __extends(t,e),t.prototype.handleProgress=function(e){this.loadingBar.setProgress(e.loaded)},t.prototype.onOrientationChanged=function(){},t}(DNGameState),Road=function(e){function t(t,n,r,i,s,o){if(e.call(this),this.cars=[],this.isStopsHuman=!0,this.dangerTime=-100,this.y=t,this.superProb=o,this.freaqMin=r,this.freaqMax=i,this.calcFrequency(),this.height=n,this.speed=s,this.spawnCar(),this.cars[0].x=Utils.RandomRange(100,600),Math.random()<.8&&this.spawnCar(),Constants.DRAW_BOUNDS){var u=Utils.DrawRect(Constants.ASSETS_WIDTH,n,"#FF0000",this);this.addChild(u),u.y=-n/2,u.alpha=.3}this.directionHint=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.DIRECTION_HINT),this.speed<0?(this.directionHint.x=670,this.directionHint.scaleX=-1):this.directionHint.x=30,this.redDirectionHint=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.DIRECTION_HINT_RED),this.speed<0?(this.redDirectionHint.x=670,this.redDirectionHint.scaleX=-1):this.redDirectionHint.x=30,this.dangerSign=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.DANGER_SIGN),this.speed<0?(this.dangerSign.x=670,this.dangerSign.scaleX=-1):this.dangerSign.x=30,this.redDirectionHint.scaleX*=.8,this.redDirectionHint.scaleY*=.8,this.directionHint.scaleX*=.8,this.directionHint.scaleY*=.8,this.directionHint.y=this.redDirectionHint.y=this.dangerSign.y=this.y,PlayState.g_instance.addChild(this.dangerSign,this.redDirectionHint,this.directionHint)}return __extends(t,e),t.prototype.setStopsHuman=function(e){this.isStopsHuman=e},t.prototype.stopsHuman=function(){return this.isStopsHuman},t.prototype.checkCarIntersect=function(e){for(var t=0;t<this.cars.length;t++){var n=this.cars[t],r=this.y+n.y;if(Math.abs(n.x-e.x)<n.getWidth()/2+e.getWidth()/2&&Math.abs(r-e.y)<n.getHeight()/2+e.getHeight()/2)return!0}return!1},t.prototype.checkKillHuman=function(e){if(e.safePosition())return!1;for(var t=0;t<this.cars.length;t++){var n=this.cars[t];if(Math.abs(n.x-e.x)<n.getWidth()/2+e.getWidth()/2&&Math.abs(n.y+this.y-e.y)<n.getHeight()/2+e.getHeight()/2)return n.addBlood(),PlayState.g_instance.killHuman(e,n),!0}return!1},t.prototype.canContinueMoving=function(e){for(var t=0;t<this.cars.length;t++){var n=this.cars[t];if(Math.abs(n.x-e.x)<n.getWidth()/2+e.getWidth()/2&&Math.abs(n.y+this.y-e.y)<n.getHeight()/2+e.getHeight()+10&&e.y>n.y+this.y)return!1}return!0},t.prototype.getHeight=function(){return this.height},t.prototype.spawnCar=function(){var e=new Car(Utils.AnyOf(1,2,3,4,6),this.speed);e.x=this.speed>0?-100:Constants.ASSETS_WIDTH+100,this.canSpawnCar(e)&&(this.cars.push(e),this.addChild(e))},t.prototype.spawnSuperCar=function(){this.dangerTime=.9;var e=new Car(5,this.speed/Math.abs(this.speed)*1300);e.x=this.speed>0?-100:Constants.ASSETS_WIDTH+100,this.canSpawnCar(e)&&(this.cars.push(e),this.addChild(e))},t.prototype.canSpawnCar=function(e){for(var t=e.x-.6*e.getWidth(),n=e.x+.6*e.getWidth(),r=0;r<this.cars.length;r++){var i=this.cars[r].x-.6*this.cars[r].getWidth(),s=this.cars[r].x+.6*this.cars[r].getWidth();if(!(t>s||i>n))return!1}return!0},t.prototype.update=function(t){e.prototype.update.call(this,t);for(var n=0;n<this.cars.length;n++)this.cars[n].update(t),this.cars[n].getLiveTime()>.5&&(this.cars[n].x>1e3||this.cars[n].x<-200)&&(this.cars[n].onDead(),Utils.RemoveElement(this.cars,this.cars[n]));this.liveTime>this.frequency&&(this.liveTime=0,Math.random()<this.superProb&&0==this.cars.length?this.spawnSuperCar():this.spawnCar(),this.calcFrequency())},t.prototype.forceUpdate=function(t){e.prototype.forceUpdate.call(this,t),this.dangerTime-=t,this.dangerTime>0?(this.dangerSign.visible=!0,this.directionHint.visible=!1,this.redDirectionHint.visible=!1,this.dangerSign.scaleX=this.dangerSign.scaleY=1+.1*Math.sin(15*this.forceLiveTime)):(this.directionHint.x=this.speed<0?675+2*Math.sin(7*this.liveTime):25+2*Math.sin(7*this.liveTime),this.redDirectionHint.x=this.directionHint.x,this.dangerSign.visible=!1,this.redDirectionHint.visible=this.frequency-this.liveTime<.65,this.directionHint.visible=!this.redDirectionHint.visible)},t.prototype.calcFrequency=function(){this.frequency=Utils.RandomRange(this.freaqMin,this.freaqMax)},t}(DNGameObject),SelectLevelButton=function(e){function t(t,n,r){e.call(this,r?Images.BUTTON_YELLOW:n?Images.BUTTON_BLUE:Images.BUTTON_GREEN,function(){return DNStateManager.g_instance.pushState(new ShadeInState(new PlayState(t)))}),this.locked=!1,this.locked=n,this.levelNum=t,this.text=new DNBitmapLabel(Fonts.whiteFont,"A B  "+(t+1).toString()),this.getPicture().addChild(this.text),this.text.y=-20,this.text.x=-50;var i=GameData.getInstance().getStarsInLevel(t);if(i&&0!=i)for(var s=0;3>s;s++){var o=DNAssetsManager.g_instance.getCenteredImageWithProxy(i>s?Images.STAR_ON:Images.STAR_OFF);o.x=90+65*s,o.scaleX=o.scaleY=.75,this.getPicture().addChild(o)}if(n){var u=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.LOCK);this.getPicture().addChild(u),u.x=155}r&&(this.selector=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.SELECTOR),this.getPicture().addChild(this.selector)),this.update(0)}return __extends(t,e),t.prototype.forceUpdate=function(t){e.prototype.forceUpdate.call(this,t),this.selector&&(this.selector.x=-180+5*Math.sin(7*this.forceLiveTime));var n=this.y+this.parent.y;this.visible=n>0&&800>n},t.prototype.onMouseDown=function(t,n){this.locked||(e.prototype.onMouseDown.call(this,t,n),this.touchY=n)},t.prototype.onMouseUp=function(t,n){return Math.abs(n-this.touchY)>30?void this.deselect():void e.prototype.onMouseUp.call(this,t,n)},t}(DNJellyButton),SelectLevelState=function(e){function t(){var t=this;e.call(this),this.layout=[{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.BLUE_BACK,x:350,y:400},{type:Layouts.TYPE_PLACEHOLDER,x:0,y:0,name:"buttons_layer"},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.MENU_SHADOW,x:350,y:109,name:"top_shadow"},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.CHECKERED_PIC,x:350,y:90,children:[{type:Layouts.TYPE_BITMAP_LABEL,x:0,y:-20,text:"ABCD",font:Fonts.blueFont,scale:1.5}]},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.MENU_SHADOW,x:350,y:691},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_HOME,x:70,y:730,name:"exit"}],this.touchPointY=0,this.ySpeed=0,this.yAcc=1e3,this.calcSpeedCache=0,this.slidePositions=new Array,this.mapH=3e3,this.loadLayout(this.layout,this),this.layer=this.findGUIObject("buttons_layer"),this.findGUIObject("top_shadow").scaleY=-1,this.setHandler("exit",function(){return t.onExitTouch()});for(var n=GameData.getInstance().getLevelsCompleted(),r=0;r<GameData.getInstance().getTotalLevels();r++){var i=new SelectLevelButton(r,r>n,r==n);this.addGuiObject(i),this.layer.addChild(i),i.x=350,i.y=260+100*r,r==n&&(this.layer.y=+Constants.ASSETS_HEIGHT/2-i.y),r==GameData.getInstance().getTotalLevels()-1&&(this.mapH=i.y+.35*Constants.ASSETS_HEIGHT)}this.checkConstrains()}return __extends(t,e),t.prototype.onExitTouch=function(){DNStateManager.g_instance.pushState(new ShadeInState(new MainState))},t.prototype.onMouseDown=function(t,n){e.prototype.onMouseDown.call(this,t,n),this.touchPointY=this.layer.y-n,this.slidePositions.length=0,this.slidePositions.push({liveTime:this.liveTime,y:n})},t.prototype.update=function(t){e.prototype.update.call(this,t),DNStateManager.g_instance.isMouseDownNow()||0!=this.ySpeed&&(this.layer.y+=this.ySpeed*t,this.ySpeed>0?(this.ySpeed-=t*this.yAcc,this.ySpeed<0&&(this.ySpeed=0)):(this.ySpeed+=t*this.yAcc,this.ySpeed>0&&(this.ySpeed=0))),this.checkConstrains()},t.prototype.onMouseMove=function(t,n){e.prototype.onMouseMove.call(this,t,n),this.layer.y=n+this.touchPointY,this.checkConstrains(),this.slidePositions.push({liveTime:this.liveTime,y:n}),this.slidePositions.length>100&&(this.calcSpeedCache=this.calcYSpeed(),this.slidePositions.length=0)},t.prototype.checkConstrains=function(){this.layer.y>0&&(this.layer.y=0,this.ySpeed=0),Constants.g_isPC?this.layer.y<Constants.ASSETS_HEIGHT-this.mapH&&(this.layer.y=Constants.ASSETS_HEIGHT-this.mapH,this.ySpeed=0):this.layer.y<Constants.ASSETS_HEIGHT-this.mapH&&(this.layer.y=Constants.ASSETS_HEIGHT-this.mapH,this.ySpeed=0)},t.prototype.onMouseUp=function(t,n){e.prototype.onMouseUp.call(this,t,n),this.slidePositions.push({liveTime:this.liveTime,x:t,y:n}),this.ySpeed=this.calcYSpeed()},t.prototype.calcYSpeed=function(){if(this.slidePositions.length<2)return this.calcSpeedCache;var e,t=.2;for(e=this.slidePositions.length-2;e>0&&!(this.liveTime-this.slidePositions[e].liveTime>=t);--e);var n=this.liveTime-this.slidePositions[e].liveTime;return 1e-5>n?0:(this.slidePositions[this.slidePositions.length-1].y-this.slidePositions[e].y)/n},t}(DNGameState),ShadeInState=function(e){function t(t){var n=this;e.call(this),this.nextState=null,this.nextState=t,this.shader=new createjs.Shape,this.shader.graphics.beginFill("#ffffff"),this.shader.graphics.drawRect(0,0,Constants.ASSETS_WIDTH,Constants.SCREEN_HEIGHT),this.shader.graphics.endFill(),this.addChild(this.shader),this.shader.alpha=0,createjs.Tween.get(this.shader).to({alpha:1},400,createjs.Ease.linear).call(function(){return n.onFinishShade()})}return __extends(t,e),t.prototype.onFinishShade=function(){DNStateManager.g_instance.changeState(this.nextState),DNStateManager.g_instance.pushState(new ShadeOutState)},t.prototype.setNextState=function(e){this.nextState=e},t.prototype.alignByCenter=function(){},t}(DNGameState),ShadeOutState=function(e){function t(){var t=this;e.call(this),this.shader=new createjs.Shape,this.shader.graphics.beginFill("#ffffff"),this.shader.graphics.drawRect(0,0,Constants.ASSETS_WIDTH,Constants.SCREEN_HEIGHT),this.shader.graphics.endFill(),this.addChild(this.shader),createjs.Tween.get(this.shader).to({alpha:0},400,createjs.Ease.linear).call(function(){return t.onFinishShade()})}return __extends(t,e),t.prototype.onFinishShade=function(){DNStateManager.g_instance.popState()},t.prototype.alignByCenter=function(){},t}(DNGameState),Shaker=function(e){function t(t){e.call(this),this.counter=0,this.deltaTime=.07,this.distance=8,this.layerForShake=t,this.startX=t.x,this.startY=t.y}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t),this.liveTime>=this.deltaTime&&(this.layerForShake.x=this.startX+Utils.RandomRangeInt(-this.distance,this.distance),this.layerForShake.y=this.startY+Utils.RandomRangeInt(-this.distance,this.distance),this.liveTime=0,5==++this.counter&&this.kill())},t.prototype.onDead=function(){e.prototype.onDead.call(this),this.layerForShake.x=0,this.layerForShake.y=0},t}(DNGameObject),Skewer=function(e){function t(t){e.call(this),this.proxy=new createjs.Container,this.addChild(this.proxy);var n=DNAssetsManager.g_instance.getImage(t);n.x=-n.getBounds().width/2,n.y=-n.getBounds().height,this.proxy.addChild(n),this.proxy.y=.5*n.getBounds().height}return __extends(t,e),t.prototype.forceUpdate=function(t){e.prototype.forceUpdate.call(this,t),this.proxy.skewX=6*Math.sin(4*this.forceLiveTime),this.proxy.scaleY=1+.05*Math.sin(8*this.forceLiveTime)},t}(DNGUIObject),Skewer2=function(e){function t(t){e.call(this),this.devider=Utils.RandomRange(.9,1.1),this.clip=t}return __extends(t,e),t.prototype.forceUpdate=function(t){e.prototype.forceUpdate.call(this,t),this.clip.skewX=8*Math.sin(4*this.forceLiveTime*this.devider),this.clip.scaleY=1+.08*Math.sin(8*this.forceLiveTime*this.devider)},t}(DNGUIObject),DNSoundManager=function(){function e(){this.soundEnabled=!0,this.initiliazed=!1,this.focus=!0,this.hidden=!1,this.wasSoundEnabled=!0,this.wasPauseCall=!1,this.soundsOnFrame=[],this.wasMusicPlay=!1}return e.prototype.onLostFocus=function(){this.focus=!1},e.prototype.onFocus=function(){this.focus=!0},e.prototype.init=function(){try{if(!this.initiliazed){if(!createjs.Sound.initializeDefaultPlugins())return;this.initiliazed=!0}}catch(e){}},e.prototype.isSoundEnabled=function(){return this.soundEnabled},e.prototype.setSoundEnabled=function(e){this.soundEnabled=e;var t=!e||!this.focus||this.hidden;try{if(createjs.Sound.getMute()==t)return;createjs.Sound.setMute(t)}catch(n){}},e.prototype.playAny=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];this.play(e[Utils.RandomRangeInt(0,e.length-1)])},e.prototype.play=function(e,t){try{if(t||(t=1),this.initiliazed&&this.soundEnabled)return createjs.Sound.play(e,createjs.Sound.INTERRUPT_NONE,0,0,0,t)}catch(n){}return null},e.prototype.playMusic=function(e){try{if(e||(e=1),this.initiliazed&&this.soundEnabled&&!this.wasMusicPlay){this.wasMusicPlay=!0;var t=createjs.Sound.play(Sounds.MUSIC,createjs.Sound.INTERRUPT_NONE,0,0,-1,e);if("playFailed"==t.playState)return this.wasMusicPlay=!1,null}}catch(n){}return null},e.prototype.update=function(){this.soundsOnFrame.length=0,this.initiliazed&&(this.hidden=document.hidden||document.webkitHidden||document.msHidden?!0:!1,this.setSoundEnabled(this.soundEnabled))},e.prototype.playSinglePerFrame=function(e,t){-1==this.soundsOnFrame.indexOf(e)&&(this.soundsOnFrame.push(e),this.play(e,t))},e.prototype.onPause=function(){this.wasPauseCall=!0,console.log("on pause"),this.wasSoundEnabled=this.isSoundEnabled(),this.isSoundEnabled()&&this.setSoundEnabled(!1)},e.prototype.onResume=function(){this.wasPauseCall&&(console.log("on resume"),this.wasSoundEnabled&&this.setSoundEnabled(!0),this.wasPauseCall=!1)},e.g_instance=new e,e}(),Sounds=function(){function e(){}return e.MUSIC="music",e.CLICK="click",e.CRUNCH_1="crunch_1",e.CRUNCH_2="crunch_2",e.CRUNCH_3="crunch_3",e.TOUCH_PEOPLE_1="touch_people_1",e.TOUCH_PEOPLE_2="touch_people_2",e.TOUCH_WOMAN_1="touch_woman_1",e.TOUCH_WOMAN_2="touch_woman_2",e.HUMAN_SAVE="human_save",e.CALC_SCORE="calc_score",e.ROUND_ENDED="round_ended",e.SAVE="save",e.LOSE="lose",e.SPORT_CAR="sport_car",e.ALL=[e.SPORT_CAR,e.SAVE,e.ROUND_ENDED,e.MUSIC,e.CLICK,e.CRUNCH_1,e.CRUNCH_2,e.CRUNCH_3,e.TOUCH_PEOPLE_1,e.TOUCH_PEOPLE_2,e.TOUCH_WOMAN_1,e.TOUCH_WOMAN_2,e.CALC_SCORE,e.LOSE],e}(),StatusPointsControl=function(e){function t(t,n){e.call(this),this.smallPoints=new Array,this.offset=50;for(var r=(this.offset*(t-1),0);t>r;r++);this.addChild(this.bigPoint),this.forcedSetActiveElement(n)}return __extends(t,e),t.prototype.setActiveElement=function(e){if(this.curElement!=e&&e>=0&&e<this.smallPoints.length){this.bigPoint.scaleX=this.bigPoint.scaleY=.5;for(var t=0;t<this.smallPoints.length;t++)this.smallPoints[t].visible=!0;this.curElement=e,this.curElement<0&&(this.curElement=0),this.curElement>this.smallPoints.length-1&&(this.curElement=this.smallPoints.length-1),this.smallPoints[this.curElement].visible=!1,this.bigPoint.x=this.smallPoints[this.curElement].x,this.bigPoint.y=this.smallPoints[this.curElement].y,this.bigPoint.scaleX=this.bigPoint.scaleY=.5,createjs.Tween.get(this.bigPoint).to({scaleX:1,scaleY:1},300,createjs.Ease.backOut)}},t.prototype.forcedSetActiveElement=function(e){this.setActiveElement(e),this.bigPoint.scaleX=this.bigPoint.scaleY=1},t.prototype.getActiveElement=function(){return this.curElement},t}(createjs.Container),Strings=function(){function e(){}return e.UGLY="UGLY",e.CLOWN="CLOWN",e.PHILIPP="PHILIPP",e.BLACK="BLACK",e.JOFFREY="JOFFREY",e.FIN="FIN",e.TERENCE="TERENCE",e.WORKER="WORKER",e.MASOCHIST="MASOCHIST",e.POLITICAN="POLITICAN",e.HIPSTER="HIPSTER",e.HOBO="HOBO",e.GIRL="GIRL",e.PANDA="PANDA",e.ATTACK="ATTACK",e.HALFLIFE="HALFLIFE",e.MARIO="MARIO",e.UGLY_DESC="UGLY_DESC",e.CLOWN_DESC="CLOWN_DESC",e.PHILIPP_DESC="PHILIPP_DESC",e.BLACK_DESC="BLACK_DESC",e.JOFFREY_DESC="JOFFREY_DESC",e.FIN_DESC="FIN_DESC",e.TERENCE_DESC="TERENCE_DESC",e.WORKER_DESC="WORKER_DESC",e.MASOCHIST_DESC="MASOCHIST_DESC",e.POLITICAN_DESC="POLITICAN_DESC",e.HIPSTER_DESC="HIPSTER_DESC",e.HOBO_DESC="HOBO_DESC",e.GIRL_DESC="GIRL_DESC",e.PANDA_DESC="PANDA_DESC",e.ATTACK_DESC="ATTACK_DESC",e.HALFLIFE_DESC="HALFLIFE_DESC",e.MARIO_DESC="MARIO_DESC",e.LOW_QUALITY="LOW_QUALITY",e.HIGH_QUALITY="HIGH_QUALITY",e.ARE_YOU_SURE_WANT_TO_RESET="ARE_YOU_SURE_WANT_TO_RESET",e.ARE_YOU_SURE_WANT_TO_BUY_RAGDOLL="ARE_YOU_SURE_WANT_TO_BUY_RAGDOLL",e.YES="YES",e.NO="NO",e.RESET_PROGRESS="RESET_PROGRESS",e.BLOOD_ON="BLOOD_ON",e.BLOOD_OFF="BLOOD_OFF",e.SETTINGS="SETTINGS",e.QUEST_STATUS_HEADER="QUEST_STATUS_HEADER",e.BEST_SCORE="BEST_SCORE",e.SCORE="SCORE",e.CURRENT_MISSION="CURRENT_MISSION",e.QUEST_PROGRESS="QUEST_PROGRESS",e.QUEST_COMPLETED="QUEST_COMPLETED",e.NEXT_QUEST="NEXT_QUEST",e.COMPLETED="COMPLETED",e.FAILED="FAILED",e.PAUSE="PAUSE",e.QUEST_REWARD="QUEST_REWARD",e.SELECT="SELECT",e.SELECTED="SELECTED",e.UNLOCK="UNLOCK",e.TOUCH_TO_JUMP="TOUCH_TO_JUMP",e.BOOSTERS_HEADER="BOOSTERS_HEADER",e.CHARACTERS_HEADER="CHARACTERS_HEADER",e.SHIELD_BOOSTER="SHIELD_BOOSTER",e.ACCELERATE_BOOSTER="ACCELERATE_BOOSTER",e.RESURRECT_BOOSTER="RESURRECT_BOOSTER",e.SHIELD_BOOSTER_DESC="SHIELD_BOOSTER_DESC",e.ACCELERATE_BOOSTER_DESC="ACCELERATE_BOOSTER_DESC",e.RESURRECT_BOOSTER_DESC="RESURRECT_BOOSTER_DESC",e.QUEST_SCORE="QUEST_SCORE",e.QUEST_SCORE_ALL_TIME="QUEST_SCORE_ALL_TIME",e.QUEST_COINS="QUEST_COINS",e.QUEST_COINS_ALL_TIME="QUEST_COINS_ALL_TIME",e.QUEST_FEW_ROUNDS_WITH_SCORE="QUEST_FEW_ROUNDS_WITH_SCORE",e.QUEST_NO_COINS="QUEST_NO_COINS",e.QUEST_LOST_LEGS="QUEST_LOST_LEGS",e.QUEST_SCORE_WITHOUT_DAMAGE="QUEST_SCORE_WITHOUT_DAMAGE",e.QUEST_LOST_HEAD="QUEST_LOST_HEAD",e.QUEST_SCORE_EXACTLY="QUEST_SCORE_EXACTLY",e.QUEST_YELLOW_CIRCLE="QUEST_YELLOW_CIRCLE",e.QUEST_SCORE_WITHOUT_HANDS="QUEST_SCORE_WITHOUT_HANDS",e.QUEST_COINS_ACCUMULATE="QUEST_COINS_ACCUMULATE",e.QUEST_KILL_JOFFREY="QUEST_KILL_JOFFREY",e.QUEST_LOST_HEAD_BOOSTER="QUEST_LOST_HEAD_BOOSTER",e.QUEST_LOST_LEGS_UNTIL_ROUND="QUEST_LOST_LEGS_UNTIL_ROUND",e.QUEST_PLAY_WITH_RAGDOLL="QUEST_PLAY_WITH_RAGDOLL",e.QUEST_COINS_UNTIL_ROUND="QUEST_COINS_UNTIL_ROUND",e.QUEST_CIRCLE_JUMP_UNTIL_ROUND="QUEST_CIRCLE_JUMP_UNTIL_ROUND",e.QUEST_ACCELERATE="QUEST_ACCELERATE",e.QUEST_SHIELD="QUEST_SHIELD",e.QUEST_SHIELD_UNTIL_ROUND="QUEST_SHIELD_UNTIL_ROUND",e.QUEST_SHIELD_ALL_TIME="QUEST_SHIELD_ALL_TIME",e}(),TutorialHighlighter=function(e){function t(t,n,r,i){e.call(this),this.showed=!1,this.hidding=!1,this.shadeLayer=new createjs.Container,this.addChild(this.shadeLayer);var s=new createjs.Shape;s.graphics.beginFill("#000000"),s.graphics.drawRect(0,0,Constants.ASSETS_WIDTH,Constants.ASSETS_HEIGHT),s.graphics.endFill(),this.shadeLayer.addChild(s);var o=new createjs.Shape;o.graphics.beginFill("#000000"),o.graphics.drawRoundRect(t,n,r-t,i-n,10),o.graphics.endFill(),this.shadeLayer.addChild(o),o.compositeOperation="destination-out",this.shadeLayer.cache(0,0,Constants.ASSETS_WIDTH,Constants.ASSETS_HEIGHT)}return __extends(t,e),t.prototype.runTween=function(){var e=this;this.alpha=0,createjs.Tween.get(this).to({alpha:1},300,createjs.Ease.linear),this.shadeLayer.alpha=0,createjs.Tween.get(this.shadeLayer).to({alpha:.65},300,createjs.Ease.linear).call(function(){return e.finishShow()})},t.prototype.hide=function(){var e=this;this.hidding=!0,createjs.Tween.get(this).to({alpha:0},300,createjs.Ease.linear).call(function(){return e.kill()})},t.prototype.finishShow=function(){this.showed=!0},t.prototype.showFinished=function(){return this.showed},t.prototype.isHidding=function(){return this.hidding},t}(DNGameObject),TutorialState=function(e){function t(){var t=this;e.call(this),this.step=0,this.highlighterLyer=new createjs.Container,this.highlighters=[new TutorialHighlighter(105,570,560,615),new TutorialHighlighter(105,570,560,615),new TutorialHighlighter(120,8,305,70),new TutorialHighlighter(338,8,590,70)],this.texts=["C D E F G H f g","K L T E F Y Z","H A U V G H f g W F X","a b c d e"],this.textsPositions=[new createjs.Point(332.5,400),new createjs.Point(332.5,400),new createjs.Point(212.5,90),new createjs.Point(462.5,90)],this.hidding=!1,this.addChild(this.highlighterLyer),this.buttonSkip=new DNButton(Images.BUTTON_SKIP,function(){return t.skip()}),this.addChild(this.buttonSkip),this.addGuiObject(this.buttonSkip),this.buttonSkip.x=640,this.buttonSkip.y=700;var n=new DNBitmapLabel(Fonts.whiteFont,"S H");this.addChild(n),n.x=640,n.y=740,this.tapHint=new DNBitmapLabel(Fonts.whiteFont,"K L M N"),this.addChild(this.tapHint),this.tapHint.x=350,this.tapHint.y=720,this.tapHint.alpha=0,createjs.Tween.get(this.tapHint).to({alpha:1},400,createjs.Ease.linear),this.runStep()}return __extends(t,e),t.prototype.runStep=function(){if(this.step>=this.highlighters.length)return void this.skip();this.curHighlighter=this.highlighters[this.step],this.curHighlighter.runTween(),this.addGameObjectAt(this.curHighlighter,this.highlighterLyer);var e=new DNTextBox(Fonts.whiteFont,this.texts[this.step],350,500,.8);if(this.curHighlighter.addChild(e),e.x=this.textsPositions[this.step].x,e.y=this.textsPositions[this.step].y,1==this.step){var t=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.HINT_ARROW);this.curHighlighter.addChild(t),t.x=137,t.y=545;var n=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.HINT_ARROW);this.curHighlighter.addChild(n),n.x=343,n.y=545;var r=DNAssetsManager.g_instance.getCenteredImageWithProxy(Images.HINT_ARROW);this.curHighlighter.addChild(r),r.x=513,r.y=545}this.step++},t.prototype.onMouseDown=function(t,n){this.hidding||(e.prototype.onMouseDown.call(this,t,n),this.curHighlighter.isDead()||this.curHighlighter.isHidding()||!this.curHighlighter.showFinished()||this.curHighlighter.hide())},t.prototype.update=function(t){e.prototype.update.call(this,t),this.tapHint.scaleX=this.tapHint.scaleY=1+.02*Math.sin(5*this.liveTime),this.hidding||this.curHighlighter.isDead()&&this.runStep()},t.prototype.skip=function(){this.hidding=!0,createjs.Tween.get(this.buttonSkip).to({x:780},300,createjs.Ease.circOut),createjs.Tween.get(this).to({alpha:0},300,createjs.Ease.linear).call(function(){return DNStateManager.g_instance.popState()})},t}(DNGameState),Utils=function(){function e(){}return e.RandomRange=function(e,t){return e+(t-e)*Math.random()},e.RandomRangeInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.IntToTimeString=function(e){var t,n=Math.floor(e/60),r=n.toString(),i=e%60;return t=10>i?"0"+i:i.toString(),r+":"+t},e.RadToGrad=function(e){return 180*e/Math.PI},e.GradToRad=function(e){return e*Math.PI/180},e.IsMobileBrowser=function(){if(void 0!=window.orientation)return!0;var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},e.ScaledOffset=function(e){return(window.devicePixelRatio?window.devicePixelRatio:1)*e/Constants.SCREEN_SCALE},e.LineIntersectCircle=function(e,t,n,r){var i=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y),s=2*((t.x-e.x)*(e.x-n.x)+(t.y-e.y)*(e.y-n.y)),o=n.x*n.x+n.y*n.y+e.x*e.x+e.y*e.y-2*(n.x*e.x+n.y*e.y)-r*r,u=s*s-4*i*o;if(u>0){var a=Math.sqrt(u),f=(-s+a)/(2*i),l=(-s-a)/(2*i);return(0>f||f>1)&&(0>l||l>1)?!1:!0}return!1},e.ScoreString=function(e){var t=e.toString();switch(t.length){case 1:t="00000"+t;break;case 2:t="0000"+t;break;case 3:t="000"+t;break;case 4:t="00"+t;break;case 5:t="0"+t;break;case 6:}return t},e.RunShowAnim=function(e,t){e.alpha=0,createjs.Tween.get(e).wait(t).to({alpha:1},200,createjs.Ease.linear),e.scaleX=e.scaleY=.1,createjs.Tween.get(e).wait(t).to({scaleX:1,scaleY:1},400,createjs.Ease.backOut)},e.goMoreGames=function(){DNGameConfig.goMoreGames()},e.shuffle=function(e){for(var t,n,r=e.length;r;t=Math.floor(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);},e.DetectLanguage=function(){var e;return navigator&&navigator.userAgent&&(e=navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))&&(e=e[1]),!e&&navigator&&(navigator.language?e=navigator.language:navigator.browserLanguage?e=navigator.browserLanguage:navigator.systemLanguage?e=navigator.systemLanguage:navigator.userLanguage&&(e=navigator.userLanguage),e=e.substr(0,2)),e},e.AlignScale=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var n=1e5,r=0;r<e.length;r++)e[r].pic.scaleX<n&&(n=e[r].pic.scaleX);for(var r=0;r<e.length;r++)e[r].setMinScale(n)},e.DrawRect=function(e,t,n,r){var i=new createjs.Shape;return i.graphics.beginFill(n),i.graphics.drawRect(0,0,e,t),i.graphics.endFill(),r&&r.addChild(i),i},e.ReplaceSubstring=function(e,t){var n=e.indexOf("%");return e.substr(0,n)+t+e.substr(n+1,e.length)},e.ResizeTo=function(e,t,n){e.scaleX=t/e.getBounds().width,e.scaleY=n/e.getBounds().height},e.AnyOf=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];return t[e.RandomRangeInt(0,t.length-1)]},e.RandomElement=function(t){return t[e.RandomRangeInt(0,t.length-1)]},e.SqrDistance=function(e,t,n,r){return(e-n)*(e-n)+(t-r)*(t-r)},e.DetectCrap=function(){if(navigator.userAgent.indexOf("Android")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1))return!0;var e=navigator.userAgent.match(/(iPhone|iPod|iPad)/g)?!0:!1;return e&&window.screen.height<=480?!0:e&&1==window.devicePixelRatio?!0:!1},e.RemoveElement=function(e,t){var n=e.indexOf(t);n==e.length-1?e.pop():e[n]=e.pop()},e}(),WinState=function(e){function t(t,n,r){var i=this;e.call(this),this.layout=[{type:Layouts.TYPE_PLACEHOLDER,x:350,y:420,name:"panel",children:[{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.BLUE_BACK,x:0,y:0,scale_y:.55},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.CHECKERED_PIC,x:0,y:-200,children:[{type:Layouts.TYPE_BITMAP_LABEL,x:0,y:-20,text:"  OCI",font:Fonts.blueFont,scale:1.5}]},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.STAR_OFF,x:-90,y:-95},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.STAR_OFF,x:0,y:-95},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.STAR_OFF,x:90,y:-95},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.STAR_ON,x:-90,y:-95,name:"star_0"},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.STAR_ON,x:0,y:-95,name:"star_1"},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.STAR_ON,x:90,y:-95,name:"star_2"},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.BUTTON_BLUE_LITTLE,x:0,y:-20},{type:Layouts.TYPE_BITMAP_LABEL,font:Fonts.whiteFont,x:0,y:-45,text:"s  t    : ",align_h:1},{type:Layouts.TYPE_BITMAP_LABEL,font:Fonts.whiteFont,x:10,y:-45,text:"000000",align_h:0,name:"score"},{type:Layouts.TYPE_STATIC_PICTURE,picture:Images.BUTTON_BLUE_LITTLE,x:0,y:50},{type:Layouts.TYPE_BITMAP_LABEL,font:Fonts.whiteFont,x:0,y:25,text:"rst    : ",align_h:1},{type:Layouts.TYPE_BITMAP_LABEL,font:Fonts.whiteFont,x:10,y:25,text:"000000",align_h:0,name:"total_score"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_PLAY,x:150,y:150,name:"next"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_RESTART,x:0,y:150,name:"restart"},{type:Layouts.TYPE_BUTTON,picture:Images.BUTTON_HOME,x:-150,y:150,name:"exit"}]}],this.tmpScore=0,this.score=300,this.tmpTotalScore=1e3,this.totalScore=1300,this.secondLabelAnim=!1,this.wasPlay1=!1,this.wasPlay2=!1,this.score=n,this.starsCollected=r,this.tmpTotalScore=GameData.getInstance().getTotalScore(),GameData.getInstance().onWinLevel(t,n,r),this.totalScore=GameData.getInstance().getTotalScore(),this.level=t,this.addShader(200),this.loadLayout(this.layout,this);var s=this.findGUIObject("panel");s.alpha=0,s.scaleY=.3,this.blockHandlers(),createjs.Tween.get(s).to({alpha:1,scaleY:1},400,createjs.Ease.circOut).call(function(){return i.unblockHandlers()}).call(function(){return i.showFinished()}),this.stars=[this.findGUIObject("star_0"),this.findGUIObject("star_1"),this.findGUIObject("star_2")];for(var o=0;o<this.stars.length;o++)this.stars[o].alpha=0;this.setHandler("exit",function(){return i.onExitTouch()}),this.setHandler("restart",function(){return i.onRestartTouch()}),this.setHandler("next",function(){return i.onNextTouch()}),this.scoreLabel=this.findGUIObject("score"),this.totalScoreLabel=this.findGUIObject("total_score"),this.totalScoreLabel.setText(Utils.ScoreString(this.tmpTotalScore)),DNSoundManager.g_instance.play(Sounds.ROUND_ENDED,.5)}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this)},t.prototype.showFinished=function(){for(var e=0;e<this.starsCollected;e++)this.stars[e].scaleX=this.stars[e].scaleY=.3,createjs.Tween.get(this.stars[e]).wait(300+250*e).to({alpha:1,scaleX:1,scaleY:1},450,createjs.Ease.circOut)},t.prototype.onExitTouch=function(){DNStateManager.g_instance.pushState(new ShadeInState(new SelectLevelState))},t.prototype.onRestartTouch=function(){DNStateManager.g_instance.pushState(new ShadeInState(new PlayState(this.level)))},t.prototype.onNextTouch=function(){DNStateManager.g_instance.pushState(new ShadeInState(this.level+1>=GameData.getInstance().getTotalLevels()?new SelectLevelState:new PlayState(this.level+1)))},t.prototype.update=function(t){e.prototype.update.call(this,t),this.liveTime>1.5&&(this.tmpScore+=700*t,this.tmpScore>this.score&&(this.tmpScore=this.score,this.secondLabelAnim=!0),this.scoreLabel.setText(Utils.ScoreString(Math.floor(this.tmpScore))),this.wasPlay1||(DNSoundManager.g_instance.play(Sounds.CALC_SCORE,.5),this.wasPlay1=!0)),this.secondLabelAnim&&(this.tmpTotalScore+=700*t,this.tmpTotalScore>this.totalScore&&(this.tmpTotalScore=this.totalScore),this.totalScoreLabel.setText(Utils.ScoreString(Math.floor(this.tmpTotalScore))),this.wasPlay2||(DNSoundManager.g_instance.play(Sounds.CALC_SCORE,.5),this.wasPlay2=!0))},t}(DNGameState)