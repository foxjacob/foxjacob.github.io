var egret;
(function(b) {
    b.egret_string_code = {};
    b.egret_string_code[-1] = "\u4e0d\u5b58\u5728\u7684stringId:{0}";
    b.egret_string_code[1E3] = "Browser.isMobile\u63a5\u53e3\u53c2\u6570\u5df2\u7ecf\u53d8\u66f4\uff0c\u8bf7\u5c3d\u5feb\u8c03\u6574\u7528\u6cd5\u4e3a egret.MainContext.deviceType == egret.MainContext.DEVICE_MOBILE";
    b.egret_string_code[1001] = "\u8be5\u65b9\u6cd5\u76ee\u524d\u4e0d\u5e94\u4f20\u5165 resolutionPolicy \u53c2\u6570\uff0c\u8bf7\u5728 docs/1.0_Final_ReleaseNote\u4e2d\u67e5\u770b\u5982\u4f55\u5347\u7ea7";
    b.egret_string_code[1002] =
        "egret.Ticker\u662f\u6846\u67b6\u5185\u90e8\u4f7f\u7528\u7684\u5355\u4f8b\uff0c\u4e0d\u5141\u8bb8\u5728\u5916\u90e8\u5b9e\u4f8b\u5316\uff0c\u8ba1\u65f6\u5668\u8bf7\u4f7f\u7528egret.Timer\u7c7b\uff01";
    b.egret_string_code[1003] = "Ticker#setTimeout\u65b9\u6cd5\u5373\u5c06\u5e9f\u5f03,\u8bf7\u4f7f\u7528egret.setTimeout";
    b.egret_string_code[1004] = "ExternalInterface\u8c03\u7528\u4e86js\u6ca1\u6709\u6ce8\u518c\u7684\u65b9\u6cd5: {0}";
    b.egret_string_code[1005] = "\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684blendMode: {0}";
    b.egret_string_code[1006] = "child\u4e0d\u5728\u5f53\u524d\u5bb9\u5668\u5185";
    b.egret_string_code[1007] = "\u63d0\u4f9b\u7684\u7d22\u5f15\u8d85\u51fa\u8303\u56f4";
    b.egret_string_code[1008] = "child\u672a\u88abaddChild\u5230\u8be5parent";
    b.egret_string_code[1009] = "\u8bbe\u7f6e\u4e86\u5df2\u7ecf\u5b58\u5728\u7684\u9002\u914d\u6a21\u5f0f:{0}";
    b.egret_string_code[1010] = "addEventListener\u4fa6\u542c\u51fd\u6570\u4e0d\u80fd\u4e3a\u7a7a";
    b.egret_string_code[1011] = 'BitmapText\u627e\u4e0d\u5230\u6587\u5b57\u6240\u5bf9\u5e94\u7684\u7eb9\u7406:"{0}"';
    b.egret_string_code[1012] = "egret.BitmapTextSpriteSheet\u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528egret.BitmapFont\u4ee3\u66ff\u3002";
    b.egret_string_code[1013] = "TextField.setFocus \u6ca1\u6709\u5b9e\u73b0";
    b.egret_string_code[1014] = "Ease\u4e0d\u80fd\u88ab\u5b9e\u4f8b\u5316";
    b.egret_string_code[1015] = "xml not found!";
    b.egret_string_code[1016] = "{0}\u5df2\u7ecf\u5e9f\u5f03";
    b.egret_string_code[1017] = "JSON\u6587\u4ef6\u683c\u5f0f\u4e0d\u6b63\u786e: {0}\ndata: {1}";
    b.egret_string_code[1018] = "egret_html5_localStorage.setItem\u4fdd\u5b58\u5931\u8d25,key={0}&value={1}";
    b.egret_string_code[1019] = "\u7f51\u7edc\u5f02\u5e38:{0}";
    b.egret_string_code[1020] = "\u65e0\u6cd5\u521d\u59cb\u5316\u7740\u8272\u5668";
    b.egret_string_code[1021] = "\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301webgl";
    b.egret_string_code[1022] = "{0} ArgumentError";
    b.egret_string_code[1023] = "\u6b64\u65b9\u6cd5\u5728ScrollView\u5185\u4e0d\u53ef\u7528!";
    b.egret_string_code[1024] = "\u4f7f\u7528\u4e86\u5c1a\u672a\u5b9e\u73b0\u7684ScaleMode";
    b.egret_string_code[1025] = "\u9047\u5230\u6587\u4ef6\u5c3e";
    b.egret_string_code[1026] =
        "EncodingError! The code point {0} could not be encoded.";
    b.egret_string_code[1027] = "DecodingError";
    b.egret_string_code[1028] = "\u8c03\u7528\u4e86\u672a\u914d\u7f6e\u7684\u6ce8\u5165\u89c4\u5219:{0}\u3002 \u8bf7\u5148\u5728\u9879\u76ee\u521d\u59cb\u5316\u91cc\u914d\u7f6e\u6307\u5b9a\u7684\u6ce8\u5165\u89c4\u5219\uff0c\u518d\u8c03\u7528\u5bf9\u5e94\u5355\u4f8b\u3002";
    b.egret_string_code[1029] = "Function.prototype.bind - what is trying to be bound is not callable";
    b.egret_string_code[1030] = "\u8be5API\u5df2\u5e9f\u5f03";
    b.egret_string_code[2E3] = "RES.createGroup()\u4f20\u5165\u4e86\u914d\u7f6e\u4e2d\u4e0d\u5b58\u5728\u7684\u952e\u503c: {0}";
    b.egret_string_code[2001] = 'RES\u52a0\u8f7d\u4e86\u4e0d\u5b58\u5728\u6216\u7a7a\u7684\u8d44\u6e90\u7ec4:"{0}"';
    b.egret_string_code[3E3] = "\u4e3b\u9898\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25: {0}";
    b.egret_string_code[3001] = "\u627e\u4e0d\u5230\u4e3b\u9898\u4e2d\u6240\u914d\u7f6e\u7684\u76ae\u80a4\u7c7b\u540d: {0}";
    b.egret_string_code[3002] = '\u7d22\u5f15:"{0}"\u8d85\u51fa\u96c6\u5408\u5143\u7d20\u7d22\u5f15\u8303\u56f4';
    b.egret_string_code[3003] = "\u5728\u6b64\u7ec4\u4ef6\u4e2d\u4e0d\u53ef\u7528\uff0c\u82e5\u6b64\u7ec4\u4ef6\u4e3a\u5bb9\u5668\u7c7b\uff0c\u8bf7\u4f7f\u7528";
    b.egret_string_code[3004] = "addChild(){0}addElement()\u4ee3\u66ff";
    b.egret_string_code[3005] = "addChildAt(){0}addElementAt()\u4ee3\u66ff";
    b.egret_string_code[3006] = "removeChild(){0}removeElement()\u4ee3\u66ff";
    b.egret_string_code[3007] = "removeChildAt(){0}removeElementAt()\u4ee3\u66ff";
    b.egret_string_code[3008] = "setChildIndex(){0}setElementIndex()\u4ee3\u66ff";
    b.egret_string_code[3009] = "swapChildren(){0}swapElements()\u4ee3\u66ff";
    b.egret_string_code[3010] = "swapChildrenAt(){0}swapElementsAt()\u4ee3\u66ff";
    b.egret_string_code[3011] = '\u7d22\u5f15:"{0}"\u8d85\u51fa\u53ef\u89c6\u5143\u7d20\u7d22\u5f15\u8303\u56f4';
    b.egret_string_code[3012] = "\u6b64\u65b9\u6cd5\u5728Scroller\u7ec4\u4ef6\u5185\u4e0d\u53ef\u7528!";
    b.egret_string_code[3013] = "UIStage\u662fGUI\u6839\u5bb9\u5668\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u6b64\u5b9e\u4f8b\u5728\u663e\u793a\u5217\u8868\u4e2d\uff01";
    b.egret_string_code[4E3] = "An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)";
    b.egret_string_code[4001] = "Abstract class can not be instantiated!";
    b.egret_string_code[4002] = "Unnamed data!";
    b.egret_string_code[4003] = "Nonsupport version!";
    b.egret_string_code[3100] = "\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket";
    b.egret_string_code[3101] = "\u8bf7\u5148\u8fde\u63a5WebSocket";
    b.egret_string_code[3102] = "\u8bf7\u5148\u8bbe\u7f6etype\u4e3a\u4e8c\u8fdb\u5236\u7c7b\u578b"
})(egret ||
    (egret = {}));
(function(b) {
    function c(a) {
        for (var e = [], k = 1; k < arguments.length; k++) e[k - 1] = arguments[k];
        if (k = b.egret_string_code[a])
            for (var q = e.length, d = 0; d < q; d++) k = k.replace("{" + d + "}", e[d]);
        return k
    }
    var d = function() {
        function a() {}
        a.fatal = function(e, a) {
            void 0 === a && (a = null);
            b.Logger.traceToConsole("Fatal", e, a);
            throw Error(b.Logger.getTraceCode("Fatal", e, a));
        };
        a.info = function(e, a) {
            void 0 === a && (a = null);
            b.Logger.traceToConsole("Info", e, a)
        };
        a.warning = function(e, a) {
            void 0 === a && (a = null);
            b.Logger.traceToConsole("Warning", e,
                a)
        };
        a.fatalWithErrorId = function(e) {
            for (var k = [], b = 1; b < arguments.length; b++) k[b - 1] = arguments[b];
            k.unshift(e);
            (k = c.apply(null, k)) ? a.fatal(k): a.warning(c(-1, e))
        };
        a.infoWithErrorId = function(e) {
            for (var k = [], b = 1; b < arguments.length; b++) k[b - 1] = arguments[b];
            k.unshift(e);
            (k = c.apply(null, k)) ? a.info(k): a.warning(c(-1, e))
        };
        a.warningWithErrorId = function(e) {
            for (var k = [], b = 1; b < arguments.length; b++) k[b - 1] = arguments[b];
            k.unshift(e);
            (k = c.apply(null, k)) ? a.warning(k): a.warning(c(-1, e))
        };
        a.traceToConsole = function(e, a,
            q) {
            console.log(b.Logger.getTraceCode(e, a, q))
        };
        a.getTraceCode = function(e, a, b) {
            return "[" + e + "]" + a + (null == b ? "" : ":" + b)
        };
        return a
    }();
    b.Logger = d;
    d.prototype.__class__ = "egret.Logger";
    b.getString = c
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {
            this._hashCode = b.hashCount++
        }
        Object.defineProperty(b.prototype, "hashCode", {
            get: function() {
                return this._hashCode
            },
            enumerable: !0,
            configurable: !0
        });
        b.hashCount = 1;
        return b
    }();
    b.HashObject = c;
    c.prototype.__class__ = "egret.HashObject"
})(egret || (egret = {}));
var __extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(e) {
            void 0 === e && (e = 300);
            b.call(this);
            this.objectPool = [];
            this._length = 0;
            1 > e && (e = 1);
            this.autoDisposeTime = e;
            this.frameCount = 0
        }
        __extends(a, b);
        a.prototype._checkFrame = function() {
            this.frameCount--;
            0 >= this.frameCount && this.dispose()
        };
        Object.defineProperty(a.prototype, "length", {
            get: function() {
                return this._length
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.push = function(e) {
            var k = this.objectPool; - 1 == k.indexOf(e) && (k.push(e), e.__recycle && e.__recycle(), this._length++,
                0 == this.frameCount && (this.frameCount = this.autoDisposeTime, a._callBackList.push(this)))
        };
        a.prototype.pop = function() {
            if (0 == this._length) return null;
            this._length--;
            return this.objectPool.pop()
        };
        a.prototype.dispose = function() {
            0 < this._length && (this.objectPool = [], this._length = 0);
            this.frameCount = 0;
            var e = a._callBackList,
                k = e.indexOf(this); - 1 != k && e.splice(k, 1)
        };
        a._callBackList = [];
        return a
    }(b.HashObject);
    b.Recycler = c;
    c.prototype.__class__ = "egret.Recycler"
})(egret || (egret = {}));
(function(b) {
    b.__START_TIME;
    b.getTimer = function() {
        return Date.now() - b.__START_TIME
    }
})(egret || (egret = {}));
(function(b) {
    b.__callLaterFunctionList = [];
    b.__callLaterThisList = [];
    b.__callLaterArgsList = [];
    b.callLater = function(c, d) {
        for (var a = [], e = 2; e < arguments.length; e++) a[e - 2] = arguments[e];
        b.__callLaterFunctionList.push(c);
        b.__callLaterThisList.push(d);
        b.__callLaterArgsList.push(a)
    };
    b.__callAsyncFunctionList = [];
    b.__callAsyncThisList = [];
    b.__callAsyncArgsList = [];
    b.__callAsync = function(c, d) {
        for (var a = [], e = 2; e < arguments.length; e++) a[e - 2] = arguments[e];
        b.__callAsyncFunctionList.push(c);
        b.__callAsyncThisList.push(d);
        b.__callAsyncArgsList.push(a)
    }
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function d() {}
        d.prototype.call = function(a) {
            this.callback && this.callback.call(this.thisObject, a)
        };
        d.prototype.dispose = function() {
            this.thisObject = this.callback = null;
            d.__freeList.push(this)
        };
        d.push = function(a, e) {
            var k;
            k = d.__freeList.length ? d.__freeList.pop() : new b.RenderCommand;
            k.callback = a;
            k.thisObject = e;
            b.MainContext.__DRAW_COMMAND_LIST.push(k)
        };
        d.__freeList = [];
        return d
    }();
    b.RenderCommand = c;
    c.prototype.__class__ = "egret.RenderCommand"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e, a, b) {
            void 0 === a && (a = !1);
            void 0 === b && (b = !1);
            d.call(this);
            this.data = null;
            this._type = "";
            this._cancelable = this._bubbles = !1;
            this._eventPhase = 2;
            this._target = this._currentTarget = null;
            this._isPropagationImmediateStopped = this._isPropagationStopped = this._isDefaultPrevented = !1;
            this.isNew = !0;
            this._type = e;
            this._bubbles = a;
            this._cancelable = b
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "type", {
            get: function() {
                return this._type
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype,
            "bubbles", {
                get: function() {
                    return this._bubbles
                },
                enumerable: !0,
                configurable: !0
            });
        Object.defineProperty(a.prototype, "cancelable", {
            get: function() {
                return this._cancelable
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "eventPhase", {
            get: function() {
                return this._eventPhase
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "currentTarget", {
            get: function() {
                return this._currentTarget
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "target", {
            get: function() {
                return this._target
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.isDefaultPrevented = function() {
            return this._isDefaultPrevented
        };
        a.prototype.preventDefault = function() {
            this._cancelable && (this._isDefaultPrevented = !0)
        };
        a.prototype.stopPropagation = function() {
            this._bubbles && (this._isPropagationStopped = !0)
        };
        a.prototype.stopImmediatePropagation = function() {
            this._bubbles && (this._isPropagationImmediateStopped = !0)
        };
        a.prototype._reset = function() {
            this.isNew ? this.isNew = !1 : (this._isPropagationImmediateStopped = this._isPropagationStopped =
                this._isDefaultPrevented = !1, this._currentTarget = this._target = null, this._eventPhase = 2)
        };
        a.prototype.__recycle = function() {
            this.data = this._target = this._currentTarget = null
        };
        a._dispatchByTarget = function(e, a, q, d, c, f) {
            void 0 === c && (c = !1);
            void 0 === f && (f = !1);
            var l = e.eventRecycler;
            l || (l = e.eventRecycler = new b.Recycler);
            var m = l.pop();
            m ? m._type = q : m = new e(q);
            m._bubbles = c;
            m._cancelable = f;
            if (d)
                for (var n in d) m[n] = d[n], null !== m[n] && (d[n] = null);
            e = a.dispatchEvent(m);
            l.push(m);
            return e
        };
        a._getPropertyData = function(e) {
            var a =
                e._props;
            a || (a = e._props = {});
            return a
        };
        a.dispatchEvent = function(e, k, b, d) {
            void 0 === b && (b = !1);
            var c = a._getPropertyData(a);
            d && (c.data = d);
            a._dispatchByTarget(a, e, k, c, b)
        };
        a.ADDED_TO_STAGE = "addedToStage";
        a.REMOVED_FROM_STAGE = "removedFromStage";
        a.ADDED = "added";
        a.REMOVED = "removed";
        a.COMPLETE = "complete";
        a.LOOP_COMPLETE = "loopcomplete";
        a.ENTER_FRAME = "enterFrame";
        a.RENDER = "render";
        a.FINISH_RENDER = "finishRender";
        a.FINISH_UPDATE_TRANSFORM = "finishUpdateTransform";
        a.LEAVE_STAGE = "leaveStage";
        a.RESIZE = "resize";
        a.CHANGE =
            "change";
        a.ACTIVATE = "activate";
        a.DEACTIVATE = "deactivate";
        a.CLOSE = "close";
        a.CONNECT = "connect";
        return a
    }(b.HashObject);
    b.Event = c;
    c.prototype.__class__ = "egret.Event"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(e, a, q) {
            void 0 === a && (a = !1);
            void 0 === q && (q = !1);
            b.call(this, e, a, q);
            this._status = 0
        }
        __extends(a, b);
        Object.defineProperty(a.prototype, "status", {
            get: function() {
                return this._status
            },
            enumerable: !0,
            configurable: !0
        });
        a.dispatchHTTPStatusEvent = function(e, k) {
            null == a.httpStatusEvent && (a.httpStatusEvent = new a(a.HTTP_STATUS));
            a.httpStatusEvent._status = k;
            e.dispatchEvent(a.httpStatusEvent)
        };
        a.HTTP_STATUS = "httpStatus";
        a.httpStatusEvent = null;
        return a
    }(b.Event);
    b.HTTPStatusEvent =
        c;
    c.prototype.__class__ = "egret.HTTPStatusEvent"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e, a, b) {
            void 0 === a && (a = !1);
            void 0 === b && (b = !1);
            d.call(this, e, a, b)
        }
        __extends(a, d);
        a.dispatchIOErrorEvent = function(e) {
            b.Event._dispatchByTarget(a, e, a.IO_ERROR)
        };
        a.IO_ERROR = "ioError";
        return a
    }(b.Event);
    b.IOErrorEvent = c;
    c.prototype.__class__ = "egret.IOErrorEvent"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e, a, b, h, c, f, l, m, n, p) {
            void 0 === a && (a = !0);
            void 0 === b && (b = !0);
            void 0 === h && (h = 0);
            void 0 === c && (c = 0);
            void 0 === f && (f = 0);
            void 0 === l && (l = !1);
            void 0 === m && (m = !1);
            void 0 === p && (p = !1);
            d.call(this, e, a, b);
            this._stageY = this._stageX = 0;
            this.touchPointID = NaN;
            this.touchDown = this.altKey = this.shiftKey = this.ctrlKey = !1;
            this.touchPointID = h;
            this._stageX = c;
            this._stageY = f;
            this.ctrlKey = l;
            this.altKey = m;
            this.touchDown = p
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "stageX", {
            get: function() {
                return this._stageX
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "stageY", {
            get: function() {
                return this._stageY
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "localX", {
            get: function() {
                return this._currentTarget.globalToLocal(this._stageX, this._stageY, b.Point.identity).x
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "localY", {
            get: function() {
                return this._currentTarget.globalToLocal(this._stageX, this._stageY, b.Point.identity).y
            },
            enumerable: !0,
            configurable: !0
        });
        a.dispatchTouchEvent = function(e, k, q, d, c, f, l, m, n) {
            void 0 === q && (q = 0);
            void 0 === d && (d = 0);
            void 0 === c && (c = 0);
            void 0 === f && (f = !1);
            void 0 === l && (l = !1);
            void 0 === m && (m = !1);
            void 0 === n && (n = !1);
            var p = b.Event._getPropertyData(a);
            p.touchPointID = q;
            p._stageX = d;
            p._stageY = c;
            p.ctrlKey = f;
            p.altKey = l;
            p.shiftKey = m;
            p.touchDown = n;
            b.Event._dispatchByTarget(a, e, k, p, !0, !0)
        };
        a.TOUCH_TAP = "touchTap";
        a.TOUCH_MOVE = "touchMove";
        a.TOUCH_BEGIN = "touchBegin";
        a.TOUCH_END = "touchEnd";
        a.TOUCH_RELEASE_OUTSIDE = "touchReleaseOutside";
        a.TOUCH_ROLL_OUT =
            "touchRollOut";
        a.TOUCH_ROLL_OVER = "touchRollOver";
        a.TOUCH_OUT = "touchOut";
        a.TOUCH_OVER = "touchOver";
        return a
    }(b.Event);
    b.TouchEvent = c;
    c.prototype.__class__ = "egret.TouchEvent"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e, a, b) {
            void 0 === a && (a = !1);
            void 0 === b && (b = !1);
            d.call(this, e, a, b)
        }
        __extends(a, d);
        a.dispatchTimerEvent = function(e, k) {
            b.Event._dispatchByTarget(a, e, k)
        };
        a.TIMER = "timer";
        a.TIMER_COMPLETE = "timerComplete";
        return a
    }(b.Event);
    b.TimerEvent = c;
    c.prototype.__class__ = "egret.TimerEvent"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e, a, b, h) {
            void 0 === a && (a = !1);
            void 0 === b && (b = !1);
            void 0 === h && (h = "");
            d.call(this, e, a, b);
            this.text = h
        }
        __extends(a, d);
        a.dispatchTextEvent = function(e, k, q) {
            var d = b.Event._getPropertyData(a);
            d.text = q;
            b.Event._dispatchByTarget(a, e, k, d)
        };
        a.LINK = "link";
        return a
    }(b.Event);
    b.TextEvent = c;
    c.prototype.__class__ = "egret.TextEvent"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e, a, b, c, g) {
            void 0 === a && (a = !1);
            void 0 === b && (b = !1);
            void 0 === c && (c = 0);
            void 0 === g && (g = 0);
            d.call(this, e, a, b);
            this.bytesTotal = this.bytesLoaded = 0;
            this.bytesLoaded = c;
            this.bytesTotal = g
        }
        __extends(a, d);
        a.dispatchProgressEvent = function(e, k, q, d) {
            void 0 === q && (q = 0);
            void 0 === d && (d = 0);
            b.Event._dispatchByTarget(a, e, k, {
                bytesLoaded: q,
                bytesTotal: d
            })
        };
        a.PROGRESS = "progress";
        a.SOCKET_DATA = "socketData";
        return a
    }(b.Event);
    b.ProgressEvent = c;
    c.prototype.__class__ = "egret.ProgressEvent"
})(egret ||
    (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.CAPTURING_PHASE = 1;
        b.AT_TARGET = 2;
        b.BUBBLING_PHASE = 3;
        return b
    }();
    b.EventPhase = c;
    c.prototype.__class__ = "egret.EventPhase"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e) {
            void 0 === e && (e = null);
            d.call(this);
            this._captureEventsMap = this._eventsMap = this._eventTarget = null;
            this._eventTarget = e ? e : this
        }
        __extends(a, d);
        a.prototype.addEventListener = function(e, a, q, d, c) {
            void 0 === d && (d = !1);
            void 0 === c && (c = 0);
            "undefined" === typeof d && (d = !1);
            "undefined" === typeof c && (c = 0);
            a || b.Logger.fatalWithErrorId(1010);
            d ? (this._captureEventsMap || (this._captureEventsMap = {}), d = this._captureEventsMap) : (this._eventsMap || (this._eventsMap = {}), d = this._eventsMap);
            var f = d[e];
            f || (f = d[e] = []);
            this._insertEventBin(f, a, q, c)
        };
        a.prototype._insertEventBin = function(e, a, b, d, c) {
            void 0 === c && (c = void 0);
            for (var f = -1, l = e.length, m = 0; m < l; m++) {
                var n = e[m];
                if (n.listener === a && n.thisObject === b && n.display === c) return !1; - 1 == f && n.priority < d && (f = m)
            }
            a = {
                listener: a,
                thisObject: b,
                priority: d
            };
            c && (a.display = c); - 1 != f ? e.splice(f, 0, a) : e.push(a);
            return !0
        };
        a.prototype.removeEventListener = function(e, a, b, d) {
            void 0 === d && (d = !1);
            if (d = d ? this._captureEventsMap : this._eventsMap) {
                var c = d[e];
                c && (this._removeEventBin(c,
                    a, b), 0 == c.length && delete d[e])
            }
        };
        a.prototype._removeEventBin = function(e, a, b, d, c) {
            void 0 === d && (d = void 0);
            void 0 === c && (c = 0);
            for (var f = e.length; c < f; c++) {
                var l = e[c];
                if (l.listener === a && l.thisObject === b && l.display == d) return e.splice(c, 1), !0
            }
            return !1
        };
        a.prototype.hasEventListener = function(e) {
            return this._eventsMap && this._eventsMap[e] || this._captureEventsMap && this._captureEventsMap[e]
        };
        a.prototype.willTrigger = function(e) {
            return this.hasEventListener(e)
        };
        a.prototype.dispatchEvent = function(e) {
            e._reset();
            e._target =
                this._eventTarget;
            e._currentTarget = this._eventTarget;
            return this._notifyListener(e)
        };
        a.prototype._notifyListener = function(e) {
            var a = 1 == e._eventPhase ? this._captureEventsMap : this._eventsMap;
            if (!a) return !0;
            a = a[e._type];
            if (!a) return !0;
            var b = a.length;
            if (0 == b) return !0;
            for (var a = a.concat(), d = 0; d < b; d++) {
                var c = a[d];
                c.listener.call(c.thisObject, e);
                if (e._isPropagationImmediateStopped) break
            }
            return !e._isDefaultPrevented
        };
        a.prototype.dispatchEventWith = function(e, a, q) {
            void 0 === a && (a = !1);
            b.Event.dispatchEvent(this,
                e, a, q)
        };
        return a
    }(b.HashObject);
    b.EventDispatcher = c;
    c.prototype.__class__ = "egret.EventDispatcher"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this.stage = this.deviceContext = this.netContext = this.touchContext = this.rendererContext = null;
            this.reuseEvent = new b.Event("")
        }
        __extends(a, d);
        a.prototype.run = function() {
            b.Ticker.getInstance().run();
            b.Ticker.getInstance().register(this.renderLoop, this, Number.NEGATIVE_INFINITY);
            b.Ticker.getInstance().register(this.broadcastEnterFrame, this, Number.POSITIVE_INFINITY);
            this.touchContext.run();
            this._profileInstance = b.Profiler.getInstance()
        };
        a.prototype.renderLoop =
            function(e) {
                if (0 < b.__callLaterFunctionList.length) {
                    var k = b.__callLaterFunctionList;
                    b.__callLaterFunctionList = [];
                    var q = b.__callLaterThisList;
                    b.__callLaterThisList = [];
                    var d = b.__callLaterArgsList;
                    b.__callLaterArgsList = []
                }
                e = this.stage;
                var c = a.cachedEvent;
                c._type = b.Event.RENDER;
                this.dispatchEvent(c);
                b.Stage._invalidateRenderFlag && (this.broadcastRender(), b.Stage._invalidateRenderFlag = !1);
                k && this.doCallLaterList(k, q, d);
                0 < b.__callAsyncFunctionList.length && this.doCallAsyncList();
                k = this.rendererContext;
                k.onRenderStart();
                k.clearScreen();
                a.__DRAW_COMMAND_LIST = [];
                a._renderLoopPhase = "updateTransform";
                e._updateTransform();
                a._renderLoopPhase = "draw";
                c._type = b.Event.FINISH_UPDATE_TRANSFORM;
                this.dispatchEvent(c);
                a.__use_new_draw ? this._draw(k) : e._draw(k);
                c._type = b.Event.FINISH_RENDER;
                this.dispatchEvent(c);
                this._profileInstance._isRunning && this._profileInstance._drawProfiler();
                k.onRenderFinish()
            };
        a.prototype._draw = function(e) {
            for (var k = a.__DRAW_COMMAND_LIST, b = k.length, d = 0; d < b; d++) {
                var c = k[d];
                c.call(e);
                c.dispose()
            }
        };
        a.prototype.broadcastEnterFrame =
            function(e) {
                e = this.reuseEvent;
                e._type = b.Event.ENTER_FRAME;
                this.dispatchEvent(e);
                for (var a = b.DisplayObject._enterFrameCallBackList.concat(), q = a.length, d = 0; d < q; d++) {
                    var c = a[d];
                    e._target = c.display;
                    e._currentTarget = c.display;
                    c.listener.call(c.thisObject, e)
                }
                a = b.Recycler._callBackList;
                for (d = a.length - 1; 0 <= d; d--) a[d]._checkFrame()
            };
        a.prototype.broadcastRender = function() {
            var e = this.reuseEvent;
            e._type = b.Event.RENDER;
            for (var a = b.DisplayObject._renderCallBackList.concat(), q = a.length, d = 0; d < q; d++) {
                var c = a[d],
                    f =
                    c.display;
                e._target = f;
                e._currentTarget = f;
                c.listener.call(c.thisObject, e)
            }
        };
        a.prototype.doCallLaterList = function(e, a, b) {
            for (var d = e.length, c = 0; c < d; c++) {
                var f = e[c];
                null != f && f.apply(a[c], b[c])
            }
        };
        a.prototype.doCallAsyncList = function() {
            var e = b.__callAsyncFunctionList.concat(),
                a = b.__callAsyncThisList.concat(),
                d = b.__callAsyncArgsList.concat();
            b.__callAsyncFunctionList.length = 0;
            b.__callAsyncThisList.length = 0;
            for (var c = b.__callAsyncArgsList.length = 0; c < e.length; c++) {
                var g = e[c];
                null != g && g.apply(a[c], d[c])
            }
        };
        a.deviceType = null;
        a.DEVICE_PC = "web";
        a.DEVICE_MOBILE = "native";
        a.RUNTIME_HTML5 = "runtime_html5";
        a.RUNTIME_NATIVE = "runtime_native";
        a.__DRAW_COMMAND_LIST = [];
        a.__use_new_draw = !0;
        a.cachedEvent = new b.Event("");
        return a
    }(b.EventDispatcher);
    b.MainContext = c;
    c.prototype.__class__ = "egret.MainContext"
})(egret || (egret = {}));
var testDeviceType = function() {
        if (!this.navigator) return !0;
        var b = navigator.userAgent.toLowerCase();
        return -1 != b.indexOf("mobile") || -1 != b.indexOf("android")
    },
    testRuntimeType = function() {
        return this.navigator ? !0 : !1
    };
egret.MainContext.instance = new egret.MainContext;
egret.MainContext.deviceType = testDeviceType() ? egret.MainContext.DEVICE_MOBILE : egret.MainContext.DEVICE_PC;
egret.MainContext.runtimeType = testRuntimeType() ? egret.MainContext.RUNTIME_HTML5 : egret.MainContext.RUNTIME_NATIVE;
delete testDeviceType;
delete testRuntimeType;
(function(b) {
    var c = function() {
        function d() {
            this._preDrawCount = this._updateTransformPerformanceCost = this._renderPerformanceCost = this._logicPerformanceCost = this._lastTime = 0;
            this._txt = null;
            this._tick = 0;
            this._maxDeltaTime = 500;
            this._totalDeltaTime = 0;
            this._isRunning = !1
        }
        d.getInstance = function() {
            null == d.instance && (d.instance = new d);
            return d.instance
        };
        d.prototype.stop = function() {
            if (this._isRunning) {
                this._isRunning = !1;
                b.Ticker.getInstance().unregister(this.update, this);
                var a = b.MainContext.instance;
                a.removeEventListener(b.Event.ENTER_FRAME,
                    this.onEnterFrame, this);
                a.removeEventListener(b.Event.RENDER, this.onStartRender, this);
                a.removeEventListener(b.Event.FINISH_RENDER, this.onFinishRender, this);
                a.removeEventListener(b.Event.FINISH_UPDATE_TRANSFORM, this.onFinishUpdateTransform, this)
            }
        };
        d.prototype.run = function() {
            null == this._txt && (this._txt = new b.TextField, this._txt.size = 28, this._txt.multiline = !0, this._txt._parent = new b.DisplayObjectContainer);
            if (!this._isRunning) {
                this._isRunning = !0;
                b.Ticker.getInstance().register(this.update, this);
                var a =
                    b.MainContext.instance;
                a.addEventListener(b.Event.ENTER_FRAME, this.onEnterFrame, this);
                a.addEventListener(b.Event.RENDER, this.onStartRender, this);
                a.addEventListener(b.Event.FINISH_RENDER, this.onFinishRender, this);
                a.addEventListener(b.Event.FINISH_UPDATE_TRANSFORM, this.onFinishUpdateTransform, this)
            }
        };
        d.prototype._drawProfiler = function() {
            this._txt._updateTransform();
            this._txt._draw(b.MainContext.instance.rendererContext)
        };
        d.prototype._setTxtFontSize = function(a) {
            this._txt.size = a
        };
        d.prototype.onEnterFrame =
            function(a) {
                this._lastTime = b.getTimer()
            };
        d.prototype.onStartRender = function(a) {
            a = b.getTimer();
            this._logicPerformanceCost = a - this._lastTime;
            this._lastTime = a
        };
        d.prototype.onFinishUpdateTransform = function(a) {
            a = b.getTimer();
            this._updateTransformPerformanceCost = a - this._lastTime;
            this._lastTime = a
        };
        d.prototype.onFinishRender = function(a) {
            a = b.getTimer();
            this._renderPerformanceCost = a - this._lastTime;
            this._lastTime = a
        };
        d.prototype.update = function(a) {
            this._tick++;
            this._totalDeltaTime += a;
            if (this._totalDeltaTime >=
                this._maxDeltaTime) {
                a = (this._preDrawCount - 3).toString();
                var e = Math.ceil(this._logicPerformanceCost).toString() + "," + Math.ceil(this._updateTransformPerformanceCost).toString() + "," + Math.ceil(this._renderPerformanceCost).toString() + "," + Math.ceil(b.MainContext.instance.rendererContext.renderCost).toString();
                this._txt.text = "draw:" + a + "\ncost:" + e + "\nFPS:" + Math.floor(1E3 * this._tick / this._totalDeltaTime).toString();
                this._tick = this._totalDeltaTime = 0
            }
            this._preDrawCount = 0
        };
        d.prototype.onDrawImage = function() {
            this._preDrawCount++
        };
        return d
    }();
    b.Profiler = c;
    c.prototype.__class__ = "egret.Profiler"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._timeScale = 1;
            this._paused = !1;
            this._callIndex = -1;
            this.callBackList = [];
            null != a.instance && b.Logger.fatalWithErrorId(1002)
        }
        __extends(a, d);
        a.prototype.run = function() {
            b.__START_TIME = (new Date).getTime();
            b.MainContext.instance.deviceContext.executeMainLoop(this.update, this)
        };
        a.prototype.update = function(e) {
            if (!this._paused) {
                e *= this._timeScale;
                e *= this._timeScale;
                this._callList = this.callBackList.concat();
                for (this._callIndex = 0; this._callIndex < this._callList.length; this._callIndex++) {
                    var a =
                        this._callList[this._callIndex];
                    a.listener.call(a.thisObject, e)
                }
                this._callIndex = -1;
                this._callList = null
            }
        };
        a.prototype.register = function(e, a, b) {
            void 0 === b && (b = 0);
            this._insertEventBin(this.callBackList, e, a, b)
        };
        a.prototype.unregister = function(e, a) {
            this._removeEventBin(this.callBackList, e, a);
            this._callList && -1 < this._callIndex && this._removeEventBin(this._callList, e, a, null, this._callIndex + 1)
        };
        a.prototype.setTimeout = function(e, a, d) {
            for (var c = [], g = 3; g < arguments.length; g++) c[g - 3] = arguments[g];
            b.Logger.warningWithErrorId(1003);
            b.setTimeout.apply(null, [e, a, d].concat(c))
        };
        a.prototype.setTimeScale = function(e) {
            this._timeScale = e
        };
        a.prototype.getTimeScale = function() {
            return this._timeScale
        };
        a.prototype.pause = function() {
            this._paused = !0
        };
        a.prototype.resume = function() {
            this._paused = !1
        };
        a.getInstance = function() {
            null == a.instance && (a.instance = new a);
            return a.instance
        };
        return a
    }(b.EventDispatcher);
    b.Ticker = c;
    c.prototype.__class__ = "egret.Ticker"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.LEFT = "left";
        b.RIGHT = "right";
        b.CENTER = "center";
        b.JUSTIFY = "justify";
        b.CONTENT_JUSTIFY = "contentJustify";
        return b
    }();
    b.HorizontalAlign = c;
    c.prototype.__class__ = "egret.HorizontalAlign"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.TOP = "top";
        b.BOTTOM = "bottom";
        b.MIDDLE = "middle";
        b.JUSTIFY = "justify";
        b.CONTENT_JUSTIFY = "contentJustify";
        return b
    }();
    b.VerticalAlign = c;
    c.prototype.__class__ = "egret.VerticalAlign"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e, a) {
            void 0 === a && (a = 0);
            d.call(this);
            this._currentCount = 0;
            this._running = !1;
            this.lastTime = 0;
            this.delay = e;
            this.repeatCount = a
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "currentCount", {
            get: function() {
                return this._currentCount
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "running", {
            get: function() {
                return this._running
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.reset = function() {
            this.stop();
            this._currentCount = 0
        };
        a.prototype.start = function() {
            this._running ||
                (this.lastTime = b.getTimer(), b.Ticker.getInstance().register(this.onEnterFrame, this), this._running = !0)
        };
        a.prototype.stop = function() {
            this._running && (b.Ticker.getInstance().unregister(this.onEnterFrame, this), this._running = !1)
        };
        a.prototype.onEnterFrame = function(e) {
            e = b.getTimer();
            e - this.lastTime > this.delay && (this.lastTime = e, this._currentCount++, b.TimerEvent.dispatchTimerEvent(this, b.TimerEvent.TIMER), 0 < this.repeatCount && this._currentCount >= this.repeatCount && (this.stop(), b.TimerEvent.dispatchTimerEvent(this,
                b.TimerEvent.TIMER_COMPLETE)))
        };
        return a
    }(b.EventDispatcher);
    b.Timer = c;
    c.prototype.__class__ = "egret.Timer"
})(egret || (egret = {}));
(function(b) {
    function c(b) {
        b = b.prototype ? b.prototype : Object.getPrototypeOf(b);
        if (b.hasOwnProperty("__class__")) return b.__class__;
        var a = b.constructor.toString(),
            e = a.indexOf("("),
            a = a.substring(9, e);
        Object.defineProperty(b, "__class__", {
            value: a,
            enumerable: !1,
            writable: !0
        });
        return a
    }
    b.getQualifiedClassName = c;
    b.getQualifiedSuperclassName = function(b) {
        b = b.prototype ? b.prototype : Object.getPrototypeOf(b);
        if (b.hasOwnProperty("__superclass__")) return b.__superclass__;
        var a = Object.getPrototypeOf(b);
        if (null == a) return null;
        a = c(a.constructor);
        if (!a) return null;
        Object.defineProperty(b, "__superclass__", {
            value: a,
            enumerable: !1,
            writable: !0
        });
        return a
    }
})(egret || (egret = {}));
(function(b) {
    var c = {};
    b.getDefinitionByName = function(b) {
        if (!b) return null;
        var a = c[b];
        if (a) return a;
        for (var e = b.split("."), k = e.length, a = __global, q = 0; q < k; q++)
            if (a = a[e[q]], !a) return null;
        return c[b] = a
    }
})(egret || (egret = {}));
var __global = __global || this;
(function(b) {
    function c(e) {
        for (var a in d) {
            var b = d[a];
            b.delay -= e;
            0 >= b.delay && (b.listener.apply(b.thisObject, b.params), delete d[a])
        }
    }
    var d = {},
        a = 0;
    b.setTimeout = function(e, k, q) {
        for (var h = [], g = 3; g < arguments.length; g++) h[g - 3] = arguments[g];
        h = {
            listener: e,
            thisObject: k,
            delay: q,
            params: h
        };
        0 == a && b.Ticker.getInstance().register(c, null);
        a++;
        d[a] = h;
        return a
    };
    b.clearTimeout = function(e) {
        delete d[e]
    }
})(egret || (egret = {}));
(function(b) {
    b.hasDefinition = function(c) {
        return b.getDefinitionByName(c) ? !0 : !1
    }
})(egret || (egret = {}));
(function(b) {
    b.toColorString = function(b) {
        if (isNaN(b) || 0 > b) b = 0;
        16777215 < b && (b = 16777215);
        for (b = b.toString(16).toUpperCase(); 6 > b.length;) b = "0" + b;
        return "#" + b
    }
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e, a, b, c, g, f) {
            void 0 === e && (e = 1);
            void 0 === a && (a = 0);
            void 0 === b && (b = 0);
            void 0 === c && (c = 1);
            void 0 === g && (g = 0);
            void 0 === f && (f = 0);
            d.call(this);
            this.a = e;
            this.b = a;
            this.c = b;
            this.d = c;
            this.tx = g;
            this.ty = f
        }
        __extends(a, d);
        a.prototype.prepend = function(e, a, b, d, c, f) {
            var l = this.tx;
            if (1 != e || 0 != a || 0 != b || 1 != d) {
                var m = this.a,
                    n = this.c;
                this.a = m * e + this.b * b;
                this.b = m * a + this.b * d;
                this.c = n * e + this.d * b;
                this.d = n * a + this.d * d
            }
            this.tx = l * e + this.ty * b + c;
            this.ty = l * a + this.ty * d + f;
            return this
        };
        a.prototype.append =
            function(e, a, b, d, c, f) {
                var l = this.a,
                    m = this.b,
                    n = this.c,
                    p = this.d;
                if (1 != e || 0 != a || 0 != b || 1 != d) this.a = e * l + a * n, this.b = e * m + a * p, this.c = b * l + d * n, this.d = b * m + d * p;
                this.tx = c * l + f * n + this.tx;
                this.ty = c * m + f * p + this.ty;
                return this
            };
        a.prototype.prependTransform = function(e, a, d, c, g, f, l, m, n) {
            if (g % 360) {
                var p = b.NumberUtils.cos(g);
                g = b.NumberUtils.sin(g)
            } else p = 1, g = 0; if (m || n) this.tx -= m, this.ty -= n;
            f || l ? (this.prepend(p * d, g * d, -g * c, p * c, 0, 0), this.prepend(b.NumberUtils.cos(l), b.NumberUtils.sin(l), -b.NumberUtils.sin(f), b.NumberUtils.cos(f),
                e, a)) : this.prepend(p * d, g * d, -g * c, p * c, e, a);
            return this
        };
        a.prototype.appendTransform = function(e, a, d, c, g, f, l, m, n) {
            if (g % 360) {
                var p = b.NumberUtils.cos(g);
                g = b.NumberUtils.sin(g)
            } else p = 1, g = 0;
            f || l ? (this.append(b.NumberUtils.cos(l), b.NumberUtils.sin(l), -b.NumberUtils.sin(f), b.NumberUtils.cos(f), e, a), this.append(p * d, g * d, -g * c, p * c, 0, 0)) : this.append(p * d, g * d, -g * c, p * c, e, a);
            if (m || n) this.tx -= m * this.a + n * this.c, this.ty -= m * this.b + n * this.d;
            return this
        };
        a.prototype.rotate = function(e) {
            var a = Math.cos(e);
            e = Math.sin(e);
            var b =
                this.a,
                d = this.c,
                c = this.tx;
            this.a = b * a - this.b * e;
            this.b = b * e + this.b * a;
            this.c = d * a - this.d * e;
            this.d = d * e + this.d * a;
            this.tx = c * a - this.ty * e;
            this.ty = c * e + this.ty * a;
            return this
        };
        a.prototype.skew = function(e, a) {
            this.append(b.NumberUtils.cos(a), b.NumberUtils.sin(a), -b.NumberUtils.sin(e), b.NumberUtils.cos(e), 0, 0);
            return this
        };
        a.prototype.scale = function(e, a) {
            this.a *= e;
            this.d *= a;
            this.c *= e;
            this.b *= a;
            this.tx *= e;
            this.ty *= a;
            return this
        };
        a.prototype.translate = function(e, a) {
            this.tx += e;
            this.ty += a;
            return this
        };
        a.prototype.identity =
            function() {
                this.a = this.d = 1;
                this.b = this.c = this.tx = this.ty = 0;
                return this
            };
        a.prototype.identityMatrix = function(e) {
            this.a = e.a;
            this.b = e.b;
            this.c = e.c;
            this.d = e.d;
            this.tx = e.tx;
            this.ty = e.ty;
            return this
        };
        a.prototype.invert = function() {
            var e = this.a,
                a = this.b,
                b = this.c,
                d = this.d,
                c = this.tx,
                f = e * d - a * b;
            this.a = d / f;
            this.b = -a / f;
            this.c = -b / f;
            this.d = e / f;
            this.tx = (b * this.ty - d * c) / f;
            this.ty = -(e * this.ty - a * c) / f;
            return this
        };
        a.transformCoords = function(e, a, d) {
            var c = b.Point.identity;
            c.x = e.a * a + e.c * d + e.tx;
            c.y = e.d * d + e.b * a + e.ty;
            return c
        };
        a.prototype.toArray = function(e) {
            this.array || (this.array = new Float32Array(9));
            e ? (this.array[0] = this.a, this.array[1] = this.b, this.array[2] = 0, this.array[3] = this.c, this.array[4] = this.d, this.array[5] = 0, this.array[6] = this.tx, this.array[7] = this.ty) : (this.array[0] = this.a, this.array[1] = this.b, this.array[2] = this.tx, this.array[3] = this.c, this.array[4] = this.d, this.array[5] = this.ty, this.array[6] = 0, this.array[7] = 0);
            this.array[8] = 1;
            return this.array
        };
        a.identity = new a;
        a.DEG_TO_RAD = Math.PI / 180;
        return a
    }(b.HashObject);
    b.Matrix = c;
    c.prototype.__class__ = "egret.Matrix"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(e, a) {
            void 0 === e && (e = 0);
            void 0 === a && (a = 0);
            b.call(this);
            this.x = e;
            this.y = a
        }
        __extends(a, b);
        a.prototype.clone = function() {
            return new a(this.x, this.y)
        };
        a.prototype.equals = function(e) {
            return this.x == e.x && this.y == e.y
        };
        a.distance = function(e, a) {
            return Math.sqrt((e.x - a.x) * (e.x - a.x) + (e.y - a.y) * (e.y - a.y))
        };
        a.identity = new a(0, 0);
        return a
    }(b.HashObject);
    b.Point = c;
    c.prototype.__class__ = "egret.Point"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(e, a, q, c) {
            void 0 === e && (e = 0);
            void 0 === a && (a = 0);
            void 0 === q && (q = 0);
            void 0 === c && (c = 0);
            b.call(this);
            this.x = e;
            this.y = a;
            this.width = q;
            this.height = c
        }
        __extends(a, b);
        Object.defineProperty(a.prototype, "right", {
            get: function() {
                return this.x + this.width
            },
            set: function(e) {
                this.width = e - this.x
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "bottom", {
            get: function() {
                return this.y + this.height
            },
            set: function(e) {
                this.height = e - this.y
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.initialize = function(e, a, b, d) {
            this.x = e;
            this.y = a;
            this.width = b;
            this.height = d;
            return this
        };
        a.prototype.contains = function(e, a) {
            return this.x <= e && this.x + this.width >= e && this.y <= a && this.y + this.height >= a
        };
        a.prototype.intersects = function(e) {
            return Math.max(this.x, e.x) <= Math.min(this.right, e.right) && Math.max(this.y, e.y) <= Math.min(this.bottom, e.bottom)
        };
        a.prototype.setEmpty = function() {
            this.height = this.width = this.y = this.x = 0
        };
        a.prototype.clone = function() {
            return new a(this.x, this.y, this.width, this.height)
        };
        a.prototype.containsPoint = function(e) {
            return this.x < e.x && this.x + this.width > e.x && this.y < e.y && this.y + this.height > e.y ? !0 : !1
        };
        a.identity = new a(0, 0, 0, 0);
        return a
    }(b.HashObject);
    b.Rectangle = c;
    c.prototype.__class__ = "egret.Rectangle"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._isSupportDOMParser = this._xmlDict = this._parser = null;
            this._xmlDict = {};
            window.DOMParser ? (this._isSupportDOMParser = !0, this._parser = new DOMParser) : this._isSupportDOMParser = !1
        }
        __extends(a, d);
        a.getInstance = function() {
            a._instance || (a._instance = new a);
            return a._instance
        };
        a.prototype.parserXML = function(e) {
            for (var a = 0;
                "\n" == e.charAt(a) || "\t" == e.charAt(a) || "\r" == e.charAt(a) || " " == e.charAt(a);) a++;
            0 != a && (e = e.substring(a, e.length));
            this._isSupportDOMParser ?
                a = this._parser.parseFromString(e, "text/xml") : (a = new ActiveXObject("Microsoft.XMLDOM"), a.async = "false", a.loadXML(e));
            null == a && b.Logger.infoWithErrorId(1015);
            return a
        };
        a._instance = null;
        return a
    }(b.HashObject);
    b.SAXParser = c;
    c.prototype.__class__ = "egret.SAXParser"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(e) {
        function k() {
            e.call(this);
            this._designHeight = this._designWidth = 0;
            this._scaleY = this._scaleX = 1;
            this._stageHeight = this._stageWidth = this._offSetY = 0
        }
        __extends(k, e);
        k.getInstance = function() {
            null == k.instance && (a.initialize(), k.instance = new k);
            return k.instance
        };
        k.prototype.setDesignSize = function(e, a, k) {
            this._designWidth = e;
            this._designHeight = a;
            k && (b.Logger.warningWithErrorId(1001), this._setResolutionPolicy(k))
        };
        k.prototype._setResolutionPolicy = function(e) {
            this._resolutionPolicy =
                e;
            e.init(this);
            e._apply(this, this._designWidth, this._designHeight)
        };
        k.prototype.getScaleX = function() {
            return this._scaleX
        };
        k.prototype.getScaleY = function() {
            return this._scaleY
        };
        k.prototype.getOffSetY = function() {
            return this._offSetY
        };
        k.canvas_name = "egretCanvas";
        k.canvas_div_name = "gameDiv";
        return k
    }(b.HashObject);
    b.StageDelegate = c;
    c.prototype.__class__ = "egret.StageDelegate";
    var d = function() {
        function e(a, k) {
            this._containerStrategy = a;
            this._contentStrategy = k
        }
        e.prototype.init = function(e) {
            this._containerStrategy.init(e);
            this._contentStrategy.init(e)
        };
        e.prototype._apply = function(e, a, k) {
            this._containerStrategy._apply(e, a, k);
            this._contentStrategy._apply(e, a, k)
        };
        return e
    }();
    b.ResolutionPolicy = d;
    d.prototype.__class__ = "egret.ResolutionPolicy";
    var a = function() {
        function a() {}
        a.initialize = function() {
            a.EQUAL_TO_FRAME = new e
        };
        a.prototype.init = function(e) {};
        a.prototype._apply = function(e, a, k) {};
        a.prototype._setupContainer = function() {
            var e = document.body,
                a;
            e && (a = e.style) && (a.paddingTop = a.paddingTop || "0px", a.paddingRight = a.paddingRight ||
                "0px", a.paddingBottom = a.paddingBottom || "0px", a.paddingLeft = a.paddingLeft || "0px", a.borderTop = a.borderTop || "0px", a.borderRight = a.borderRight || "0px", a.borderBottom = a.borderBottom || "0px", a.borderLeft = a.borderLeft || "0px", a.marginTop = a.marginTop || "0px", a.marginRight = a.marginRight || "0px", a.marginBottom = a.marginBottom || "0px", a.marginLeft = a.marginLeft || "0px")
        };
        return a
    }();
    b.ContainerStrategy = a;
    a.prototype.__class__ = "egret.ContainerStrategy";
    var e = function(e) {
        function a() {
            e.apply(this, arguments)
        }
        __extends(a,
            e);
        a.prototype._apply = function(e) {
            this._setupContainer()
        };
        return a
    }(a);
    b.EqualToFrame = e;
    e.prototype.__class__ = "egret.EqualToFrame";
    d = function() {
        function e() {}
        e.prototype.init = function(e) {};
        e.prototype._apply = function(e, a, k) {};
        e.prototype.setEgretSize = function(e, a, k, d, q, n) {
            void 0 === n && (n = 0);
            b.StageDelegate.getInstance()._stageWidth = Math.round(e);
            b.StageDelegate.getInstance()._stageHeight = Math.round(a);
            e = document.getElementById(c.canvas_div_name);
            e.style.width = k + "px";
            e.style.height = d + "px";
            e.style.top =
                n + "px"
        };
        e.prototype._getClientWidth = function() {
            return document.documentElement.clientWidth
        };
        e.prototype._getClientHeight = function() {
            return document.documentElement.clientHeight
        };
        return e
    }();
    b.ContentStrategy = d;
    d.prototype.__class__ = "egret.ContentStrategy";
    var k = function(e) {
        function a(k) {
            void 0 === k && (k = 0);
            e.call(this);
            this.minWidth = NaN;
            this.minWidth = k
        }
        __extends(a, e);
        a.prototype._apply = function(e, a, k) {
            a = this._getClientWidth();
            var b = this._getClientHeight(),
                d = b / k,
                q = a / d,
                c = 1;
            0 != this.minWidth && (c = Math.min(1,
                q / this.minWidth));
            this.setEgretSize(q / c, k, a, b * c);
            e._scaleX = d * c;
            e._scaleY = d * c
        };
        return a
    }(d);
    b.FixedHeight = k;
    k.prototype.__class__ = "egret.FixedHeight";
    k = function(e) {
        function a(k) {
            void 0 === k && (k = 0);
            e.call(this);
            this.minHeight = NaN;
            this.minHeight = k
        }
        __extends(a, e);
        a.prototype._apply = function(e, a, k) {
            k = this._getClientWidth();
            var b = this._getClientHeight(),
                d = k / a,
                q = b / d,
                c = 1;
            0 != this.minHeight && (c = Math.min(1, q / this.minHeight));
            this.setEgretSize(a, q / c, k * c, b, k * (1 - c) / 2);
            e._scaleX = d * c;
            e._scaleY = d * c
        };
        return a
    }(d);
    b.FixedWidth =
        k;
    k.prototype.__class__ = "egret.FixedWidth";
    k = function(e) {
        function a(k, b) {
            e.call(this);
            this.width = k;
            this.height = b
        }
        __extends(a, e);
        a.prototype._apply = function(e, a, k) {
            k = this.width;
            var b = this.height,
                d = k / a;
            this.setEgretSize(a, b / d, k, b);
            e._scaleX = d;
            e._scaleY = d
        };
        return a
    }(d);
    b.FixedSize = k;
    k.prototype.__class__ = "egret.FixedSize";
    k = function(e) {
        function a() {
            e.call(this)
        }
        __extends(a, e);
        a.prototype._apply = function(e, a, k) {
            this.setEgretSize(a, k, a, k, Math.floor((a - a) / 2));
            e._scaleX = 1;
            e._scaleY = 1
        };
        return a
    }(d);
    b.NoScale =
        k;
    k.prototype.__class__ = "egret.NoScale";
    k = function(e) {
        function a() {
            e.call(this)
        }
        __extends(a, e);
        a.prototype._apply = function(e, a, k) {
            var b = this._getClientWidth(),
                d = this._getClientHeight(),
                q = b,
                c = d,
                h = q / a < c / k ? q / a : c / k,
                q = a * h,
                c = k * h,
                b = Math.floor((b - q) / 2);
            e._offSetY = Math.floor((d - c) / 2);
            this.setEgretSize(a, k / 1, 1 * q, c, b, e._offSetY);
            e._scaleX = 1 * h;
            e._scaleY = 1 * h
        };
        return a
    }(d);
    b.ShowAll = k;
    k.prototype.__class__ = "egret.ShowAll";
    d = function(e) {
        function a() {
            e.call(this)
        }
        __extends(a, e);
        a.prototype._apply = function(e, a, k) {
            var b =
                this._getClientWidth(),
                d = this._getClientHeight(),
                b = b / a,
                d = d / k;
            this.setEgretSize(a, k, a * b, k * d);
            e._scaleX = b;
            e._scaleY = d
        };
        return a
    }(d);
    b.FullScreen = d;
    d.prototype.__class__ = "egret.FullScreen"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._originalData = {};
            this._drawAreaList = []
        }
        __extends(a, d);
        a.getInstance = function() {
            null == a.instance && (a.instance = new a);
            return a.instance
        };
        a.prototype.addDrawArea = function(e) {
            this._drawAreaList.push(e)
        };
        a.prototype.clearDrawArea = function() {
            this._drawAreaList = []
        };
        a.prototype.drawImage = function(e, k, d, c, g, f, l, m, n, p, r) {
            void 0 === r && (r = void 0);
            l = l || 0;
            m = m || 0;
            var t = k._texture_to_render;
            if (null != t && 0 != f && 0 != g && 0 != n && 0 != p) {
                var s = b.MainContext.instance.rendererContext._texture_scale_factor;
                g /= s;
                f /= s;
                if (0 != this._drawAreaList.length && b.MainContext.instance.rendererContext._cacheCanvasContext) {
                    s = b.DisplayObject.getTransformBounds(k._getSize(a.identityRectangle), k._worldTransform);
                    k._worldBounds.initialize(s.x, s.y, s.width, s.height);
                    s = this._originalData;
                    s.sourceX = d;
                    s.sourceY = c;
                    s.sourceWidth = g;
                    s.sourceHeight = f;
                    s.destX = l;
                    s.destY = m;
                    s.destWidth = n;
                    s.destHeight = p;
                    for (var u = this.getDrawAreaList(), w = 0; w < u.length; w++)
                        if (!this.ignoreRender(k, u[w], s.destX, s.destY)) {
                            e.drawImage(t, d, c, g, f, l, m, n, p, r);
                            break
                        }
                } else e.drawImage(t, d, c, g, f, l, m, n, p, r)
            }
        };
        a.prototype.ignoreRender = function(e, a, b, d) {
            var c = e._worldBounds;
            b *= e._worldTransform.a;
            d *= e._worldTransform.d;
            return c.x + c.width + b <= a.x || c.x + b >= a.x + a.width || c.y + c.height + d <= a.y || c.y + d >= a.y + a.height ? !0 : !1
        };
        a.prototype.getDrawAreaList = function() {
            var e;
            0 == this._drawAreaList.length ? (this._defaultDrawAreaList || (this._defaultDrawAreaList = [new b.Rectangle(0, 0, b.MainContext.instance.stage.stageWidth, b.MainContext.instance.stage.stageHeight)], b.MainContext.instance.stage.addEventListener(b.Event.RESIZE,
                this.onResize, this)), e = this._defaultDrawAreaList) : e = this._drawAreaList;
            return e
        };
        a.prototype.onResize = function() {
            b.MainContext.instance.stage.removeEventListener(b.Event.RESIZE, this.onResize, this);
            this._defaultDrawAreaList = null
        };
        a.identityRectangle = new b.Rectangle;
        return a
    }(b.HashObject);
    b.RenderFilter = c;
    c.prototype.__class__ = "egret.RenderFilter"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function d() {}
        d.mapClass = function(a, e, k) {
            void 0 === k && (k = "");
            a = this.getKey(a) + "#" + k;
            this.mapClassDic[a] = e
        };
        d.getKey = function(a) {
            return "string" == typeof a ? a : b.getQualifiedClassName(a)
        };
        d.mapValue = function(a, e, k) {
            void 0 === k && (k = "");
            a = this.getKey(a) + "#" + k;
            this.mapValueDic[a] = e
        };
        d.hasMapRule = function(a, e) {
            void 0 === e && (e = "");
            var k = this.getKey(a) + "#" + e;
            return this.mapValueDic[k] || this.mapClassDic[k] ? !0 : !1
        };
        d.getInstance = function(a, e) {
            void 0 === e && (e = "");
            var k = this.getKey(a) + "#" +
                e;
            if (this.mapValueDic[k]) return this.mapValueDic[k];
            var d = this.mapClassDic[k];
            if (d) return d = new d, this.mapValueDic[k] = d, delete this.mapClassDic[k], d;
            throw Error(b.getString(1028, k));
        };
        d.mapClassDic = {};
        d.mapValueDic = {};
        return d
    }();
    b.Injector = c;
    c.prototype.__class__ = "egret.Injector"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        return function() {
            this.type = null
        }
    }();
    b.Filter = c;
    c.prototype.__class__ = "egret.Filter"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(e, a) {
            b.call(this);
            this.blurX = e;
            this.blurY = a;
            this.type = "blur"
        }
        __extends(a, b);
        return a
    }(b.Filter);
    b.BlurFilter = c;
    c.prototype.__class__ = "egret.BlurFilter"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.NORMAL = "normal";
        b.ADD = "add";
        b.ERASE = "erase";
        b.ERASE_REVERSE = "erase_reverse";
        return b
    }();
    b.BlendMode = c;
    c.prototype.__class__ = "egret.BlendMode"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this.__hack_local_matrix = null;
            this._sizeDirty = this._normalDirty = !0;
            this._parent = this._texture_to_render = this.name = this._sizeChangeCallTarget = this._sizeChangeCallBack = null;
            this._y = this._x = 0;
            this._scaleY = this._scaleX = 1;
            this._anchorY = this._anchorX = this._anchorOffsetY = this._anchorOffsetX = 0;
            this._visible = !0;
            this._rotation = 0;
            this._alpha = 1;
            this._skewY = this._skewX = 0;
            this._touchEnabled = !1;
            this._scrollRect = this.blendMode = null;
            this._explicitHeight = this._explicitWidth =
                NaN;
            this._hasHeightSet = this._hasWidthSet = !1;
            this._worldBounds = this.mask = null;
            this.worldAlpha = 1;
            this.needDraw = this._isContainer = !1;
            this._hitTestPointTexture = null;
            this._rectH = this._rectW = 0;
            this._stage = null;
            this._cacheAsBitmap = !1;
            this.renderTexture = null;
            this._cacheDirty = !1;
            this._filter = this._colorTransform = null;
            this._worldTransform = new b.Matrix;
            this._worldBounds = new b.Rectangle(0, 0, 0, 0);
            this._cacheBounds = new b.Rectangle(0, 0, 0, 0)
        }
        __extends(a, d);
        a.prototype._setDirty = function() {
            this._normalDirty = !0
        };
        a.prototype.getDirty =
            function() {
                return this._normalDirty || this._sizeDirty
            };
        a.prototype._setParentSizeDirty = function() {
            var e = this._parent;
            !e || e._hasWidthSet || e._hasHeightSet || e._setSizeDirty()
        };
        a.prototype._setSizeDirty = function() {
            this._sizeDirty || (this._sizeDirty = !0, this._setDirty(), this._setCacheDirty(), this._setParentSizeDirty(), null != this._sizeChangeCallBack && (this._sizeChangeCallTarget == this._parent ? this._sizeChangeCallBack.call(this._sizeChangeCallTarget) : this._sizeChangeCallTarget = this._sizeChangeCallBack = null))
        };
        a.prototype._clearDirty = function() {
            this._normalDirty = !1
        };
        a.prototype._clearSizeDirty = function() {
            this._sizeDirty = !1
        };
        Object.defineProperty(a.prototype, "parent", {
            get: function() {
                return this._parent
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._parentChanged = function(e) {
            this._parent = e
        };
        Object.defineProperty(a.prototype, "x", {
            get: function() {
                return this._x
            },
            set: function(e) {
                this._setX(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setX = function(e) {
            b.NumberUtils.isNumber(e) && this._x != e && (this._x = e, this._setDirty(),
                this._setParentSizeDirty())
        };
        Object.defineProperty(a.prototype, "y", {
            get: function() {
                return this._y
            },
            set: function(e) {
                this._setY(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setY = function(e) {
            b.NumberUtils.isNumber(e) && this._y != e && (this._y = e, this._setDirty(), this._setParentSizeDirty())
        };
        Object.defineProperty(a.prototype, "scaleX", {
            get: function() {
                return this._scaleX
            },
            set: function(e) {
                b.NumberUtils.isNumber(e) && this._scaleX != e && (this._scaleX = e, this._setDirty(), this._setParentSizeDirty())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "scaleY", {
            get: function() {
                return this._scaleY
            },
            set: function(e) {
                b.NumberUtils.isNumber(e) && this._scaleY != e && (this._scaleY = e, this._setDirty(), this._setParentSizeDirty())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "anchorOffsetX", {
            get: function() {
                return this._anchorOffsetX
            },
            set: function(e) {
                b.NumberUtils.isNumber(e) && this._anchorOffsetX != e && (this._anchorOffsetX = e, this._setDirty(), this._setParentSizeDirty())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "anchorOffsetY", {
            get: function() {
                return this._anchorOffsetY
            },
            set: function(e) {
                b.NumberUtils.isNumber(e) && this._anchorOffsetY != e && (this._anchorOffsetY = e, this._setDirty(), this._setParentSizeDirty())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "anchorX", {
            get: function() {
                return this._anchorX
            },
            set: function(e) {
                this._setAnchorX(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setAnchorX = function(e) {
            b.NumberUtils.isNumber(e) && this._anchorX != e && (this._anchorX =
                e, this._setDirty(), this._setParentSizeDirty())
        };
        Object.defineProperty(a.prototype, "anchorY", {
            get: function() {
                return this._anchorY
            },
            set: function(e) {
                this._setAnchorY(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setAnchorY = function(e) {
            b.NumberUtils.isNumber(e) && this._anchorY != e && (this._anchorY = e, this._setDirty(), this._setParentSizeDirty())
        };
        Object.defineProperty(a.prototype, "visible", {
            get: function() {
                return this._visible
            },
            set: function(e) {
                this._setVisible(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setVisible =
            function(e) {
                this._visible != e && (this._visible = e, this._setSizeDirty())
            };
        Object.defineProperty(a.prototype, "rotation", {
            get: function() {
                return this._rotation
            },
            set: function(e) {
                b.NumberUtils.isNumber(e) && this._rotation != e && (this._rotation = e, this._setDirty(), this._setParentSizeDirty())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "alpha", {
            get: function() {
                return this._alpha
            },
            set: function(e) {
                b.NumberUtils.isNumber(e) && this._alpha != e && (this._alpha = e, this._setDirty(), this._setCacheDirty())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "skewX", {
            get: function() {
                return this._skewX
            },
            set: function(e) {
                b.NumberUtils.isNumber(e) && this._skewX != e && (this._skewX = e, this._setDirty(), this._setParentSizeDirty())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "skewY", {
            get: function() {
                return this._skewY
            },
            set: function(e) {
                b.NumberUtils.isNumber(e) && this._skewY != e && (this._skewY = e, this._setDirty(), this._setParentSizeDirty())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype,
            "touchEnabled", {
                get: function() {
                    return this._touchEnabled
                },
                set: function(e) {
                    this._setTouchEnabled(e)
                },
                enumerable: !0,
                configurable: !0
            });
        a.prototype._setTouchEnabled = function(e) {
            this._touchEnabled = e
        };
        Object.defineProperty(a.prototype, "scrollRect", {
            get: function() {
                return this._scrollRect
            },
            set: function(e) {
                this._setScrollRect(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setScrollRect = function(e) {
            this._scrollRect = e;
            this._setSizeDirty()
        };
        Object.defineProperty(a.prototype, "measuredWidth", {
            get: function() {
                return this._measureBounds().width
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "measuredHeight", {
            get: function() {
                return this._measureBounds().height
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "explicitWidth", {
            get: function() {
                return this._explicitWidth
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "explicitHeight", {
            get: function() {
                return this._explicitHeight
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "width", {
            get: function() {
                return this._getWidth()
            },
            set: function(e) {
                this._setWidth(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._getWidth = function() {
            return this._getSize(b.Rectangle.identity).width
        };
        Object.defineProperty(a.prototype, "height", {
            get: function() {
                return this._getHeight()
            },
            set: function(e) {
                this._setHeight(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._getHeight = function() {
            return this._getSize(b.Rectangle.identity).height
        };
        a.prototype._setWidth = function(e) {
            this._setSizeDirty();
            this._setCacheDirty();
            this._explicitWidth = e;
            this._hasWidthSet =
                b.NumberUtils.isNumber(e)
        };
        a.prototype._setHeight = function(e) {
            this._setSizeDirty();
            this._setCacheDirty();
            this._explicitHeight = e;
            this._hasHeightSet = b.NumberUtils.isNumber(e)
        };
        a.prototype._draw = function(e) {
            if (this._visible && !this.drawCacheTexture(e)) {
                var a = b.MainContext.__use_new_draw && this._isContainer;
                this._filter && !a && e.setGlobalFilter(this._filter);
                this._colorTransform && !a && e.setGlobalColorTransform(this._colorTransform.matrix);
                e.setAlpha(this.worldAlpha, this.blendMode);
                e.setTransform(this._worldTransform);
                var d = this.mask || this._scrollRect;
                d && !a && e.pushMask(d);
                this._render(e);
                d && !a && e.popMask();
                this._colorTransform && !a && e.setGlobalColorTransform(null);
                this._filter && !a && e.setGlobalFilter(null)
            }
            this.destroyCacheBounds()
        };
        a.prototype._setGlobalFilter = function(e) {
            e.setGlobalFilter(this._filter)
        };
        a.prototype._removeGlobalFilter = function(e) {
            e.setGlobalFilter(null)
        };
        a.prototype._setGlobalColorTransform = function(e) {
            e.setGlobalColorTransform(this._colorTransform.matrix)
        };
        a.prototype._removeGlobalColorTransform =
            function(e) {
                e.setGlobalColorTransform(null)
            };
        a.prototype._pushMask = function(e) {
            e.setTransform(this._worldTransform);
            var a = this.mask || this._scrollRect;
            a && e.pushMask(a)
        };
        a.prototype._popMask = function(e) {
            e.popMask()
        };
        a.prototype.drawCacheTexture = function(e) {
            if (!1 == this._cacheAsBitmap) return !1;
            var a = this.getBounds(b.Rectangle.identity),
                d = b.MainContext.instance.rendererContext._texture_scale_factor;
            if (this._cacheDirty || null == this._texture_to_render || Math.round(a.width) != Math.round(this._texture_to_render._sourceWidth *
                d) || Math.round(a.height) != Math.round(this._texture_to_render._sourceHeight * d)) this._cacheDirty = !this._makeBitmapCache();
            if (null == this._texture_to_render) return !1;
            var c = this._texture_to_render,
                a = c._offsetX,
                d = c._offsetY,
                g = c._textureWidth,
                c = c._textureHeight;
            this._updateTransform();
            e.setAlpha(this.worldAlpha, this.blendMode);
            e.setTransform(this._worldTransform);
            b.RenderFilter.getInstance().drawImage(e, this, 0, 0, g, c, a, d, g, c);
            return !0
        };
        a.prototype._updateTransform = function() {
            this._visible && (this._calculateWorldTransform(),
                "updateTransform" == b.MainContext._renderLoopPhase && (this.needDraw || this._texture_to_render || this._cacheAsBitmap) && b.RenderCommand.push(this._draw, this))
        };
        a.prototype._calculateWorldTransform = function() {
            var e = this._worldTransform,
                a = this._parent;
            e.identityMatrix(a._worldTransform);
            this._getMatrix(e);
            var b = this._scrollRect;
            b && e.append(1, 0, 0, 1, -b.x, -b.y);
            this.worldAlpha = a.worldAlpha * this._alpha
        };
        a.prototype._render = function(e) {};
        a.prototype.getBounds = function(e, a) {
            void 0 === a && (a = !0);
            var d = this._measureBounds(),
                c = this._hasWidthSet ? this._explicitWidth : d.width,
                g = this._hasHeightSet ? this._explicitHeight : d.height;
            this._rectW = d.width;
            this._rectH = d.height;
            this._clearSizeDirty();
            var f = d.x,
                d = d.y,
                l = 0,
                m = 0;
            a && (0 != this._anchorX || 0 != this._anchorY ? (l = c * this._anchorX, m = g * this._anchorY) : (l = this._anchorOffsetX, m = this._anchorOffsetY));
            this._cacheBounds.initialize(f - l, d - m, c, g);
            c = this._cacheBounds;
            e || (e = new b.Rectangle);
            return e.initialize(c.x, c.y, c.width, c.height)
        };
        a.prototype.destroyCacheBounds = function() {
            this._cacheBounds.x =
                0;
            this._cacheBounds.y = 0;
            this._cacheBounds.width = 0;
            this._cacheBounds.height = 0
        };
        a.prototype._getConcatenatedMatrix = function() {
            for (var e = a.identityMatrixForGetConcatenated.identity(), k = this; null != k;) {
                if (0 != k._anchorX || 0 != k._anchorY) {
                    var d = k._getSize(b.Rectangle.identity);
                    e.prependTransform(k._x, k._y, k._scaleX, k._scaleY, k._rotation, k._skewX, k._skewY, d.width * k._anchorX, d.height * k._anchorY)
                } else e.prependTransform(k._x, k._y, k._scaleX, k._scaleY, k._rotation, k._skewX, k._skewY, k._anchorOffsetX, k._anchorOffsetY);
                k._scrollRect && e.prepend(1, 0, 0, 1, -k._scrollRect.x, -k._scrollRect.y);
                k = k._parent
            }
            return e
        };
        a.prototype.localToGlobal = function(e, a, d) {
            void 0 === e && (e = 0);
            void 0 === a && (a = 0);
            var c = this._getConcatenatedMatrix();
            c.append(1, 0, 0, 1, e, a);
            d || (d = new b.Point);
            d.x = c.tx;
            d.y = c.ty;
            return d
        };
        a.prototype.globalToLocal = function(e, a, d) {
            void 0 === e && (e = 0);
            void 0 === a && (a = 0);
            var c = this._getConcatenatedMatrix();
            c.invert();
            c.append(1, 0, 0, 1, e, a);
            d || (d = new b.Point);
            d.x = c.tx;
            d.y = c.ty;
            return d
        };
        a.prototype.hitTest = function(e, a, d) {
            void 0 ===
                d && (d = !1);
            if (!this._visible || !d && !this._touchEnabled) return null;
            d = this.getBounds(b.Rectangle.identity, !1);
            e -= d.x;
            a -= d.y;
            return 0 <= e && e < d.width && 0 <= a && a < d.height ? this.mask || this._scrollRect ? this._scrollRect && e > this._scrollRect.x && a > this._scrollRect.y && e < this._scrollRect.x + this._scrollRect.width && a < this._scrollRect.y + this._scrollRect.height || this.mask && this.mask.x <= e && e < this.mask.x + this.mask.width && this.mask.y <= a && a < this.mask.y + this.mask.height ? this : null : this : null
        };
        a.prototype.hitTestPoint = function(e,
            a, d) {
            e = this.globalToLocal(e, a);
            return d ? (this._hitTestPointTexture || (this._hitTestPointTexture = new b.RenderTexture), d = this._hitTestPointTexture, d.drawToTexture(this), 0 != d.getPixel32(e.x - this._hitTestPointTexture._offsetX, e.y - this._hitTestPointTexture._offsetY)[3] ? !0 : !1) : !!this.hitTest(e.x, e.y, !0)
        };
        a.prototype._getMatrix = function(e) {
            e || (e = b.Matrix.identity.identity());
            var a, d;
            d = this._getOffsetPoint();
            a = d.x;
            d = d.y;
            var c = this.__hack_local_matrix;
            c ? (e.append(c.a, c.b, c.c, c.d, c.tx, c.ty), e.append(1, 0, 0, 1, -a, -d)) : e.appendTransform(this._x, this._y, this._scaleX, this._scaleY, this._rotation, this._skewX, this._skewY, a, d);
            return e
        };
        a.prototype._getSize = function(e) {
            if (this._hasHeightSet && this._hasWidthSet) return this._clearSizeDirty(), e.initialize(0, 0, this._explicitWidth, this._explicitHeight);
            this._measureSize(e);
            this._hasWidthSet && (e.width = this._explicitWidth);
            this._hasHeightSet && (e.height = this._explicitHeight);
            return e
        };
        a.prototype._measureSize = function(e) {
            this._sizeDirty ? (e = this._measureBounds(), this._rectW =
                e.width, this._rectH = e.height, this._clearSizeDirty()) : (e.width = this._rectW, e.height = this._rectH);
            e.x = 0;
            e.y = 0;
            return e
        };
        a.prototype._measureBounds = function() {
            return b.Rectangle.identity.initialize(0, 0, 0, 0)
        };
        a.prototype._getOffsetPoint = function() {
            var e = this._anchorOffsetX,
                a = this._anchorOffsetY;
            if (0 != this._anchorX || 0 != this._anchorY) a = this._getSize(b.Rectangle.identity), e = this._anchorX * a.width, a = this._anchorY * a.height;
            var d = b.Point.identity;
            d.x = e;
            d.y = a;
            return d
        };
        a.prototype._onAddToStage = function() {
            this._stage =
                b.MainContext.instance.stage;
            b.DisplayObjectContainer.__EVENT__ADD_TO_STAGE_LIST.push(this)
        };
        a.prototype._onRemoveFromStage = function() {
            b.DisplayObjectContainer.__EVENT__REMOVE_FROM_STAGE_LIST.push(this)
        };
        Object.defineProperty(a.prototype, "stage", {
            get: function() {
                return this._stage
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.addEventListener = function(e, k, c, h, g) {
            void 0 === h && (h = !1);
            void 0 === g && (g = 0);
            d.prototype.addEventListener.call(this, e, k, c, h, g);
            ((h = e == b.Event.ENTER_FRAME) || e == b.Event.RENDER) && this._insertEventBin(h ?
                a._enterFrameCallBackList : a._renderCallBackList, k, c, g, this)
        };
        a.prototype.removeEventListener = function(e, k, c, h) {
            void 0 === h && (h = !1);
            d.prototype.removeEventListener.call(this, e, k, c, h);
            ((h = e == b.Event.ENTER_FRAME) || e == b.Event.RENDER) && this._removeEventBin(h ? a._enterFrameCallBackList : a._renderCallBackList, k, c, this)
        };
        a.prototype.dispatchEvent = function(e) {
            if (!e._bubbles) return d.prototype.dispatchEvent.call(this, e);
            for (var a = [], b = this; b;) a.push(b), b = b._parent;
            e._reset();
            this._dispatchPropagationEvent(e, a);
            return !e._isDefaultPrevented
        };
        a.prototype._dispatchPropagationEvent = function(e, a, b) {
            b = a.length;
            for (var d = 1, c = b - 1; 0 <= c; c--) {
                var f = a[c];
                e._currentTarget = f;
                e._target = this;
                e._eventPhase = d;
                f._notifyListener(e);
                if (e._isPropagationStopped || e._isPropagationImmediateStopped) return
            }
            f = a[0];
            e._currentTarget = f;
            e._target = this;
            e._eventPhase = 2;
            f._notifyListener(e);
            if (!e._isPropagationStopped && !e._isPropagationImmediateStopped)
                for (d = 3, c = 1; c < b && (f = a[c], e._currentTarget = f, e._target = this, e._eventPhase = d, f._notifyListener(e), !e._isPropagationStopped && !e._isPropagationImmediateStopped); c++);
        };
        a.prototype.willTrigger = function(e) {
            for (var a = this; a;) {
                if (a.hasEventListener(e)) return !0;
                a = a._parent
            }
            return !1
        };
        Object.defineProperty(a.prototype, "cacheAsBitmap", {
            get: function() {
                return this._cacheAsBitmap
            },
            set: function(e) {
                (this._cacheAsBitmap = e) ? b.callLater(this._makeBitmapCache, this): this._texture_to_render = null
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._makeBitmapCache = function() {
            this.renderTexture || (this.renderTexture = new b.RenderTexture);
            var e = this.renderTexture.drawToTexture(this);
            this._texture_to_render = e ? this.renderTexture : null;
            return e
        };
        a.prototype._setCacheDirty = function(e) {
            void 0 === e && (e = !0);
            this._cacheDirty = e
        };
        a.getTransformBounds = function(e, a) {
            var b = e.x,
                d = e.y,
                c = e.width,
                f = e.height;
            (b || d) && a.appendTransform(0, 0, 1, 1, 0, 0, 0, -b, -d);
            var l = c * a.a,
                c = c * a.b,
                m = f * a.c,
                f = f * a.d,
                n = a.tx,
                p = a.ty,
                r = n,
                t = n,
                s = p,
                u = p;
            (b = l + n) < r ? r = b : b > t && (t = b);
            (b = l + m + n) < r ? r = b : b > t && (t = b);
            (b = m + n) < r ? r = b : b > t && (t = b);
            (d = c + p) < s ? s = d : d > u && (u = d);
            (d = c + f + p) < s ? s = d : d > u && (u = d);
            (d = f +
                p) < s ? s = d : d > u && (u = d);
            return e.initialize(r, s, t - r, u - s)
        };
        Object.defineProperty(a.prototype, "colorTransform", {
            get: function() {
                return this._colorTransform
            },
            set: function(e) {
                this._colorTransform = e
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "filter", {
            get: function() {
                return this._filter
            },
            set: function(e) {
                this._filter = e
            },
            enumerable: !0,
            configurable: !0
        });
        a.identityMatrixForGetConcatenated = new b.Matrix;
        a._enterFrameCallBackList = [];
        a._renderCallBackList = [];
        return a
    }(b.EventDispatcher);
    b.DisplayObject =
        c;
    c.prototype.__class__ = "egret.DisplayObject";
    c = function() {
        function b() {
            this.matrix = null
        }
        b.prototype.updateColor = function(a, e, k, b, d, c, f, l) {};
        return b
    }();
    b.ColorTransform = c;
    c.prototype.__class__ = "egret.ColorTransform"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._touchChildren = !0;
            this._children = [];
            this._isContainer = !0
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "touchChildren", {
            get: function() {
                return this._touchChildren
            },
            set: function(e) {
                this._touchChildren = e
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "numChildren", {
            get: function() {
                return this._children.length
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.setChildIndex = function(e, a) {
            this.doSetChildIndex(e, a)
        };
        a.prototype.doSetChildIndex =
            function(e, a) {
                var d = this._children.indexOf(e);
                0 > d && b.Logger.fatalWithErrorId(1006);
                this._children.splice(d, 1);
                0 > a || this._children.length <= a ? this._children.push(e) : this._children.splice(a, 0, e)
            };
        a.prototype.addChild = function(e) {
            var a = this._children.length;
            e._parent == this && a--;
            return this._doAddChild(e, a)
        };
        a.prototype.addChildAt = function(e, a) {
            return this._doAddChild(e, a)
        };
        a.prototype._doAddChild = function(e, k, d) {
            void 0 === d && (d = !0);
            if (e == this) return e;
            if (0 > k || k > this._children.length) return b.Logger.fatalWithErrorId(1007),
                e;
            var c = e._parent;
            if (c == this) return this.doSetChildIndex(e, k), e;
            if (c) {
                var g = c._children.indexOf(e);
                0 <= g && c._doRemoveChild(g)
            }
            this._children.splice(k, 0, e);
            e._parentChanged(this);
            d && e.dispatchEventWith(b.Event.ADDED, !0);
            if (this._stage)
                for (e._onAddToStage(), k = a.__EVENT__ADD_TO_STAGE_LIST; 0 < k.length;) c = k.shift(), d && c.dispatchEventWith(b.Event.ADDED_TO_STAGE);
            e._setDirty();
            this._setSizeDirty();
            return e
        };
        a.prototype.removeChild = function(e) {
            e = this._children.indexOf(e);
            if (0 <= e) return this._doRemoveChild(e);
            b.Logger.fatalWithErrorId(1008);
            return null
        };
        a.prototype.removeChildAt = function(e) {
            if (0 <= e && e < this._children.length) return this._doRemoveChild(e);
            b.Logger.fatalWithErrorId(1007);
            return null
        };
        a.prototype._doRemoveChild = function(e, k) {
            void 0 === k && (k = !0);
            var d = this._children,
                c = d[e];
            k && c.dispatchEventWith(b.Event.REMOVED, !0);
            if (this._stage) {
                c._onRemoveFromStage();
                for (var g = a.__EVENT__REMOVE_FROM_STAGE_LIST; 0 < g.length;) {
                    var f = g.shift();
                    k && f.dispatchEventWith(b.Event.REMOVED_FROM_STAGE);
                    f._stage = null
                }
            }
            c._parentChanged(null);
            d.splice(e, 1);
            this._setSizeDirty();
            return c
        };
        a.prototype.getChildAt = function(e) {
            if (0 <= e && e < this._children.length) return this._children[e];
            b.Logger.fatalWithErrorId(1007);
            return null
        };
        a.prototype.contains = function(e) {
            for (; e;) {
                if (e == this) return !0;
                e = e._parent
            }
            return !1
        };
        a.prototype.swapChildrenAt = function(e, a) {
            0 <= e && e < this._children.length && 0 <= a && a < this._children.length ? this._swapChildrenAt(e, a) : b.Logger.fatalWithErrorId(1007)
        };
        a.prototype.swapChildren = function(e, a) {
            var d = this._children.indexOf(e),
                c =
                this._children.indexOf(a); - 1 == d || -1 == c ? b.Logger.fatalWithErrorId(1008) : this._swapChildrenAt(d, c)
        };
        a.prototype._swapChildrenAt = function(e, a) {
            if (e != a) {
                var b = this._children,
                    d = b[e];
                b[e] = b[a];
                b[a] = d
            }
        };
        a.prototype.getChildIndex = function(e) {
            return this._children.indexOf(e)
        };
        a.prototype.removeChildren = function() {
            for (var e = this._children.length - 1; 0 <= e; e--) this._doRemoveChild(e)
        };
        a.prototype._updateTransform = function() {
            if (this._visible) {
                this._filter && b.RenderCommand.push(this._setGlobalFilter, this);
                this._colorTransform &&
                    b.RenderCommand.push(this._setGlobalColorTransform, this);
                var e = this.mask || this._scrollRect;
                e && b.RenderCommand.push(this._pushMask, this);
                d.prototype._updateTransform.call(this);
                if (!this._cacheAsBitmap || !this._texture_to_render)
                    for (var a = 0, c = this._children, h = c.length; a < h; a++) c[a]._updateTransform();
                e && b.RenderCommand.push(this._popMask, this);
                this._colorTransform && b.RenderCommand.push(this._removeGlobalColorTransform, this);
                this._filter && b.RenderCommand.push(this._removeGlobalFilter, this)
            }
        };
        a.prototype._render =
            function(e) {
                if (!b.MainContext.__use_new_draw)
                    for (var a = 0, d = this._children, c = d.length; a < c; a++) d[a]._draw(e)
            };
        a.prototype._measureBounds = function() {
            for (var e = 0, a = 0, d = 0, c = 0, g = this._children, f = g.length, l = 0; l < f; l++) {
                var m = g[l];
                if (m._visible) {
                    var n = m.getBounds(b.Rectangle.identity, !1),
                        p = n.x,
                        r = n.y,
                        t = n.width,
                        n = n.height,
                        m = m._getMatrix(),
                        m = b.DisplayObject.getTransformBounds(b.Rectangle.identity.initialize(p, r, t, n), m),
                        p = m.x,
                        r = m.y,
                        t = m.width + m.x,
                        m = m.height + m.y;
                    if (p < e || 0 == l) e = p;
                    if (t > a || 0 == l) a = t;
                    if (r < d || 0 == l) d =
                        r;
                    if (m > c || 0 == l) c = m
                }
            }
            return b.Rectangle.identity.initialize(e, d, a - e, c - d)
        };
        a.prototype.hitTest = function(e, a, c) {
            void 0 === c && (c = !1);
            var h;
            if (!this._visible) return null;
            if (this._scrollRect) {
                if (e < this._scrollRect.x || a < this._scrollRect.y || e > this._scrollRect.x + this._scrollRect.width || a > this._scrollRect.y + this._scrollRect.height) return null
            } else if (this.mask && (this.mask.x > e || e > this.mask.x + this.mask.width || this.mask.y > a || a > this.mask.y + this.mask.height)) return null;
            for (var g = this._children, f = this._touchChildren,
                l = g.length - 1; 0 <= l; l--) {
                var m = g[l],
                    n = m._getMatrix(),
                    p = m._scrollRect;
                p && n.append(1, 0, 0, 1, -p.x, -p.y);
                n.invert();
                n = b.Matrix.transformCoords(n, e, a);
                if (m = m.hitTest(n.x, n.y, !0)) {
                    if (!f) return this;
                    if (m._touchEnabled && f) return m;
                    h = this
                }
            }
            return h ? h : this._texture_to_render ? d.prototype.hitTest.call(this, e, a, c) : null
        };
        a.prototype._onAddToStage = function() {
            d.prototype._onAddToStage.call(this);
            for (var e = this._children.length, a = 0; a < e; a++) this._children[a]._onAddToStage()
        };
        a.prototype._onRemoveFromStage = function() {
            d.prototype._onRemoveFromStage.call(this);
            for (var e = this._children, a = e.length, b = 0; b < a; b++) e[b]._onRemoveFromStage()
        };
        a.prototype.getChildByName = function(e) {
            for (var a = this._children, b = a.length, d, c = 0; c < b; c++)
                if (d = a[c], d.name == e) return d;
            return null
        };
        a.__EVENT__ADD_TO_STAGE_LIST = [];
        a.__EVENT__REMOVE_FROM_STAGE_LIST = [];
        return a
    }(b.DisplayObject);
    b.DisplayObjectContainer = c;
    c.prototype.__class__ = "egret.DisplayObjectContainer"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.NO_BORDER = "noBorder";
        b.NO_SCALE = "noScale";
        b.SHOW_ALL = "showAll";
        b.EXACT_FIT = "exactFit";
        return b
    }();
    b.StageScaleMode = c;
    c.prototype.__class__ = "egret.StageScaleMode"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e, a) {
            void 0 === e && (e = 480);
            void 0 === a && (a = 800);
            d.call(this);
            this._changeSizeDispatchFlag = !0;
            this._scaleMode = "";
            this._stageHeight = this._stageWidth = NaN;
            this.touchEnabled = !0;
            this._stage = this;
            this._stageWidth = e;
            this._stageHeight = a
        }
        __extends(a, d);
        a.prototype.invalidate = function() {
            a._invalidateRenderFlag = !0
        };
        Object.defineProperty(a.prototype, "scaleMode", {
            get: function() {
                return this._scaleMode
            },
            set: function(e) {
                this._scaleMode != e && (this._scaleMode = e, this.setResolutionPolicy())
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.changeSize = function() {
            this._changeSizeDispatchFlag && (this.setResolutionPolicy(), this.dispatchEventWith(b.Event.RESIZE))
        };
        a.prototype.setResolutionPolicy = function() {
            var e = a.SCALE_MODE_ENUM[this._scaleMode];
            if (!e) throw Error(b.getString(1024));
            var k = new b.EqualToFrame,
                e = new b.ResolutionPolicy(k, e);
            b.StageDelegate.getInstance()._setResolutionPolicy(e);
            this._stageWidth = b.StageDelegate.getInstance()._stageWidth;
            this._stageHeight = b.StageDelegate.getInstance()._stageHeight
        };
        Object.defineProperty(a.prototype, "stageWidth", {
            get: function() {
                return this._stageWidth
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "stageHeight", {
            get: function() {
                return this._stageHeight
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.hitTest = function(e, a, d) {
            if (!this._touchEnabled) return null;
            var c;
            if (!this._touchChildren) return this;
            d = this._children;
            for (var g = d.length - 1; 0 <= g; g--) {
                c = d[g];
                var f = c._getMatrix(),
                    l = c._scrollRect;
                l && f.append(1, 0, 0, 1, -l.x, -l.y);
                f.invert();
                f = b.Matrix.transformCoords(f,
                    e, a);
                if ((c = c.hitTest(f.x, f.y, !0)) && c._touchEnabled) return c
            }
            return this
        };
        a.prototype.getBounds = function(e) {
            e || (e = new b.Rectangle);
            return e.initialize(0, 0, this._stageWidth, this._stageHeight)
        };
        a.prototype._updateTransform = function() {
            for (var e = 0, a = this._children.length; e < a; e++) this._children[e]._updateTransform()
        };
        Object.defineProperty(a.prototype, "focus", {
            get: function() {
                return null
            },
            enumerable: !0,
            configurable: !0
        });
        a.registerScaleMode = function(e, k, d) {
            a.SCALE_MODE_ENUM[e] && !d ? b.Logger.warningWithErrorId(1009,
                e) : a.SCALE_MODE_ENUM[e] = k
        };
        a._invalidateRenderFlag = !1;
        a.SCALE_MODE_ENUM = {};
        return a
    }(b.DisplayObjectContainer);
    b.Stage = c;
    c.prototype.__class__ = "egret.Stage"
})(egret || (egret = {}));
egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_SCALE] = new egret.NoScale;
egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.SHOW_ALL] = new egret.ShowAll;
egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.NO_BORDER] = new egret.FixedWidth;
egret.Stage.SCALE_MODE_ENUM[egret.StageScaleMode.EXACT_FIT] = new egret.FullScreen;
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e) {
            void 0 === e && (e = null);
            d.call(this);
            this._lastTouchPosition = new b.Point(0, 0);
            this._touchStartPosition = new b.Point(0, 0);
            this._scrollStarted = !1;
            this._lastTouchTime = 0;
            this._lastTouchEvent = null;
            this._velocitys = [];
            this._isVTweenPlaying = this._isHTweenPlaying = !1;
            this._vScrollTween = this._hScrollTween = null;
            this.scrollBeginThreshold = 10;
            this.scrollSpeed = 1;
            this._content = null;
            this._horizontalScrollPolicy = this._verticalScrollPolicy = "auto";
            this._scrollTop = this._scrollLeft =
                0;
            this._vCanScroll = this._hCanScroll = !1;
            this.touchBeginTimer = this.delayTouchBeginEvent = null;
            this.touchEnabled = !0;
            e && this.setContent(e)
        }
        __extends(a, d);
        a.prototype.setContent = function(e) {
            this._content !== e && (this.removeContent(), e && (this._content = e, d.prototype.addChild.call(this, e), this._addEvents()))
        };
        a.prototype.removeContent = function() {
            this._content && (this._removeEvents(), d.prototype.removeChildAt.call(this, 0));
            this._content = null
        };
        Object.defineProperty(a.prototype, "verticalScrollPolicy", {
            get: function() {
                return this._verticalScrollPolicy
            },
            set: function(e) {
                e != this._verticalScrollPolicy && (this._verticalScrollPolicy = e)
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "horizontalScrollPolicy", {
            get: function() {
                return this._horizontalScrollPolicy
            },
            set: function(e) {
                e != this._horizontalScrollPolicy && (this._horizontalScrollPolicy = e)
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "scrollLeft", {
            get: function() {
                return this._scrollLeft
            },
            set: function(e) {
                e != this._scrollLeft && (this._scrollLeft = e, this._validatePosition(!1, !0), this._updateContentPosition())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "scrollTop", {
            get: function() {
                return this._scrollTop
            },
            set: function(e) {
                e != this._scrollTop && (this._scrollTop = e, this._validatePosition(!0, !1), this._updateContentPosition())
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.setScrollPosition = function(e, a, b) {
            void 0 === b && (b = !1);
            if (!b || 0 != e || 0 != a)
                if (b || this._scrollTop != e || this._scrollLeft != a) {
                    if (b) {
                        b = this._isOnTheEdge(!0);
                        var d = this._isOnTheEdge(!1);
                        this._scrollTop +=
                            b ? e / 2 : e;
                        this._scrollLeft += d ? a / 2 : a
                    } else this._scrollTop = e, this._scrollLeft = a;
                    this._validatePosition(!0, !0);
                    this._updateContentPosition()
                }
        };
        a.prototype._isOnTheEdge = function(e) {
            void 0 === e && (e = !0);
            var a = this._scrollTop,
                b = this._scrollLeft;
            return e ? 0 > a || a > this.getMaxScrollTop() : 0 > b || b > this.getMaxScrollLeft()
        };
        a.prototype._validatePosition = function(e, a) {
            void 0 === e && (e = !1);
            void 0 === a && (a = !1);
            if (e) {
                var b = this.height,
                    d = this._getContentHeight();
                this._scrollTop = Math.max(this._scrollTop, (0 - b) / 2);
                this._scrollTop =
                    Math.min(this._scrollTop, d > b ? d - b / 2 : b / 2)
            }
            a && (b = this.width, d = this._getContentWidth(), this._scrollLeft = Math.max(this._scrollLeft, (0 - b) / 2), this._scrollLeft = Math.min(this._scrollLeft, d > b ? d - b / 2 : b / 2))
        };
        a.prototype._setWidth = function(e) {
            this._explicitWidth != e && (d.prototype._setWidth.call(this, e), this._updateContentPosition())
        };
        a.prototype._setHeight = function(e) {
            this._explicitHeight != e && (d.prototype._setHeight.call(this, e), this._updateContentPosition())
        };
        a.prototype._updateContentPosition = function() {
            var e =
                this.getBounds(b.Rectangle.identity);
            this.scrollRect = new b.Rectangle(this._scrollLeft, this._scrollTop, e.width, e.height);
            this.dispatchEvent(new b.Event(b.Event.CHANGE))
        };
        a.prototype._checkScrollPolicy = function() {
            var e = this.__checkScrollPolicy(this._horizontalScrollPolicy, this._getContentWidth(), this.width);
            this._hCanScroll = e;
            var a = this.__checkScrollPolicy(this._verticalScrollPolicy, this._getContentHeight(), this.height);
            this._vCanScroll = a;
            return e || a
        };
        a.prototype.__checkScrollPolicy = function(e, a, b) {
            return "on" ==
                e ? !0 : "off" == e ? !1 : a > b
        };
        a.prototype._addEvents = function() {
            this.addEventListener(b.TouchEvent.TOUCH_BEGIN, this._onTouchBegin, this);
            this.addEventListener(b.TouchEvent.TOUCH_BEGIN, this._onTouchBeginCapture, this, !0);
            this.addEventListener(b.TouchEvent.TOUCH_END, this._onTouchEndCapture, this, !0)
        };
        a.prototype._removeEvents = function() {
            this.removeEventListener(b.TouchEvent.TOUCH_BEGIN, this._onTouchBegin, this);
            this.removeEventListener(b.TouchEvent.TOUCH_BEGIN, this._onTouchBeginCapture, this, !0);
            this.removeEventListener(b.TouchEvent.TOUCH_END,
                this._onTouchEndCapture, this, !0)
        };
        a.prototype._onTouchBegin = function(e) {
            !e._isDefaultPrevented && this._checkScrollPolicy() && (this._touchStartPosition.x = e.stageX, this._touchStartPosition.y = e.stageY, (this._isHTweenPlaying || this._isVTweenPlaying) && this._onScrollFinished(), this.stage.addEventListener(b.TouchEvent.TOUCH_MOVE, this._onTouchMove, this), this.stage.addEventListener(b.TouchEvent.TOUCH_END, this._onTouchEnd, this), this.stage.addEventListener(b.TouchEvent.LEAVE_STAGE, this._onTouchEnd, this), this.addEventListener(b.Event.ENTER_FRAME,
                this._onEnterFrame, this), this._logTouchEvent(e), e.preventDefault())
        };
        a.prototype._onTouchBeginCapture = function(e) {
            var a = this._checkScrollPolicy();
            if (a) {
                for (var d = e.target; d != this;) {
                    if ("_checkScrollPolicy" in d && (a = d._checkScrollPolicy())) return;
                    d = d.parent
                }
                e.stopPropagation();
                this.delayTouchBeginEvent = this.cloneTouchEvent(e);
                this.touchBeginTimer || (this.touchBeginTimer = new b.Timer(100, 1), this.touchBeginTimer.addEventListener(b.TimerEvent.TIMER_COMPLETE, this._onTouchBeginTimer, this));
                this.touchBeginTimer.start();
                this._onTouchBegin(e)
            }
        };
        a.prototype._onTouchEndCapture = function(e) {
            this.delayTouchBeginEvent && this._onTouchBeginTimer()
        };
        a.prototype._onTouchBeginTimer = function() {
            this.touchBeginTimer.stop();
            var e = this.delayTouchBeginEvent;
            this.delayTouchBeginEvent = null;
            this.stage && this.dispatchPropagationEvent(e)
        };
        a.prototype.dispatchPropagationEvent = function(e) {
            for (var a = [], b = e._target, d = 0; b;) b == this && (d = a.length), a.push(b), b = b.parent;
            b = a.slice(0, d);
            b = b.reverse();
            a = b.concat(a);
            this._dispatchPropagationEvent(e, a,
                d)
        };
        a.prototype._dispatchPropagationEvent = function(e, a, b) {
            for (var d = a.length, c = 0; c < d; c++) {
                var f = a[c];
                e._currentTarget = f;
                e._eventPhase = c < b ? 1 : c == b ? 2 : 3;
                f._notifyListener(e);
                if (e._isPropagationStopped || e._isPropagationImmediateStopped) break
            }
        };
        a.prototype._onTouchMove = function(e) {
            if (this._lastTouchPosition.x != e.stageX || this._lastTouchPosition.y != e.stageY) {
                if (!this._scrollStarted) {
                    var a = e.stageX - this._touchStartPosition.x,
                        b = e.stageY - this._touchStartPosition.y;
                    if (Math.sqrt(a * a + b * b) < this.scrollBeginThreshold) {
                        this._logTouchEvent(e);
                        return
                    }
                }
                this._scrollStarted = !0;
                this.delayTouchBeginEvent && (this.delayTouchBeginEvent = null, this.touchBeginTimer.stop());
                this.touchChildren = !1;
                a = this._getPointChange(e);
                this.setScrollPosition(a.y, a.x, !0);
                this._calcVelocitys(e);
                this._logTouchEvent(e)
            }
        };
        a.prototype._onTouchEnd = function(e) {
            this.touchChildren = !0;
            this._scrollStarted = !1;
            b.MainContext.instance.stage.removeEventListener(b.TouchEvent.TOUCH_MOVE, this._onTouchMove, this);
            b.MainContext.instance.stage.removeEventListener(b.TouchEvent.TOUCH_END, this._onTouchEnd,
                this);
            b.MainContext.instance.stage.removeEventListener(b.TouchEvent.LEAVE_STAGE, this._onTouchEnd, this);
            this.removeEventListener(b.Event.ENTER_FRAME, this._onEnterFrame, this);
            this._moveAfterTouchEnd()
        };
        a.prototype._onEnterFrame = function(e) {
            e = b.getTimer();
            100 < e - this._lastTouchTime && 300 > e - this._lastTouchTime && this._calcVelocitys(this._lastTouchEvent)
        };
        a.prototype._logTouchEvent = function(e) {
            this._lastTouchPosition.x = e.stageX;
            this._lastTouchPosition.y = e.stageY;
            this._lastTouchEvent = this.cloneTouchEvent(e);
            this._lastTouchTime = b.getTimer()
        };
        a.prototype._getPointChange = function(e) {
            return {
                x: !1 === this._hCanScroll ? 0 : this._lastTouchPosition.x - e.stageX,
                y: !1 === this._vCanScroll ? 0 : this._lastTouchPosition.y - e.stageY
            }
        };
        a.prototype._calcVelocitys = function(e) {
            var a = b.getTimer();
            if (0 == this._lastTouchTime) this._lastTouchTime = a;
            else {
                var d = this._getPointChange(e),
                    a = a - this._lastTouchTime;
                d.x /= a;
                d.y /= a;
                this._velocitys.push(d);
                5 < this._velocitys.length && this._velocitys.shift();
                this._lastTouchPosition.x = e.stageX;
                this._lastTouchPosition.y =
                    e.stageY
            }
        };
        a.prototype._getContentWidth = function() {
            return this._content.explicitWidth || this._content.width
        };
        a.prototype._getContentHeight = function() {
            return this._content.explicitHeight || this._content.height
        };
        a.prototype.getMaxScrollLeft = function() {
            var e = this._getContentWidth() - this.width;
            return Math.max(0, e)
        };
        a.prototype.getMaxScrollTop = function() {
            var e = this._getContentHeight() - this.height;
            return Math.max(0, e)
        };
        a.prototype._moveAfterTouchEnd = function() {
            if (0 != this._velocitys.length) {
                for (var e = 0, b =
                    0, d = 0, c = 0; c < this._velocitys.length; c++) var g = this._velocitys[c],
                    f = a.weight[c],
                    e = e + g.x * f,
                    b = b + g.y * f,
                    d = d + f;
                this._velocitys.length = 0;
                0 >= this.scrollSpeed && (this.scrollSpeed = 1);
                e = e / d * this.scrollSpeed;
                b = b / d * this.scrollSpeed;
                g = Math.abs(e);
                d = Math.abs(b);
                f = this.getMaxScrollLeft();
                c = this.getMaxScrollTop();
                e = 0.02 < g ? this.getAnimationDatas(e, this._scrollLeft, f) : {
                    position: this._scrollLeft,
                    duration: 1
                };
                b = 0.02 < d ? this.getAnimationDatas(b, this._scrollTop, c) : {
                    position: this._scrollTop,
                    duration: 1
                };
                this.setScrollLeft(e.position,
                    e.duration);
                this.setScrollTop(b.position, b.duration)
            }
        };
        a.prototype._onTweenFinished = function(e) {
            e == this._vScrollTween && (this._isVTweenPlaying = !1);
            e == this._hScrollTween && (this._isHTweenPlaying = !1);
            !1 == this._isHTweenPlaying && !1 == this._isVTweenPlaying && this._onScrollFinished()
        };
        a.prototype._onScrollStarted = function() {};
        a.prototype._onScrollFinished = function() {
            b.Tween.removeTweens(this);
            this._vScrollTween = this._hScrollTween = null;
            this._isVTweenPlaying = this._isHTweenPlaying = !1;
            this.dispatchEvent(new b.Event(b.Event.COMPLETE))
        };
        a.prototype.setScrollTop = function(e, a) {
            void 0 === a && (a = 0);
            var d = Math.min(this.getMaxScrollTop(), Math.max(e, 0));
            if (0 == a) return this.scrollTop = d, null;
            var c = b.Tween.get(this).to({
                scrollTop: e
            }, a, b.Ease.quartOut);
            d != e && c.to({
                scrollTop: d
            }, 300, b.Ease.quintOut);
            this._isVTweenPlaying = !0;
            this._vScrollTween = c;
            c.call(this._onTweenFinished, this, [c]);
            this._isHTweenPlaying || this._onScrollStarted();
            return c
        };
        a.prototype.setScrollLeft = function(e, a) {
            void 0 === a && (a = 0);
            var d = Math.min(this.getMaxScrollLeft(), Math.max(e,
                0));
            if (0 == a) return this.scrollLeft = d, null;
            var c = b.Tween.get(this).to({
                scrollLeft: e
            }, a, b.Ease.quartOut);
            d != e && c.to({
                scrollLeft: d
            }, 300, b.Ease.quintOut);
            this._isHTweenPlaying = !0;
            this._hScrollTween = c;
            c.call(this._onTweenFinished, this, [c]);
            this._isVTweenPlaying || this._onScrollStarted();
            return c
        };
        a.prototype.getAnimationDatas = function(e, a, b) {
            var d = Math.abs(e),
                c = 0,
                f = a + 500 * e;
            if (0 > f || f > b)
                for (f = a; Infinity != Math.abs(e) && 0.02 < Math.abs(e);) f += e, e = 0 > f || f > b ? 0.998 * e * 0.95 : 0.998 * e, c++;
            else c = 500 * -Math.log(0.02 / d);
            return {
                position: Math.min(b + 50, Math.max(f, -50)),
                duration: c
            }
        };
        a.prototype.cloneTouchEvent = function(e) {
            var a = new b.TouchEvent(e._type, e._bubbles, e.cancelable);
            a.touchPointID = e.touchPointID;
            a._stageX = e._stageX;
            a._stageY = e._stageY;
            a.ctrlKey = e.ctrlKey;
            a.altKey = e.altKey;
            a.shiftKey = e.shiftKey;
            a.touchDown = e.touchDown;
            a._isDefaultPrevented = !1;
            a._target = e._target;
            return a
        };
        a.prototype.throwNotSupportedError = function() {
            throw Error(b.getString(1023));
        };
        a.prototype.addChild = function(e) {
            this.throwNotSupportedError();
            return null
        };
        a.prototype.addChildAt = function(e, a) {
            this.throwNotSupportedError();
            return null
        };
        a.prototype.removeChild = function(e) {
            this.throwNotSupportedError();
            return null
        };
        a.prototype.removeChildAt = function(e) {
            this.throwNotSupportedError();
            return null
        };
        a.prototype.setChildIndex = function(e, a) {
            this.throwNotSupportedError()
        };
        a.prototype.swapChildren = function(e, a) {
            this.throwNotSupportedError()
        };
        a.prototype.swapChildrenAt = function(e, a) {
            this.throwNotSupportedError()
        };
        a.prototype.hitTest = function(e, a, c) {
            void 0 ===
                c && (c = !1);
            var h = d.prototype.hitTest.call(this, e, a, c);
            return h ? h : b.DisplayObject.prototype.hitTest.call(this, e, a, c)
        };
        a.weight = [1, 1.33, 1.66, 2, 2.33];
        return a
    }(b.DisplayObjectContainer);
    b.ScrollView = c;
    c.prototype.__class__ = "egret.ScrollView"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.REPEAT = "repeat";
        b.SCALE = "scale";
        return b
    }();
    b.BitmapFillMode = c;
    c.prototype.__class__ = "egret.BitmapFillMode"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e) {
            d.call(this);
            this.scale9Grid = this._texture = null;
            this.fillMode = "scale";
            e && (this._texture = e, this._setSizeDirty());
            this.needDraw = !0
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "texture", {
            get: function() {
                return this._texture
            },
            set: function(e) {
                e != this._texture && (this._setSizeDirty(), this._texture = e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._render = function(e) {
            var b = this._texture;
            b ? (this._texture_to_render = b, a._drawBitmap(e, this._hasWidthSet ? this._explicitWidth :
                b._textureWidth, this._hasHeightSet ? this._explicitHeight : b._textureHeight, this)) : this._texture_to_render = null
        };
        a._drawBitmap = function(e, b, d, c) {
            var g = c._texture_to_render;
            if (g) {
                var f = g._textureWidth,
                    l = g._textureHeight;
                if ("scale" == c.fillMode) {
                    var m = c.scale9Grid || g.scale9Grid;
                    if (m && f - m.width < b && l - m.height < d) a.drawScale9GridImage(e, c, m, b, d);
                    else {
                        var m = g._offsetX,
                            n = g._offsetY,
                            p = g._bitmapWidth || f,
                            r = g._bitmapHeight || l;
                        b /= f;
                        m = Math.round(m * b);
                        b = Math.round(p * b);
                        d /= l;
                        n = Math.round(n * d);
                        d = Math.round(r * d);
                        a.renderFilter.drawImage(e,
                            c, g._bitmapX, g._bitmapY, p, r, m, n, b, d)
                    }
                } else a.drawRepeatImage(e, c, b, d, c.fillMode)
            }
        };
        a.drawRepeatImage = function(e, a, d, c, g) {
            var f = a._texture_to_render;
            if (f) {
                var l = f._textureWidth,
                    m = f._textureHeight,
                    n = f._bitmapX,
                    p = f._bitmapY,
                    l = f._bitmapWidth || l,
                    m = f._bitmapHeight || m,
                    r = f._offsetX,
                    f = f._offsetY;
                b.RenderFilter.getInstance().drawImage(e, a, n, p, l, m, r, f, d, c, g)
            }
        };
        a.drawScale9GridImage = function(e, a, d, c, g) {
            var f = b.MainContext.instance.rendererContext._texture_scale_factor,
                l = a._texture_to_render;
            if (l && d) {
                var m = l._textureWidth,
                    n = l._textureHeight,
                    p = l._bitmapX,
                    r = l._bitmapY,
                    t = l._bitmapWidth || m,
                    s = l._bitmapHeight || n;
                c -= m - t;
                g -= n - s;
                if (!e.drawImageScale9(l, p, r, t, s, l._offsetX, l._offsetY, c, g, d)) {
                    m = l._offsetX / f;
                    n = l._offsetY / f;
                    l = b.RenderFilter.getInstance();
                    d = b.Rectangle.identity.initialize(d.x - Math.round(m), d.y - Math.round(m), d.width, d.height);
                    m = Math.round(m);
                    n = Math.round(n);
                    d.y == d.bottom && (d.bottom < s ? d.bottom++ : d.y--);
                    d.x == d.right && (d.right < t ? d.right++ : d.x--);
                    var u = p + d.x / f,
                        w = p + d.right / f,
                        v = t - d.right,
                        y = r + d.y / f,
                        f = r + d.bottom / f,
                        x = s - d.bottom,
                        z = m + d.x,
                        A = n + d.y,
                        s = g - (s - d.bottom),
                        t = c - (t - d.right);
                    l.drawImage(e, a, p, r, d.x, d.y, m, n, d.x, d.y);
                    l.drawImage(e, a, u, r, d.width, d.y, z, n, t - d.x, d.y);
                    l.drawImage(e, a, w, r, v, d.y, m + t, n, c - t, d.y);
                    l.drawImage(e, a, p, y, d.x, d.height, m, A, d.x, s - d.y);
                    l.drawImage(e, a, u, y, d.width, d.height, z, A, t - d.x, s - d.y);
                    l.drawImage(e, a, w, y, v, d.height, m + t, A, c - t, s - d.y);
                    l.drawImage(e, a, p, f, d.x, x, m, n + s, d.x, g - s);
                    l.drawImage(e, a, u, f, d.width, x, z, n + s, t - d.x, g - s);
                    l.drawImage(e, a, w, f, v, x, m + t, n + s, c - t, g - s)
                }
            }
        };
        a.prototype._measureBounds = function() {
            var e =
                this._texture;
            return e ? b.Rectangle.identity.initialize(0, 0, e._textureWidth, e._textureHeight) : d.prototype._measureBounds.call(this)
        };
        a.renderFilter = b.RenderFilter.getInstance();
        return a
    }(b.DisplayObject);
    b.Bitmap = c;
    c.prototype.__class__ = "egret.Bitmap"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._text = "";
            this._textChanged = !1;
            this._font = null;
            this._fontChanged = !1;
            this._textOffsetY = this._textOffsetX = this._textHeight = this._textWidth = 0;
            this.textLinesChange = !0;
            this._lineHeights = [];
            this.needDraw = this.cacheAsBitmap = !0
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "text", {
            get: function() {
                return this._text
            },
            set: function(e) {
                this._text != e && (this._textChanged = !0, this._text = e, this._setSizeDirty())
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype,
            "font", {
                get: function() {
                    return this._font
                },
                set: function(e) {
                    this._font != e && (this._font = e, this._fontChanged = !0, this._setSizeDirty())
                },
                enumerable: !0,
                configurable: !0
            });
        a.prototype._setSizeDirty = function() {
            d.prototype._setSizeDirty.call(this);
            this.textLinesChange = !0
        };
        a.prototype._render = function(e) {
            var k = this._getTextLines(),
                d = k.length;
            if (0 != d) {
                for (var c = this._font, g = c._getFirstCharHeight(), g = Math.ceil(g * a.EMPTY_FACTOR), f = 0, l = this._hasHeightSet ? this._explicitHeight : Number.POSITIVE_INFINITY, m = this._lineHeights,
                    n = 0; n < d; n++) {
                    var p = m[n];
                    if (0 < n && f + p > l) break;
                    for (var r = k[n], t = r.length, s = 0, u = 0; u < t; u++) {
                        var w = r.charAt(u),
                            v = c.getTexture(w);
                        if (v) {
                            var w = v._bitmapWidth || v._textureWidth,
                                y = v._bitmapHeight || v._textureHeight;
                            this._texture_to_render = v;
                            b.RenderFilter.getInstance().drawImage(e, this, v._bitmapX, v._bitmapY, w, y, s + v._offsetX, f + v._offsetY, w, y);
                            s += v._textureWidth
                        } else " " == w ? s += g : b.Logger.warningWithErrorId(1011, w)
                    }
                    f += p
                }
                this._texture_to_render = null
            }
        };
        a.prototype._measureBounds = function() {
            return 0 == this._getTextLines().length ?
                b.Rectangle.identity.initialize(0, 0, 0, 0) : b.Rectangle.identity.initialize(this._textOffsetX, this._textOffsetY, this._textWidth - this._textOffsetX, this._textHeight - this._textOffsetY)
        };
        a.prototype._getTextLines = function() {
            if (!this.textLinesChange) return this._textLines;
            var e = [];
            this._textLines = e;
            this.textLinesChange = !1;
            var d = [];
            this._lineHeights = d;
            if (!this._text || !this._font) return e;
            for (var c = 0, h = 0, g = 0, f = 0, l = this._hasWidthSet, m = this._hasWidthSet ? this._explicitWidth : Number.POSITIVE_INFINITY, n = this._font,
                p = n._getFirstCharHeight(), r = Math.ceil(p * a.EMPTY_FACTOR), t = this._text.split(/(?:\r\n|\r|\n)/), s = t.length, u = !0, w = 0; w < s; w++) {
                for (var v = t[w], y = v.length, x = 0, z = 0, A = !0, C = 0; C < y; C++) {
                    var B = v.charAt(C),
                        E, F = 0,
                        G = 0,
                        D = n.getTexture(B);
                    if (D) B = D._textureWidth, E = D._textureHeight, F = D._offsetX, G = D._offsetY;
                    else if (" " == B) B = r, E = p;
                    else {
                        b.Logger.warningWithErrorId(1011, B);
                        A && (A = !1);
                        continue
                    }
                    A && (A = !1, g = Math.min(F, g));
                    u && (f = Math.min(G, f));
                    l && 0 < C && z + B > m ? (e.push(v.substring(0, C)), d.push(x), h += x, c = Math.max(z, c), v = v.substring(C),
                        y = v.length, C = 0, z = B, x = E) : (z += B, x = Math.max(E, x))
                }
                u && (u = !1);
                e.push(v);
                d.push(x);
                h += x;
                c = Math.max(z, c)
            }
            this._textWidth = c;
            this._textHeight = h;
            this._textOffsetX = g;
            this._textOffsetY = f;
            return e
        };
        a.EMPTY_FACTOR = 0.33;
        return a
    }(b.DisplayObject);
    b.BitmapText = c;
    c.prototype.__class__ = "egret.BitmapText"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function d() {
            this.fillStyleColor = this.strokeStyleColor = this.renderContext = this.commandQueue = this.canvasContext = null;
            this._dirty = !1;
            this.lineY = this.lineX = 0;
            this._firstCheck = !0;
            this._lastY = this._lastX = this._maxY = this._maxX = this._minY = this._minX = 0;
            this.commandQueue = []
        }
        d.prototype.beginFill = function(a, e) {};
        d.prototype._setStyle = function(a) {};
        d.prototype.drawRect = function(a, e, b, d) {
            this.checkRect(a, e, b, d)
        };
        d.prototype.drawCircle = function(a, e, b) {
            this.checkRect(a - b, e - b, 2 * b, 2 *
                b)
        };
        d.prototype.drawRoundRect = function(a, e, b, d, c, g) {
            this.checkRect(a, e, b, d)
        };
        d.prototype.drawEllipse = function(a, e, b, d) {
            this.checkRect(a - b, e - d, 2 * b, 2 * d)
        };
        d.prototype.lineStyle = function(a, e, b, d, c, g, f, l) {};
        d.prototype.lineTo = function(a, e) {
            this.checkPoint(a, e)
        };
        d.prototype.curveTo = function(a, e, b, d) {
            this.checkPoint(a, e);
            this.checkPoint(b, d)
        };
        d.prototype.moveTo = function(a, e) {
            this.checkPoint(a, e)
        };
        d.prototype.clear = function() {
            this._maxY = this._maxX = this._minY = this._minX = 0;
            this._firstCheck = !0
        };
        d.prototype.endFill =
            function() {};
        d.prototype._draw = function(a) {};
        d.prototype.checkRect = function(a, e, b, d) {
            this._firstCheck ? (this._firstCheck = !1, this._minX = a, this._minY = e, this._maxX = a + b, this._maxY = e + d) : (this._minX = Math.min(this._minX, a), this._minY = Math.min(this._minY, e), this._maxX = Math.max(this._maxX, a + b), this._maxY = Math.max(this._maxY, e + d))
        };
        d.prototype.checkPoint = function(a, e) {
            this._firstCheck ? (this._firstCheck = !1, this._minX = a, this._minY = e, this._maxX = a, this._maxY = e) : (this._minX = Math.min(this._minX, a), this._minY = Math.min(this._minY,
                e), this._maxX = Math.max(this._maxX, a), this._maxY = Math.max(this._maxY, e));
            this._lastX = a;
            this._lastY = e
        };
        d.prototype._measureBounds = function() {
            return b.Rectangle.identity.initialize(this._minX, this._minY, this._maxX - this._minX, this._maxY - this._minY)
        };
        return d
    }();
    b.Graphics = c;
    c.prototype.__class__ = "egret.Graphics";
    (function() {
        return function(b, a, e) {
            this.method = b;
            this.thisObject = a;
            this.args = e
        }
    })().prototype.__class__ = "egret.Command"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._graphics = null
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "graphics", {
            get: function() {
                this._graphics || (this._graphics = new b.Graphics, this.needDraw = !0);
                return this._graphics
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._render = function(e) {
            this._graphics && this._graphics._draw(e)
        };
        a.prototype._measureBounds = function() {
            var e = this._graphics;
            return e ? e._measureBounds() : d.prototype._measureBounds.call(this)
        };
        return a
    }(b.DisplayObject);
    b.Shape =
        c;
    c.prototype.__class__ = "egret.Shape"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._graphics = null
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "graphics", {
            get: function() {
                this._graphics || (this._graphics = new b.Graphics, this.needDraw = !0);
                return this._graphics
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._render = function(e) {
            this._graphics && this._graphics._draw(e);
            d.prototype._render.call(this, e)
        };
        a.prototype._measureBounds = function() {
            for (var e = 0, a = 0, d = 0, c = 0, g = this._children.length, f = 0; f < g; f++) {
                var l = this._children[f];
                if (l._visible) {
                    var m = l.getBounds(b.Rectangle.identity, !1),
                        n = m.x,
                        p = m.y,
                        r = m.width,
                        m = m.height,
                        l = l._getMatrix(),
                        l = b.DisplayObject.getTransformBounds(b.Rectangle.identity.initialize(n, p, r, m), l),
                        n = l.x,
                        p = l.y,
                        r = l.width + l.x,
                        l = l.height + l.y;
                    if (n < e || 0 == f) e = n;
                    if (r > a || 0 == f) a = r;
                    if (p < d || 0 == f) d = p;
                    if (l > c || 0 == f) c = l
                }
            }
            if (this._graphics) {
                g = this._graphics._measureBounds();
                n = g.x;
                p = g.y;
                r = g.width + g.x;
                l = g.height + g.y;
                if (n < e || 0 == f) e = n;
                if (r > a || 0 == f) a = r;
                if (p < d || 0 == f) d = p;
                if (l > c || 0 == f) c = l
            }
            return b.Rectangle.identity.initialize(e,
                d, a - e, c - d)
        };
        a.prototype.hitTest = function(e, a, c) {
            void 0 === c && (c = !1);
            var h = d.prototype.hitTest.call(this, e, a, c);
            return h ? h : this._graphics ? b.DisplayObject.prototype.hitTest.call(this, e, a, c) : null
        };
        return a
    }(b.DisplayObjectContainer);
    b.Sprite = c;
    c.prototype.__class__ = "egret.Sprite"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._inputEnabled = !1;
            this._type = "";
            this._inputUtils = null;
            this._text = "";
            this._displayAsPassword = !1;
            this._fontFamily = a.default_fontFamily;
            this._size = 30;
            this._bold = this._italic = !1;
            this._textColorString = "#FFFFFF";
            this._textColor = 16777215;
            this._strokeColorString = "#000000";
            this._stroke = this._strokeColor = 0;
            this._textAlign = "left";
            this._verticalAlign = "top";
            this._maxChars = 0;
            this._scrollV = -1;
            this._numLines = this._lineSpacing = this._maxScrollV = 0;
            this._isFlow =
                this._multiline = !1;
            this._textArr = [];
            this._isArrayChanged = !1;
            this._textMaxHeight = this._textMaxWidth = 0;
            this._linesArr = [];
            this.needDraw = !0
        }
        __extends(a, d);
        a.prototype.isInput = function() {
            return this._type == b.TextFieldType.INPUT
        };
        a.prototype._setTouchEnabled = function(e) {
            d.prototype._setTouchEnabled.call(this, e);
            this.isInput() && (this._inputEnabled = !0)
        };
        Object.defineProperty(a.prototype, "type", {
            get: function() {
                return this._type
            },
            set: function(e) {
                this._setType(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setType =
            function(e) {
                this._type != e && (this._type = e, this._type == b.TextFieldType.INPUT ? (this._hasWidthSet || this._setWidth(100), this._hasHeightSet || this._setHeight(30), null == this._inputUtils && (this._inputUtils = new b.InputController), this._inputUtils.init(this), this._setDirty(), this._stage && this._inputUtils._addStageText()) : this._inputUtils && (this._inputUtils._removeStageText(), this._inputUtils = null))
            };
        Object.defineProperty(a.prototype, "text", {
            get: function() {
                return this._getText()
            },
            set: function(e) {
                this._setText(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._getText = function() {
            return this._type == b.TextFieldType.INPUT ? this._inputUtils._getText() : this._text
        };
        a.prototype._setSizeDirty = function() {
            d.prototype._setSizeDirty.call(this);
            this._isArrayChanged = !0
        };
        a.prototype._setTextDirty = function() {
            this._setSizeDirty()
        };
        a.prototype._setBaseText = function(e) {
            null == e && (e = "");
            this._isFlow = !1;
            this._text != e && (this._setTextDirty(), this._text = e, e = "", e = this._displayAsPassword ? this.changeToPassText(this._text) : this._text, this.setMiddleStyle([{
                text: e
            }]))
        };
        a.prototype._setText = function(e) {
            null == e && (e = "");
            this._setBaseText(e);
            this._inputUtils && this._inputUtils._setText(this._text)
        };
        Object.defineProperty(a.prototype, "displayAsPassword", {
            get: function() {
                return this._displayAsPassword
            },
            set: function(e) {
                this._setDisplayAsPassword(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setDisplayAsPassword = function(e) {
            this._displayAsPassword != e && (this._displayAsPassword = e, this._setTextDirty(), e = "", e = this._displayAsPassword ? this.changeToPassText(this._text) : this._text,
                this.setMiddleStyle([{
                    text: e
                }]))
        };
        Object.defineProperty(a.prototype, "fontFamily", {
            get: function() {
                return this._fontFamily
            },
            set: function(e) {
                this._setFontFamily(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setFontFamily = function(e) {
            this._fontFamily != e && (this._setTextDirty(), this._fontFamily = e)
        };
        Object.defineProperty(a.prototype, "size", {
            get: function() {
                return this._size
            },
            set: function(e) {
                this._setSize(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setSize = function(e) {
            this._size != e && (this._setTextDirty(),
                this._size = e)
        };
        Object.defineProperty(a.prototype, "italic", {
            get: function() {
                return this._italic
            },
            set: function(e) {
                this._setItalic(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setItalic = function(e) {
            this._italic != e && (this._setTextDirty(), this._italic = e)
        };
        Object.defineProperty(a.prototype, "bold", {
            get: function() {
                return this._bold
            },
            set: function(e) {
                this._setBold(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setBold = function(e) {
            this._bold != e && (this._setTextDirty(), this._bold = e)
        };
        Object.defineProperty(a.prototype,
            "textColor", {
                get: function() {
                    return this._textColor
                },
                set: function(e) {
                    this._setTextColor(e)
                },
                enumerable: !0,
                configurable: !0
            });
        a.prototype._setTextColor = function(e) {
            this._textColor != e && (this._setTextDirty(), this._textColor = e, this._textColorString = b.toColorString(e))
        };
        Object.defineProperty(a.prototype, "strokeColor", {
            get: function() {
                return this._strokeColor
            },
            set: function(e) {
                this._setStrokeColor(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setStrokeColor = function(e) {
            this._strokeColor != e && (this._setTextDirty(),
                this._strokeColor = e, this._strokeColorString = b.toColorString(e))
        };
        Object.defineProperty(a.prototype, "stroke", {
            get: function() {
                return this._stroke
            },
            set: function(e) {
                this._setStroke(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setStroke = function(e) {
            this._stroke != e && (this._setTextDirty(), this._stroke = e)
        };
        Object.defineProperty(a.prototype, "textAlign", {
            get: function() {
                return this._textAlign
            },
            set: function(e) {
                this._setTextAlign(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setTextAlign = function(e) {
            this._textAlign !=
                e && (this._setTextDirty(), this._textAlign = e)
        };
        Object.defineProperty(a.prototype, "verticalAlign", {
            get: function() {
                return this._verticalAlign
            },
            set: function(e) {
                this._setVerticalAlign(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setVerticalAlign = function(e) {
            this._verticalAlign != e && (this._setTextDirty(), this._verticalAlign = e)
        };
        Object.defineProperty(a.prototype, "maxChars", {
            get: function() {
                return this._maxChars
            },
            set: function(e) {
                this._setMaxChars(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setMaxChars =
            function(e) {
                this._maxChars != e && (this._maxChars = e)
            };
        Object.defineProperty(a.prototype, "scrollV", {
            set: function(e) {
                this._scrollV = e;
                this._setDirty()
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "maxScrollV", {
            get: function() {
                return this._maxScrollV
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "selectionBeginIndex", {
            get: function() {
                return 0
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "selectionEndIndex", {
            get: function() {
                return 0
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "caretIndex", {
            get: function() {
                return 0
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setSelection = function(e, a) {};
        Object.defineProperty(a.prototype, "lineSpacing", {
            get: function() {
                return this._lineSpacing
            },
            set: function(e) {
                this._setLineSpacing(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setLineSpacing = function(e) {
            this._lineSpacing != e && (this._setTextDirty(), this._lineSpacing = e)
        };
        a.prototype._getLineHeight = function() {
            return this._lineSpacing + this._size
        };
        Object.defineProperty(a.prototype, "numLines", {
            get: function() {
                return this._numLines
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "multiline", {
            get: function() {
                return this._multiline
            },
            set: function(e) {
                this._setMultiline(e)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setMultiline = function(e) {
            this._multiline = e;
            this._setDirty()
        };
        a.prototype.setFocus = function() {
            b.Logger.warningWithErrorId(1013)
        };
        a.prototype._onRemoveFromStage = function() {
            d.prototype._onRemoveFromStage.call(this);
            this._removeEvent();
            this._type == b.TextFieldType.INPUT && this._inputUtils._removeStageText()
        };
        a.prototype._onAddToStage = function() {
            d.prototype._onAddToStage.call(this);
            this._addEvent();
            this._type == b.TextFieldType.INPUT && this._inputUtils._addStageText()
        };
        a.prototype._updateBaseTransform = function() {
            this._getLinesArr();
            0 != this._textMaxWidth && d.prototype._updateTransform.call(this)
        };
        a.prototype._updateTransform = function() {
            this._type == b.TextFieldType.INPUT ? this._normalDirty ? this._inputUtils._updateProperties() : this._inputUtils._updateTransform() :
                this._updateBaseTransform()
        };
        a.prototype._draw = function(e) {
            0 != this._textMaxWidth && d.prototype._draw.call(this, e)
        };
        a.prototype._render = function(e) {
            this.drawText(e);
            this._clearDirty()
        };
        a.prototype._measureBounds = function() {
            this._getLinesArr();
            return 0 == this._textMaxWidth ? b.Rectangle.identity.initialize(0, 0, 0, 0) : b.Rectangle.identity.initialize(0, 0, this._textMaxWidth, this._textMaxHeight + (this._numLines - 1) * this._lineSpacing)
        };
        Object.defineProperty(a.prototype, "textFlow", {
            get: function() {
                return this._textArr
            },
            set: function(e) {
                this._isFlow = !0;
                var a = "";
                null == e && (e = []);
                for (var b = 0; b < e.length; b++) a += e[b].text;
                this._displayAsPassword ? this._setBaseText(a) : (this._text = a, this.setMiddleStyle(e))
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.changeToPassText = function(e) {
            if (this._displayAsPassword) {
                for (var a = "", b = 0, d = e.length; b < d; b++) switch (e.charAt(b)) {
                    case "\n":
                        a += "\n";
                        break;
                    case "\r":
                        break;
                    default:
                        a += "*"
                }
                return a
            }
            return e
        };
        a.prototype.setMiddleStyle = function(e) {
            this._isArrayChanged = !0;
            this._textArr = e;
            this._setSizeDirty()
        };
        Object.defineProperty(a.prototype, "textWidth", {
            get: function() {
                return this._textMaxWidth
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "textHeight", {
            get: function() {
                return this._textMaxHeight
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.appendText = function(e) {
            this.appendElement({
                text: e
            })
        };
        a.prototype.appendElement = function(e) {
            this._textArr.push(e);
            this.setMiddleStyle(this._textArr)
        };
        a.prototype._getLinesArr = function() {
            if (!this._isArrayChanged) return this._linesArr;
            this._isArrayChanged = !1;
            var e = this._textArr,
                a = b.MainContext.instance.rendererContext;
            this._linesArr = [];
            this._textMaxWidth = this._textMaxHeight = 0;
            if (this._hasWidthSet && 0 == this._explicitWidth) return this._numLines = 0, [{
                width: 0,
                height: 0,
                elements: []
            }];
            var d = this._linesArr,
                c = 0,
                g = 0,
                f = 0,
                l;
            this._isFlow || a.setupFont(this);
            for (var m = 0, n = e.length; m < n; m++) {
                var p = e[m];
                p.style = p.style || {};
                for (var r = p.text.toString().split(/(?:\r\n|\r|\n)/), t = 0, s = r.length; t < s; t++) {
                    null == d[f] && (l = {
                        width: 0,
                        height: 0,
                        elements: []
                    }, d[f] = l, g = c = 0);
                    g = this._type ==
                        b.TextFieldType.INPUT ? this._size : Math.max(g, p.style.size || this._size);
                    if ("" != r[t]) {
                        this._isFlow && a.setupFont(this, p.style);
                        var u = a.measureText(r[t]);
                        if (this._hasWidthSet)
                            if (c + u <= this._explicitWidth) l.elements.push({
                                width: u,
                                text: r[t],
                                style: p.style
                            }), c += u;
                            else {
                                for (var w = 0, v = 0, y = r[t], x = y.length; w < x; w++) {
                                    u = a.measureText(y.charAt(w));
                                    if (c + u > this._explicitWidth && 0 != c + w) break;
                                    v += u;
                                    c += u
                                }
                                0 < w && (l.elements.push({
                                    width: v,
                                    text: y.substring(0, w),
                                    style: p.style
                                }), r[t] = y.substring(w));
                                t--
                            } else c += u, l.elements.push({
                            width: u,
                            text: r[t],
                            style: p.style
                        })
                    }
                    if (t < r.length - 1) {
                        l.width = c;
                        l.height = g;
                        this._textMaxWidth = Math.max(this._textMaxWidth, c);
                        this._textMaxHeight += g;
                        if (this._type == b.TextFieldType.INPUT && !this._multiline) return this._numLines = d.length, d;
                        f++
                    }
                }
                m == e.length - 1 && l && (l.width = c, l.height = g, this._textMaxWidth = Math.max(this._textMaxWidth, c), this._textMaxHeight += g)
            }
            this._numLines = d.length;
            return d
        };
        a.prototype.drawText = function(e) {
            var a = this._getLinesArr();
            if (0 != this._textMaxWidth) {
                var d = this._hasWidthSet ? this._explicitWidth :
                    this._textMaxWidth,
                    c = this._textMaxHeight + (this._numLines - 1) * this._lineSpacing,
                    g = 0,
                    f = 0;
                if (this._hasHeightSet)
                    if (c < this._explicitHeight) {
                        var l = 0;
                        this._verticalAlign == b.VerticalAlign.MIDDLE ? l = 0.5 : this._verticalAlign == b.VerticalAlign.BOTTOM && (l = 1);
                        g += l * (this._explicitHeight - c)
                    } else c > this._explicitHeight && (f = Math.max(this._scrollV - 1, 0), f = Math.min(this._numLines - 1, f));
                g = Math.round(g);
                c = 0;
                this._textAlign == b.HorizontalAlign.CENTER ? c = 0.5 : this._textAlign == b.HorizontalAlign.RIGHT && (c = 1);
                for (var l = 0, m = this._numLines; f <
                    m; f++) {
                    var n = a[f],
                        p = n.height,
                        g = g + p / 2;
                    if (0 != f && this._hasHeightSet && g > this._explicitHeight) break;
                    for (var l = Math.round((d - n.width) * c), r = 0, t = n.elements.length; r < t; r++) {
                        var s = n.elements[r],
                            u = s.style.size || this._size;
                        this._type == b.TextFieldType.INPUT ? e.drawText(this, s.text, l, g + (p - u) / 2, s.width) : e.drawText(this, s.text, l, g + (p - u) / 2, s.width, s.style);
                        l += s.width
                    }
                    g += p / 2 + this._lineSpacing
                }
            }
        };
        a.prototype._addEvent = function() {
            this.addEventListener(b.TouchEvent.TOUCH_TAP, this.onTapHandler, this)
        };
        a.prototype._removeEvent =
            function() {
                this.removeEventListener(b.TouchEvent.TOUCH_TAP, this.onTapHandler, this)
            };
        a.prototype.onTapHandler = function(e) {
            if (this._type != b.TextFieldType.INPUT && (e = this._getTextElement(e.localX, e.localY), null != e && (e = e.style) && e.href && e.href.match(/^event:/))) {
                var a = e.href.match(/^event:/)[0];
                b.TextEvent.dispatchTextEvent(this, b.TextEvent.LINK, e.href.substring(a.length))
            }
        };
        a.prototype._getTextElement = function(e, a) {
            var b = this._getHit(e, a),
                d = this._getLinesArr();
            return b && d[b.lineIndex] && d[b.lineIndex].elements[b.textElementIndex] ?
                d[b.lineIndex].elements[b.textElementIndex] : null
        };
        a.prototype._getHit = function(e, a) {
            var b = this._getLinesArr();
            if (0 == this._textMaxWidth) return null;
            for (var d = 0, c = 0, f = 0; f < b.length; f++) {
                var l = b[f];
                if (c + l.height >= a) {
                    d = f + 1;
                    break
                } else c += l.height; if (c + this._lineSpacing > a) return null;
                c += this._lineSpacing
            }
            if (0 === d) return null;
            b = b[d - 1];
            for (f = c = 0; f < b.elements.length; f++)
                if (l = b.elements[f], c + l.width < e) c += l.width;
                else return {
                    lineIndex: d - 1,
                    textElementIndex: f
                };
            return null
        };
        a.default_fontFamily = "Arial";
        return a
    }(b.DisplayObject);
    b.TextField = c;
    c.prototype.__class__ = "egret.TextField"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {
            this.resutlArr = []
        }
        b.prototype.parser = function(a) {
            this.stackArray = [];
            this.resutlArr = [];
            for (var e = 0, b = a.length; e < b;) {
                var d = a.indexOf("<", e);
                0 > d ? (this.addToResultArr(a.substring(e)), e = b) : (this.addToResultArr(a.substring(e, d)), e = a.indexOf(">", d), "/" == a.charAt(d + 1) ? this.stackArray.pop() : this.addToArray(a.substring(d + 1, e)), e += 1)
            }
            return this.resutlArr
        };
        b.prototype.addToResultArr = function(a) {
            if ("" != a) {
                var e = [];
                e.push(["&lt;", "<"]);
                e.push(["&gt;", ">"]);
                e.push(["&amp;",
                    "&"
                ]);
                e.push(["&quot;", '"']);
                e.push(["&apos;;", "'"]);
                for (var b = 0; b < e.length; b++) a.replace(new RegExp(e[b][0], "g"), e[b][1]);
                0 < this.stackArray.length ? this.resutlArr.push({
                    text: a,
                    style: this.stackArray[this.stackArray.length - 1]
                }) : this.resutlArr.push({
                    text: a
                })
            }
        };
        b.prototype.changeStringToObject = function(a) {
            var e = {};
            a = a.replace(/( )+/g, " ").split(" ");
            for (var b = 0; b < a.length; b++) this.addProperty(e, a[b]);
            return e
        };
        b.prototype.addProperty = function(a, e) {
            var b = e.replace(/( )*=( )*/g, "=").split("=");
            b[1] && (b[1] =
                b[1].replace(/(\"|\')/g, ""));
            switch (b[0].toLowerCase()) {
                case "color":
                    a.textColor = parseInt(b[1]);
                    break;
                case "strokecolor":
                    a.strokeColor = parseInt(b[1]);
                    break;
                case "stroke":
                    a.stroke = parseInt(b[1]);
                    break;
                case "b":
                    a.bold = "true" == (b[1] || "true");
                    break;
                case "i":
                    a.italic = "true" == (b[1] || "true");
                    break;
                case "size":
                    a.size = parseInt(b[1]);
                    break;
                case "fontFamily":
                    a.fontFamily = b[1];
                    break;
                case "href":
                    a.href = b[1]
            }
        };
        b.prototype.addToArray = function(a) {
            a = this.changeStringToObject(a);
            if (0 != this.stackArray.length) {
                var e =
                    this.stackArray[this.stackArray.length - 1],
                    b;
                for (b in e) null == a[b] && (a[b] = e[b])
            }
            this.stackArray.push(a)
        };
        return b
    }();
    b.HtmlTextParser = c;
    c.prototype.__class__ = "egret.HtmlTextParser"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.DYNAMIC = "dynamic";
        b.INPUT = "input";
        return b
    }();
    b.TextFieldType = c;
    c.prototype.__class__ = "egret.TextFieldType"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e) {
            d.call(this);
            this.bitmapData = this._bitmapY = this._bitmapX = this._sourceHeight = this._sourceWidth = 0;
            this._textureMap = {};
            var a = e.bitmapData;
            this.bitmapData = a;
            this._sourceWidth = a.width;
            this._sourceHeight = a.height;
            this._bitmapX = e._bitmapX - e._offsetX;
            this._bitmapY = e._bitmapY - e._offsetY
        }
        __extends(a, d);
        a.prototype.getTexture = function(e) {
            return this._textureMap[e]
        };
        a.prototype.createTexture = function(e, a, d, c, g, f, l, m, n) {
            void 0 === f && (f = 0);
            void 0 === l && (l = 0);
            "undefined" ===
            typeof m && (m = f + c);
            "undefined" === typeof n && (n = l + g);
            var p = new b.Texture,
                r = b.MainContext.instance.rendererContext._texture_scale_factor;
            p._bitmapData = this.bitmapData;
            p._bitmapX = this._bitmapX + a;
            p._bitmapY = this._bitmapY + d;
            p._bitmapWidth = c * r;
            p._bitmapHeight = g * r;
            p._offsetX = f;
            p._offsetY = l;
            p._textureWidth = m * r;
            p._textureHeight = n * r;
            p._sourceWidth = this._sourceWidth;
            p._sourceHeight = this._sourceHeight;
            return this._textureMap[e] = p
        };
        return a
    }(b.HashObject);
    b.SpriteSheet = c;
    c.prototype.__class__ = "egret.SpriteSheet"
})(egret ||
    (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._isFocus = !1;
            this._text = null;
            this._isFirst = this._isFirst = !0
        }
        __extends(a, d);
        a.prototype.init = function(e) {
            this._text = e;
            this.stageText = b.StageText.create();
            e = this._text.localToGlobal();
            this.stageText._open(e.x, e.y, this._text._explicitWidth, this._text._explicitHeight)
        };
        a.prototype._addStageText = function() {
            this._text._inputEnabled || (this._text._touchEnabled = !0);
            this.stageText._add();
            this.stageText._addListeners();
            this.stageText.addEventListener("blur",
                this.onBlurHandler, this);
            this.stageText.addEventListener("focus", this.onFocusHandler, this);
            this.stageText.addEventListener("updateText", this.updateTextHandler, this);
            this._text.addEventListener(b.TouchEvent.TOUCH_TAP, this.onMouseDownHandler, this);
            b.MainContext.instance.stage.addEventListener(b.TouchEvent.TOUCH_TAP, this.onStageDownHandler, this);
            b.MainContext.instance.stage.addEventListener(b.Event.RESIZE, this.onResize, this)
        };
        a.prototype._removeStageText = function() {
            this.stageText._remove();
            this.stageText._removeListeners();
            this._text._inputEnabled || (this._text._touchEnabled = !1);
            this.stageText.removeEventListener("blur", this.onBlurHandler, this);
            this.stageText.removeEventListener("focus", this.onFocusHandler, this);
            this.stageText.removeEventListener("updateText", this.updateTextHandler, this);
            this._text.removeEventListener(b.TouchEvent.TOUCH_TAP, this.onMouseDownHandler, this);
            b.MainContext.instance.stage.removeEventListener(b.TouchEvent.TOUCH_TAP, this.onStageDownHandler, this);
            b.MainContext.instance.stage.removeEventListener(b.Event.RESIZE,
                this.onResize, this)
        };
        a.prototype.onResize = function() {
            this._isFirst = !0
        };
        a.prototype._getText = function() {
            return this.stageText._getText()
        };
        a.prototype._setText = function(e) {
            this.stageText._setText(e)
        };
        a.prototype.onFocusHandler = function(e) {
            this.hideText()
        };
        a.prototype.onBlurHandler = function(e) {
            this.showText()
        };
        a.prototype.onMouseDownHandler = function(e) {
            e.stopPropagation();
            this._text._visible && (this._isFirst = !0, this._updateTransform(), this.stageText._show())
        };
        a.prototype.onStageDownHandler = function(e) {
            this.stageText._hide();
            this.showText()
        };
        a.prototype.showText = function() {
            this._isFocus && (this._isFocus = !1, this.resetText())
        };
        a.prototype.hideText = function() {
            this._isFocus || (this._text._setBaseText(""), this._isFocus = !0)
        };
        a.prototype.updateTextHandler = function(e) {
            this.resetText();
            this._text.dispatchEvent(new b.Event(b.Event.CHANGE))
        };
        a.prototype.resetText = function() {
            this._text._setBaseText(this.stageText._getText())
        };
        a.prototype._updateTransform = function() {
            var e = this._text._worldTransform.a,
                a = this._text._worldTransform.b,
                d = this._text._worldTransform.c,
                c = this._text._worldTransform.d,
                g = this._text._worldTransform.tx,
                f = this._text._worldTransform.ty;
            this._text._updateBaseTransform();
            var l = this._text._worldTransform;
            if (this._isFirst || e != l.a || a != l.b || d != l.c || c != l.d || g != l.tx || f != l.ty) {
                this._isFirst = !1;
                e = this._text.localToGlobal();
                this.stageText.changePosition(e.x, e.y);
                var m = this;
                b.callLater(function() {
                    m.stageText._setScale(m._text._worldTransform.a, m._text._worldTransform.d)
                }, this)
            }
        };
        a.prototype._updateProperties = function() {
            var e =
                this._text._stage;
            if (null == e) this.stageText._setVisible(!1);
            else {
                for (var a = this._text, d = a._visible; d;) {
                    a = a.parent;
                    if (a == e) break;
                    d = a._visible
                }
                this.stageText._setVisible(d)
            }
            this.stageText._setMultiline(this._text._multiline);
            this.stageText._setMaxChars(this._text._maxChars);
            this.stageText._setSize(this._text._size);
            this.stageText._setTextColor(this._text._textColorString);
            this.stageText._setTextFontFamily(this._text._fontFamily);
            this.stageText._setBold(this._text._bold);
            this.stageText._setItalic(this._text._italic);
            this.stageText._setTextAlign(this._text._textAlign);
            this.stageText._setWidth(this._text._getSize(b.Rectangle.identity).width);
            this.stageText._setHeight(this._text._getSize(b.Rectangle.identity).height);
            this.stageText._setTextType(this._text._displayAsPassword ? "password" : "text");
            this.stageText._setText(this._text._text);
            this.stageText._resetStageText();
            this._updateTransform()
        };
        return a
    }(b.HashObject);
    b.InputController = c;
    c.prototype.__class__ = "egret.InputController"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(e, a) {
            b.call(this, e);
            this.firstCharHeight = 0;
            "string" == typeof a ? this.charList = this.parseConfig(a) : a && a.hasOwnProperty("frames") ? this.charList = a.frames : this.charList = {}
        }
        __extends(a, b);
        a.prototype.getTexture = function(e) {
            var a = this._textureMap[e];
            if (!a) {
                a = this.charList[e];
                if (!a) return null;
                a = this.createTexture(e, a.x, a.y, a.w, a.h, a.offX, a.offY, a.sourceW, a.sourceH);
                this._textureMap[e] = a
            }
            return a
        };
        a.prototype._getFirstCharHeight = function() {
            if (0 == this.firstCharHeight)
                for (var e in this.charList) {
                    var a =
                        this.charList[e];
                    if (a) {
                        var b = a.sourceH;
                        void 0 === b && (b = a.h, void 0 === b && (b = 0), a = a.offY, void 0 === a && (a = 0), b += a);
                        if (!(0 >= b)) {
                            this.firstCharHeight = b;
                            break
                        }
                    }
                }
            return this.firstCharHeight
        };
        a.prototype.parseConfig = function(e) {
            e = e.split("\r\n").join("\n");
            e = e.split("\n");
            for (var a = this.getConfigByKey(e[3], "count"), b = {}, d = 4; d < 4 + a; d++) {
                var c = e[d],
                    f = String.fromCharCode(this.getConfigByKey(c, "id")),
                    l = {};
                b[f] = l;
                l.x = this.getConfigByKey(c, "x");
                l.y = this.getConfigByKey(c, "y");
                l.w = this.getConfigByKey(c, "width");
                l.h =
                    this.getConfigByKey(c, "height");
                l.offX = this.getConfigByKey(c, "xoffset");
                l.offY = this.getConfigByKey(c, "yoffset")
            }
            return b
        };
        a.prototype.getConfigByKey = function(e, a) {
            for (var b = e.split(" "), d = 0, c = b.length; d < c; d++) {
                var f = b[d];
                if (a == f.substring(0, a.length)) return b = f.substring(a.length + 1), parseInt(b)
            }
            return 0
        };
        return a
    }(b.SpriteSheet);
    b.BitmapFont = c;
    c.prototype.__class__ = "egret.BitmapFont"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e) {
            d.call(this);
            this._isAddedToStage = !1;
            this._frames = this._movieClipData = this._textureToRender = null;
            this._totalFrames = 0;
            this._frameLabels = null;
            this._frameIntervalTime = 0;
            this._eventPool = null;
            this._isPlaying = !1;
            this._isStopped = !0;
            this._passedTime = this._displayedKeyFrameNum = this._nextFrameNum = this._currentFrameNum = this._playTimes = 0;
            this._setMovieClipData(e);
            this.needDraw = !0
        }
        __extends(a, d);
        a.prototype._init = function() {
            this._reset();
            var e = this._movieClipData;
            e &&
                e._isDataValid() && (this._frames = e.frames, this._totalFrames = e.numFrames, this._frameLabels = e.labels, this._frameIntervalTime = 1E3 / e.frameRate, this._initFrame())
        };
        a.prototype._reset = function() {
            this._frames = null;
            this._playTimes = 0;
            this._isPlaying = !1;
            this.setIsStopped(!0);
            this._currentFrameNum = 0;
            this._nextFrameNum = 1;
            this._passedTime = this._displayedKeyFrameNum = 0;
            this._eventPool = []
        };
        a.prototype._initFrame = function() {
            this._movieClipData._isTextureValid() && (this._advanceFrame(), this._constructFrame())
        };
        a.prototype._render =
            function(e) {
                var b = this._textureToRender;
                if (this._texture_to_render = b) {
                    var d = Math.round(b._offsetX),
                        c = Math.round(b._offsetY),
                        g = b._bitmapWidth || b._textureWidth,
                        f = b._bitmapHeight || b._textureHeight,
                        l = Math.round(g),
                        m = Math.round(f);
                    a.renderFilter.drawImage(e, this, b._bitmapX, b._bitmapY, g, f, d, c, l, m)
                }
            };
        a.prototype._measureBounds = function() {
            var e = this._textureToRender;
            return e ? b.Rectangle.identity.initialize(e._offsetX, e._offsetY, e._textureWidth, e._textureHeight) : d.prototype._measureBounds.call(this)
        };
        a.prototype._onAddToStage =
            function() {
                d.prototype._onAddToStage.call(this);
                this._isAddedToStage = !0;
                this._isPlaying && 1 < this._totalFrames && this.setIsStopped(!1)
            };
        a.prototype._onRemoveFromStage = function() {
            d.prototype._onRemoveFromStage.call(this);
            this._isAddedToStage = !1;
            this.setIsStopped(!0)
        };
        a.prototype._getFrameLabelByName = function(e, a) {
            void 0 === a && (a = !1);
            a && (e = e.toLowerCase());
            var b = this._frameLabels;
            if (b)
                for (var d = null, c = 0; c < b.length; c++)
                    if (d = b[c], a ? d.name.toLowerCase() === e : d.name === e) return d;
            return null
        };
        a.prototype._getFrameLabelByFrame =
            function(e) {
                var a = this._frameLabels;
                if (a)
                    for (var b = null, d = 0; d < a.length; d++)
                        if (b = a[d], b.frame === e) return b;
                return null
            };
        a.prototype._getFrameLabelForFrame = function(e) {
            var a = null,
                b = null,
                d = this._frameLabels;
            if (d)
                for (var c = 0; c < d.length; c++) {
                    b = d[c];
                    if (b.frame > e) break;
                    a = b
                }
            return a
        };
        a.prototype.play = function(a) {
            void 0 === a && (a = 0);
            this._isPlaying = !0;
            this.setPlayTimes(a);
            1 < this._totalFrames && this._isAddedToStage && this.setIsStopped(!1)
        };
        a.prototype.stop = function() {
            this._isPlaying = !1;
            this.setIsStopped(!0)
        };
        a.prototype.prevFrame =
            function() {
                this.gotoAndStop(this._currentFrameNum - 1)
            };
        a.prototype.nextFrame = function() {
            this.gotoAndStop(this._currentFrameNum + 1)
        };
        a.prototype.gotoAndPlay = function(a, d) {
            void 0 === d && (d = 0);
            if (0 === arguments.length || 2 < arguments.length) throw Error(b.getString(1022, "MovieClip.gotoAndPlay()"));
            this.play(d);
            this._gotoFrame(a)
        };
        a.prototype.gotoAndStop = function(a) {
            if (1 != arguments.length) throw Error(b.getString(1022, "MovieClip.gotoAndStop()"));
            this.stop();
            this._gotoFrame(a)
        };
        a.prototype._gotoFrame = function(a) {
            var d;
            if ("string" === typeof a) d = this._getFrameLabelByName(a).frame;
            else if (d = parseInt(a + "", 10), d != a) throw Error(b.getString(1022, "Frame Label Not Found"));
            1 > d ? d = 1 : d > this._totalFrames && (d = this._totalFrames);
            d !== this._nextFrameNum && (this._nextFrameNum = d, this._advanceFrame(), this._constructFrame(), this._handlePendingEvent())
        };
        a.prototype._advanceTime = function(a) {
            var d = this._frameIntervalTime;
            a = this._passedTime + a;
            this._passedTime = a % d;
            d = a / d;
            if (!(1 > d)) {
                for (; 1 <= d;) {
                    d--;
                    this._nextFrameNum++;
                    if (this._nextFrameNum >
                        this._totalFrames)
                        if (-1 == this._playTimes) this._eventPool.push(b.Event.LOOP_COMPLETE), this._nextFrameNum = 1;
                        else if (this._playTimes--, 0 < this._playTimes) this._eventPool.push(b.Event.LOOP_COMPLETE), this._nextFrameNum = 1;
                    else {
                        this._nextFrameNum = this._totalFrames;
                        this._eventPool.push(b.Event.COMPLETE);
                        this.stop();
                        break
                    }
                    this._advanceFrame()
                }
                this._constructFrame();
                this._handlePendingEvent()
            }
        };
        a.prototype._advanceFrame = function() {
            this._currentFrameNum = this._nextFrameNum
        };
        a.prototype._constructFrame = function() {
            var a =
                this._currentFrameNum;
            this._displayedKeyFrameNum != a && (this._textureToRender = this._movieClipData.getTextureByFrame(a), this._displayedKeyFrameNum = a)
        };
        a.prototype._handlePendingEvent = function() {
            if (0 != this._eventPool.length) {
                this._eventPool.reverse();
                for (var a = this._eventPool, d = a.length, c = !1, h = !1, g = 0; g < d; g++) {
                    var f = a.pop();
                    f == b.Event.LOOP_COMPLETE ? h = !0 : f == b.Event.COMPLETE ? c = !0 : this.dispatchEventWith(f)
                }
                h && this.dispatchEventWith(b.Event.LOOP_COMPLETE);
                c && this.dispatchEventWith(b.Event.COMPLETE)
            }
        };
        Object.defineProperty(a.prototype,
            "totalFrames", {
                get: function() {
                    return this._totalFrames
                },
                enumerable: !0,
                configurable: !0
            });
        Object.defineProperty(a.prototype, "currentFrame", {
            get: function() {
                return this._currentFrameNum
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "currentFrameLabel", {
            get: function() {
                var a = this._getFrameLabelByFrame(this._currentFrameNum);
                return a && a.name
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "currentLabel", {
            get: function() {
                var a = this._getFrameLabelForFrame(this._currentFrameNum);
                return a ? a.name : null
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "frameRate", {
            get: function() {
                return this.movieClipData.frameRate
            },
            set: function(a) {
                a != this._movieClipData.frameRate && (this._movieClipData.frameRate = a, this._frameIntervalTime = 1E3 / this._movieClipData.frameRate)
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "isPlaying", {
            get: function() {
                return this._isPlaying
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "movieClipData", {
            get: function() {
                return this._movieClipData
            },
            set: function(a) {
                this._setMovieClipData(a)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setMovieClipData = function(a) {
            this._movieClipData != a && (this._movieClipData = a, this._init())
        };
        a.prototype.setPlayTimes = function(a) {
            if (0 > a || 1 <= a) this._playTimes = 0 > a ? -1 : Math.floor(a)
        };
        a.prototype.setIsStopped = function(a) {
            this._isStopped != a && ((this._isStopped = a) ? (this._playTimes = 0, b.Ticker.getInstance().unregister(this._advanceTime, this)) : (this._playTimes = 0 == this._playTimes ? 1 : this._playTimes, b.Ticker.getInstance().register(this._advanceTime,
                this)))
        };
        a.renderFilter = b.RenderFilter.getInstance();
        return a
    }(b.DisplayObject);
    b.MovieClip = c;
    c.prototype.__class__ = "egret.MovieClip"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(a, k) {
            b.call(this);
            this._name = a;
            this._frame = k | 0
        }
        __extends(a, b);
        Object.defineProperty(a.prototype, "name", {
            get: function() {
                return this._name
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "frame", {
            get: function() {
                return this._frame
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.clone = function() {
            return new a(this._name, this._frame)
        };
        return a
    }(b.EventDispatcher);
    b.FrameLabel = c;
    c.prototype.__class__ = "egret.FrameLabel"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._mcData = null;
            this.numFrames = 1;
            this.frames = [];
            this.labels = null;
            this.frameRate = 0;
            this.spriteSheet = this.textureData = null
        }
        __extends(a, d);
        a.prototype._init = function(a, b, d) {
            this.textureData = b;
            this.spriteSheet = d;
            this._setMCData(a)
        };
        a.prototype.getKeyFrameData = function(a) {
            a = this.frames[a - 1];
            a.frame && (a = this.frames[a.frame - 1]);
            return a
        };
        a.prototype.getTextureByFrame = function(a) {
            a = this.getKeyFrameData(a);
            if (a.res) {
                var b = this.getTextureByResName(a.res);
                b._offsetX = a.x | 0;
                b._offsetY = a.y | 0;
                return b
            }
            return null
        };
        a.prototype.getTextureByResName = function(a) {
            var b = this.spriteSheet.getTexture(a);
            b || (b = this.textureData[a], b = this.spriteSheet.createTexture(a, b.x, b.y, b.w, b.h));
            return b
        };
        a.prototype._isDataValid = function() {
            return 0 < this.frames.length
        };
        a.prototype._isTextureValid = function() {
            return null != this.textureData && null != this.spriteSheet
        };
        a.prototype._fillMCData = function(a) {
            this.frameRate = a.frameRate || 24;
            this._fillFramesData(a.frames);
            this._fillFrameLabelsData(a.labels)
        };
        a.prototype._fillFramesData = function(a) {
            for (var b = this.frames, d = a ? a.length : 0, c, g = 0; g < d; g++)
                if (c = a[g], b.push(c), c.duration) {
                    var f = parseInt(c.duration);
                    if (1 < f) {
                        c = b.length;
                        for (var l = 1; l < f; l++) b.push({
                            frame: c
                        })
                    }
                }
            this.numFrames = b.length
        };
        a.prototype._fillFrameLabelsData = function(a) {
            if (a) {
                var d = a.length;
                if (0 < d) {
                    this.labels = [];
                    for (var c = 0; c < d; c++) {
                        var h = a[c];
                        this.labels.push(new b.FrameLabel(h.name, h.frame))
                    }
                }
            }
        };
        Object.defineProperty(a.prototype, "mcData", {
            get: function() {
                return this._mcData
            },
            set: function(a) {
                this._setMCData(a)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setMCData = function(a) {
            this._mcData != a && (this._mcData = a) && this._fillMCData(a)
        };
        return a
    }(b.HashObject);
    b.MovieClipData = c;
    c.prototype.__class__ = "egret.MovieClipData"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(a, b) {
            d.call(this);
            this.enableCache = !0;
            this._mcDataCache = {};
            this._mcDataSet = a;
            this.setTexture(b)
        }
        __extends(a, d);
        a.prototype.clearCache = function() {
            this._mcDataCache = {}
        };
        a.prototype.generateMovieClipData = function(a) {
            void 0 === a && (a = "");
            if ("" == a && this._mcDataSet)
                for (a in this._mcDataSet.mc) break;
            if ("" == a) return null;
            var d = this._findFromCache(a, this._mcDataCache);
            d || (d = new b.MovieClipData, this._fillData(a, d, this._mcDataCache));
            return d
        };
        a.prototype._findFromCache =
            function(a, b) {
                return this.enableCache && b[a] ? b[a] : null
            };
        a.prototype._fillData = function(a, b, d) {
            if (this._mcDataSet) {
                var c = this._mcDataSet.mc[a];
                c && (b._init(c, this._mcDataSet.res, this._spriteSheet), this.enableCache && (d[a] = b))
            }
        };
        Object.defineProperty(a.prototype, "mcDataSet", {
            get: function() {
                return this._mcDataSet
            },
            set: function(a) {
                this._mcDataSet = a
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "texture", {
            set: function(a) {
                this.setTexture(a)
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype,
            "spriteSheet", {
                get: function() {
                    return this._spriteSheet
                },
                enumerable: !0,
                configurable: !0
            });
        a.prototype.setTexture = function(a) {
            this._spriteSheet = a ? new b.SpriteSheet(a) : null
        };
        return a
    }(b.EventDispatcher);
    b.MovieClipDataFactory = c;
    c.prototype.__class__ = "egret.MovieClipDataFactory"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a() {
            b.call(this);
            this._scaleY = this._scaleX = 1;
            this._size = 30;
            this._color = "#FFFFFF";
            this._fontFamily = "Arial";
            this._italic = this._bold = !1;
            this._textAlign = "left";
            this._multiline = this._visible = !1;
            this._maxChars = 0
        }
        __extends(a, b);
        a.prototype._getText = function() {
            return null
        };
        a.prototype._setText = function(a) {};
        a.prototype._setTextType = function(a) {};
        a.prototype._getTextType = function() {
            return null
        };
        a.prototype._open = function(a, b, d, c) {};
        a.prototype._show = function() {};
        a.prototype._add =
            function() {};
        a.prototype._remove = function() {};
        a.prototype._hide = function() {};
        a.prototype._addListeners = function() {};
        a.prototype._removeListeners = function() {};
        a.prototype._setScale = function(a, b) {
            this._scaleX = a;
            this._scaleY = b
        };
        a.prototype.changePosition = function(a, b) {};
        a.prototype._setSize = function(a) {
            this._size = a
        };
        a.prototype._setTextColor = function(a) {
            this._color = a
        };
        a.prototype._setTextFontFamily = function(a) {
            this._fontFamily = a
        };
        a.prototype._setBold = function(a) {
            this._bold = a
        };
        a.prototype._setItalic =
            function(a) {
                this._italic = a
            };
        a.prototype._setTextAlign = function(a) {
            this._textAlign = a
        };
        a.prototype._setVisible = function(a) {
            this._visible = a
        };
        a.prototype._setWidth = function(a) {};
        a.prototype._setHeight = function(a) {};
        a.prototype._setMultiline = function(a) {
            this._multiline = a
        };
        a.prototype._setMaxChars = function(a) {
            this._maxChars = a
        };
        a.prototype._resetStageText = function() {};
        a.create = function() {
            return null
        };
        return a
    }(b.EventDispatcher);
    b.StageText = c;
    c.prototype.__class__ = "egret.StageText"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.GET = "get";
        b.POST = "post";
        return b
    }();
    b.URLRequestMethod = c;
    c.prototype.__class__ = "egret.URLRequestMethod"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.BINARY = "binary";
        b.TEXT = "text";
        b.VARIABLES = "variables";
        b.TEXTURE = "texture";
        b.SOUND = "sound";
        return b
    }();
    b.URLLoaderDataFormat = c;
    c.prototype.__class__ = "egret.URLLoaderDataFormat"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(a) {
            void 0 === a && (a = null);
            b.call(this);
            this.variables = null;
            null !== a && this.decode(a)
        }
        __extends(a, b);
        a.prototype.decode = function(a) {
            this.variables || (this.variables = {});
            a = a.split("+").join(" ");
            for (var b, d = /[?&]?([^=]+)=([^&]*)/g; b = d.exec(a);) {
                var c = decodeURIComponent(b[1]);
                b = decodeURIComponent(b[2]);
                if (!1 == c in this.variables) this.variables[c] = b;
                else {
                    var g = this.variables[c];
                    g instanceof Array ? g.push(b) : this.variables[c] = [g, b]
                }
            }
        };
        a.prototype.toString = function() {
            if (!this.variables) return "";
            var a = this.variables,
                b = [],
                d;
            for (d in a) b.push(this.encodeValue(d, a[d]));
            return b.join("&")
        };
        a.prototype.encodeValue = function(a, b) {
            return b instanceof Array ? this.encodeArray(a, b) : encodeURIComponent(a) + "=" + encodeURIComponent(b)
        };
        a.prototype.encodeArray = function(a, b) {
            return a ? 0 == b.length ? encodeURIComponent(a) + "=" : b.map(function(b) {
                return encodeURIComponent(a) + "=" + encodeURIComponent(b)
            }).join("&") : ""
        };
        return a
    }(b.HashObject);
    b.URLVariables = c;
    c.prototype.__class__ = "egret.URLVariables"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        return function(b, a) {
            this.value = this.name = "";
            this.name = b;
            this.value = a
        }
    }();
    b.URLRequestHeader = c;
    c.prototype.__class__ = "egret.URLRequestHeader"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(a) {
            void 0 === a && (a = null);
            d.call(this);
            this.data = null;
            this.method = b.URLRequestMethod.GET;
            this.url = "";
            this.url = a
        }
        __extends(a, d);
        return a
    }(b.HashObject);
    b.URLRequest = c;
    c.prototype.__class__ = "egret.URLRequest"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(a) {
            void 0 === a && (a = null);
            d.call(this);
            this.dataFormat = b.URLLoaderDataFormat.TEXT;
            this._request = this.data = null;
            this._status = -1;
            a && this.load(a)
        }
        __extends(a, d);
        a.prototype.load = function(a) {
            this._request = a;
            this.data = null;
            b.MainContext.instance.netContext.proceed(this)
        };
        a.prototype.__recycle = function() {
            this.data = this._request = null
        };
        return a
    }(b.EventDispatcher);
    b.URLLoader = c;
    c.prototype.__class__ = "egret.URLLoader"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._sourceHeight = this._sourceWidth = this._textureHeight = this._textureWidth = this._offsetY = this._offsetX = this._bitmapHeight = this._bitmapWidth = this._bitmapY = this._bitmapX = 0;
            this._bitmapData = null
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "textureWidth", {
            get: function() {
                return this._textureWidth
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "textureHeight", {
            get: function() {
                return this._textureHeight
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "bitmapData", {
            get: function() {
                return this._bitmapData
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setBitmapData = function(a) {
            var d = b.MainContext.instance.rendererContext._texture_scale_factor;
            this._bitmapData = a;
            this._sourceWidth = a.width;
            this._sourceHeight = a.height;
            this._textureWidth = this._sourceWidth * d;
            this._textureHeight = this._sourceHeight * d;
            this._bitmapWidth = this._textureWidth;
            this._bitmapHeight = this._textureHeight;
            this._offsetX = this._offsetY = this._bitmapX = this._bitmapY =
                0
        };
        a.prototype.getPixel32 = function(a, b) {
            return this._bitmapData.getContext("2d").getImageData(a, b, 1, 1).data
        };
        return a
    }(b.HashObject);
    b.Texture = c;
    c.prototype.__class__ = "egret.Texture"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this)
        }
        __extends(a, d);
        a.prototype.init = function() {
            this._bitmapData = document.createElement("canvas");
            this.renderContext = b.RendererContext.createRendererContext(this._bitmapData)
        };
        a.prototype.drawToTexture = function(e, d, c) {
            var h = d || e.getBounds(b.Rectangle.identity);
            if (0 == h.width || 0 == h.height) return !1;
            this._bitmapData || this.init();
            var g = h.x,
                f = h.y;
            d = h.width;
            var h = h.height,
                l = b.MainContext.instance.rendererContext._texture_scale_factor,
                h = h / l;
            d = Math.round(d /
                l);
            h = Math.round(h);
            this.setSize(d, h);
            this.begin();
            e._worldTransform.identity();
            e._worldTransform.a = 1 / l;
            e._worldTransform.d = 1 / l;
            c && (e._worldTransform.a *= c, e._worldTransform.d *= c);
            c = e._anchorOffsetX;
            var m = e._anchorOffsetY;
            if (0 != e._anchorX || 0 != e._anchorY) c = e._anchorX * d, m = e._anchorY * h;
            this._offsetX = g + c;
            this._offsetY = f + m;
            e._worldTransform.append(1, 0, 0, 1, -this._offsetX, -this._offsetY);
            e.worldAlpha = 1;
            if (e instanceof b.DisplayObjectContainer)
                for (g = e._children, f = 0, c = g.length; f < c; f++) g[f]._updateTransform();
            this.renderContext.setTransform(e._worldTransform);
            g = b.RenderFilter.getInstance();
            f = g._drawAreaList.concat();
            g._drawAreaList.length = 0;
            this.renderContext.clearScreen();
            this.renderContext.onRenderStart();
            b.RendererContext.deleteTexture(this);
            e._filter && this.renderContext.setGlobalFilter(e._filter);
            e._colorTransform && this.renderContext.setGlobalColorTransform(e._colorTransform.matrix);
            (c = e.mask || e._scrollRect) && this.renderContext.pushMask(c);
            m = b.MainContext.__use_new_draw;
            b.MainContext.__use_new_draw = !1;
            e._render(this.renderContext);
            b.MainContext.__use_new_draw = m;
            c && this.renderContext.popMask();
            e._colorTransform && this.renderContext.setGlobalColorTransform(null);
            e._filter && this.renderContext.setGlobalFilter(null);
            a.identityRectangle.width = d;
            a.identityRectangle.height = h;
            g.addDrawArea(a.identityRectangle);
            this.renderContext.onRenderFinish();
            g._drawAreaList = f;
            this._sourceWidth = d;
            this._sourceHeight = h;
            this._textureWidth = this._sourceWidth * l;
            this._textureHeight = this._sourceHeight * l;
            this.end();
            return !0
        };
        a.prototype.setSize = function(a, b) {
            var d = this._bitmapData;
            d.width = a;
            d.height = b;
            d.style.width = a + "px";
            d.style.height = b + "px";
            this.renderContext._cacheCanvas && (this.renderContext._cacheCanvas.width = a, this.renderContext._cacheCanvas.height = b)
        };
        a.prototype.begin = function() {};
        a.prototype.end = function() {};
        a.prototype.dispose = function() {
            this._bitmapData && (this.renderContext = this._bitmapData = null)
        };
        a.identityRectangle = new b.Rectangle;
        return a
    }(b.Texture);
    b.RenderTexture = c;
    c.prototype.__class__ = "egret.RenderTexture"
})(egret ||
    (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this.renderCost = 0;
            this._texture_scale_factor = 1;
            this.profiler = b.Profiler.getInstance();
            a.blendModesForGL || a.initBlendMode()
        }
        __extends(a, d);
        Object.defineProperty(a.prototype, "texture_scale_factor", {
            get: function() {
                return this._texture_scale_factor
            },
            set: function(a) {
                this._setTextureScaleFactor(a)
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._setTextureScaleFactor = function(a) {
            this._texture_scale_factor = a
        };
        a.prototype.clearScreen = function() {};
        a.prototype.clearRect =
            function(a, b, d, c) {};
        a.prototype.drawImage = function(a, b, d, c, g, f, l, m, n, p) {
            this.profiler.onDrawImage()
        };
        a.prototype.drawImageScale9 = function(a, b, d, c, g, f, l, m, n, p) {
            return !1
        };
        a.prototype._addOneDraw = function() {
            this.profiler.onDrawImage()
        };
        a.prototype.setTransform = function(a) {};
        a.prototype.setAlpha = function(a, b) {};
        a.prototype.setupFont = function(a, b) {};
        a.prototype.measureText = function(a) {
            return 0
        };
        a.prototype.drawText = function(a, b, d, c, g, f) {
            this.profiler.onDrawImage()
        };
        a.prototype.strokeRect = function(a, b,
            d, c, g) {};
        a.prototype.pushMask = function(a) {};
        a.prototype.popMask = function() {};
        a.prototype.onRenderStart = function() {};
        a.prototype.onRenderFinish = function() {};
        a.prototype.setGlobalColorTransform = function(a) {};
        a.prototype.setGlobalFilter = function(a) {};
        a.createRendererContext = function(a) {
            return null
        };
        a.deleteTexture = function(a) {
            var d = b.MainContext.instance.rendererContext.gl;
            if (a = a._bitmapData) {
                var c = a.webGLTexture;
                if (c && d)
                    for (var h in c) d.deleteTexture(c[h]);
                a.webGLTexture = null
            }
        };
        a.initBlendMode = function() {
            a.blendModesForGL = {};
            a.blendModesForGL[b.BlendMode.NORMAL] = [1, 771];
            a.blendModesForGL[b.BlendMode.ADD] = [770, 1];
            a.blendModesForGL[b.BlendMode.ERASE] = [0, 771];
            a.blendModesForGL[b.BlendMode.ERASE_REVERSE] = [0, 770]
        };
        a.registerBlendModeForGL = function(e, d, c, h) {
            a.blendModesForGL[e] && !h ? b.Logger.warningWithErrorId(1005, e) : a.blendModesForGL[e] = [d, c]
        };
        a.imageSmoothingEnabled = !0;
        a.blendModesForGL = null;
        return a
    }(b.HashObject);
    b.RendererContext = c;
    c.prototype.__class__ = "egret.RendererContext"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.MOUSE = "mouse";
        b.TOUCH = "touch";
        b.mode = "touch";
        return b
    }();
    b.InteractionMode = c;
    c.prototype.__class__ = "egret.InteractionMode"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._currentTouchTarget = {};
            this.maxTouches = 2;
            this.touchDownTarget = {};
            this.touchingIdentifiers = [];
            this.lastTouchY = this.lastTouchX = -1
        }
        __extends(a, d);
        a.prototype.run = function() {};
        a.prototype.getTouchData = function(a, b, d) {
            var c = this._currentTouchTarget[a];
            null == c && (c = {}, this._currentTouchTarget[a] = c);
            c.stageX = b;
            c.stageY = d;
            c.identifier = a;
            return c
        };
        a.prototype.dispatchEvent = function(a, d) {
            b.TouchEvent.dispatchTouchEvent(d.target, a, d.identifier, d.stageX,
                d.stageY, !1, !1, !1, !0 == this.touchDownTarget[d.identifier])
        };
        a.prototype.onTouchBegan = function(a, d, c) {
            if (this.touchingIdentifiers.length != this.maxTouches) {
                var h = b.MainContext.instance.stage.hitTest(a, d);
                h && (a = this.getTouchData(c, a, d), this.touchDownTarget[c] = !0, a.target = h, a.beginTarget = h, this.dispatchEvent(b.TouchEvent.TOUCH_BEGIN, a));
                this.touchingIdentifiers.push(c)
            }
        };
        a.prototype.onTouchMove = function(a, d, c) {
            if (-1 != this.touchingIdentifiers.indexOf(c) && (a != this.lastTouchX || d != this.lastTouchY)) {
                this.lastTouchX =
                    a;
                this.lastTouchY = d;
                var h = b.MainContext.instance.stage.hitTest(a, d);
                h && (a = this.getTouchData(c, a, d), a.target = h, this.dispatchEvent(b.TouchEvent.TOUCH_MOVE, a))
            }
        };
        a.prototype.onTouchEnd = function(a, d, c) {
            var h = this.touchingIdentifiers.indexOf(c); - 1 != h && (this.touchingIdentifiers.splice(h, 1), h = b.MainContext.instance.stage.hitTest(a, d)) && (a = this.getTouchData(c, a, d), delete this.touchDownTarget[c], c = a.beginTarget, a.target = h, this.dispatchEvent(b.TouchEvent.TOUCH_END, a), c == h ? this.dispatchEvent(b.TouchEvent.TOUCH_TAP,
                a) : a.beginTarget && (a.target = a.beginTarget, this.dispatchEvent(b.TouchEvent.TOUCH_RELEASE_OUTSIDE, a)), delete this._currentTouchTarget[a.identifier])
        };
        return a
    }(b.HashObject);
    b.TouchContext = c;
    c.prototype.__class__ = "egret.TouchContext"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this)
        }
        __extends(a, d);
        a.prototype.proceed = function(a) {};
        a._getUrl = function(a) {
            var d = a.url; - 1 == d.indexOf("?") && a.method == b.URLRequestMethod.GET && a.data && a.data instanceof b.URLVariables && (d = d + "?" + a.data.toString());
            return d
        };
        a.prototype.getChangeList = function() {
            return []
        };
        return a
    }(b.HashObject);
    b.NetContext = c;
    c.prototype.__class__ = "egret.NetContext"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a() {
            b.call(this);
            this.frameRate = 60
        }
        __extends(a, b);
        a.prototype.executeMainLoop = function(a, b) {};
        return a
    }(b.HashObject);
    b.DeviceContext = c;
    c.prototype.__class__ = "egret.DeviceContext"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.call = function(a, e) {};
        b.addCallback = function(a, e) {};
        return b
    }();
    b.ExternalInterface = c;
    c.prototype.__class__ = "egret.ExternalInterface"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this.trans = null;
            this.ua = navigator.userAgent.toLowerCase();
            this.trans = this._getTrans()
        }
        __extends(a, d);
        a.getInstance = function() {
            null == a.instance && (a.instance = new a);
            return a.instance
        };
        Object.defineProperty(a.prototype, "isMobile", {
            get: function() {
                b.Logger.warningWithErrorId(1E3);
                return b.MainContext.deviceType == b.MainContext.DEVICE_MOBILE
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype._getHeader = function(a) {
            if ("transform" in a) return "";
            for (var b = ["webkit",
                "ms", "Moz", "O"
            ], d = 0; d < b.length; d++)
                if (b[d] + "Transform" in a) return b[d];
            return ""
        };
        a.prototype._getTrans = function() {
            var a = document.createElement("div").style,
                a = this._getHeader(a);
            return "" == a ? "transform" : a + "Transform"
        };
        a.prototype.$new = function(a) {
            return this.$(document.createElement(a))
        };
        a.prototype.$ = function(e) {
            var d = document;
            if (e = e instanceof HTMLElement ? e : d.querySelector(e)) e.find = e.find || this.$, e.hasClass = e.hasClass || function(a) {
                    return this.className.match(new RegExp("(\\s|^)" + a + "(\\s|$)"))
                }, e.addClass =
                e.addClass || function(a) {
                    this.hasClass(a) || (this.className && (this.className += " "), this.className += a);
                    return this
                }, e.removeClass = e.removeClass || function(a) {
                    this.hasClass(a) && (this.className = this.className.replace(a, ""));
                    return this
                }, e.remove = e.remove || function() {}, e.appendTo = e.appendTo || function(a) {
                    a.appendChild(this);
                    return this
                }, e.prependTo = e.prependTo || function(a) {
                    a.childNodes[0] ? a.insertBefore(this, a.childNodes[0]) : a.appendChild(this);
                    return this
                }, e.transforms = e.transforms || function() {
                    this.style[a.getInstance().trans] =
                        a.getInstance().translate(this.position) + a.getInstance().rotate(this.rotation) + a.getInstance().scale(this.scale) + a.getInstance().skew(this.skew);
                    return this
                }, e.position = e.position || {
                    x: 0,
                    y: 0
                }, e.rotation = e.rotation || 0, e.scale = e.scale || {
                    x: 1,
                    y: 1
                }, e.skew = e.skew || {
                    x: 0,
                    y: 0
                }, e.translates = function(a, e) {
                    this.position.x = a;
                    this.position.y = e - b.MainContext.instance.stage.stageHeight;
                    this.transforms();
                    return this
                }, e.rotate = function(a) {
                    this.rotation = a;
                    this.transforms();
                    return this
                }, e.resize = function(a, e) {
                    this.scale.x =
                        a;
                    this.scale.y = e;
                    this.transforms();
                    return this
                }, e.setSkew = function(a, e) {
                    this.skew.x = a;
                    this.skew.y = e;
                    this.transforms();
                    return this
                };
            return e
        };
        a.prototype.translate = function(a) {
            return "translate(" + a.x + "px, " + a.y + "px) "
        };
        a.prototype.rotate = function(a) {
            return "rotate(" + a + "deg) "
        };
        a.prototype.scale = function(a) {
            return "scale(" + a.x + ", " + a.y + ") "
        };
        a.prototype.skew = function(a) {
            return "skewX(" + -a.x + "deg) skewY(" + a.y + "deg)"
        };
        return a
    }(b.HashObject);
    b.Browser = c;
    c.prototype.__class__ = "egret.Browser"
})(egret || (egret = {}));
(function(b) {
    (function(b) {
        b.getItem = function(b) {
            return null
        };
        b.setItem = function(b, a) {
            return !1
        };
        b.removeItem = function(b) {};
        b.clear = function() {}
    })(b.localStorage || (b.localStorage = {}))
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function d() {}
        d.parse = function(a) {
            a = b.SAXParser.getInstance().parserXML(a);
            if (!a || !a.childNodes) return null;
            for (var e = a.childNodes.length, c = !1, q = 0; q < e; q++) {
                var h = a.childNodes[q];
                if (1 == h.nodeType) {
                    c = !0;
                    break
                }
            }
            return c ? d.parseNode(h) : null
        };
        d.parseNode = function(a) {
            if (!a || 1 != a.nodeType) return null;
            var e = {};
            e.localName = a.localName;
            e.name = a.nodeName;
            a.namespaceURI && (e.namespace = a.namespaceURI);
            a.prefix && (e.prefix = a.prefix);
            for (var b = a.attributes, c = b.length, h = 0; h < c; h++) {
                var g =
                    b[h],
                    f = g.name;
                0 != f.indexOf("xmlns:") && (e["$" + f] = g.value)
            }
            b = a.childNodes;
            c = b.length;
            for (h = 0; h < c; h++)
                if (g = d.parseNode(b[h])) e.children || (e.children = []), g.parent = e, e.children.push(g);
                !e.children && (a = a.textContent.trim()) && (e.text = a);
            return e
        };
        d.findChildren = function(a, e, b) {
            b ? b.length = 0 : b = [];
            d.findByPath(a, e, b);
            return b
        };
        d.findByPath = function(a, e, b) {
            var c = e.indexOf("."),
                h; - 1 == c ? (h = e, c = !0) : (h = e.substring(0, c), e = e.substring(c + 1), c = !1);
            if (a = a.children)
                for (var g = a.length, f = 0; f < g; f++) {
                    var l = a[f];
                    l.localName ==
                        h && (c ? b.push(l) : d.findByPath(l, e, b))
                }
        };
        d.getAttributes = function(a, e) {
            e ? e.length = 0 : e = [];
            for (var b in a) "$" == b.charAt(0) && e.push(b.substring(1));
            return e
        };
        return d
    }();
    b.XML = c;
    c.prototype.__class__ = "egret.XML"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function a() {}
        a.LITTLE_ENDIAN = "LITTLE_ENDIAN";
        a.BIG_ENDIAN = "BIG_ENDIAN";
        return a
    }();
    b.Endian = c;
    c.prototype.__class__ = "egret.Endian";
    var d = function() {
        function a(a) {
            this.BUFFER_EXT_SIZE = 0;
            this.EOF_code_point = this.EOF_byte = -1;
            this._setArrayBuffer(a || new ArrayBuffer(this.BUFFER_EXT_SIZE));
            this.endian = c.BIG_ENDIAN
        }
        a.prototype._setArrayBuffer = function(a) {
            this.write_position = a.byteLength;
            this.data = new DataView(a);
            this._position = 0
        };
        a.prototype.setArrayBuffer = function(a) {};
        Object.defineProperty(a.prototype,
            "buffer", {
                get: function() {
                    return this.data.buffer
                },
                set: function(a) {
                    this.data = new DataView(a)
                },
                enumerable: !0,
                configurable: !0
            });
        Object.defineProperty(a.prototype, "dataView", {
            get: function() {
                return this.data
            },
            set: function(a) {
                this.data = a;
                this.write_position = a.byteLength
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "bufferOffset", {
            get: function() {
                return this.data.byteOffset
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "position", {
            get: function() {
                return this._position
            },
            set: function(a) {
                this._position < a && !this.validate(a - this._position) || (this._position = a, this.write_position = a > this.write_position ? a : this.write_position)
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "length", {
            get: function() {
                return this.write_position
            },
            set: function(a) {
                this.validateBuffer(a)
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(a.prototype, "bytesAvailable", {
            get: function() {
                return this.data.byteLength - this._position
            },
            enumerable: !0,
            configurable: !0
        });
        a.prototype.clear =
            function() {
                this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))
            };
        a.prototype.readBoolean = function() {
            return this.validate(a.SIZE_OF_BOOLEAN) ? 0 != this.data.getUint8(this.position++) : null
        };
        a.prototype.readByte = function() {
            return this.validate(a.SIZE_OF_INT8) ? this.data.getInt8(this.position++) : null
        };
        a.prototype.readBytes = function(e, b, d) {
            void 0 === b && (b = 0);
            void 0 === d && (d = 0);
            if (0 == d) d = this.bytesAvailable;
            else if (!this.validate(d)) return null;
            e ? e.validateBuffer(d) : e = new a(new ArrayBuffer(d));
            for (var c =
                0; c < d; c++) e.data.setUint8(c + b, this.data.getUint8(this.position++))
        };
        a.prototype.readDouble = function() {
            if (!this.validate(a.SIZE_OF_FLOAT64)) return null;
            var e = this.data.getFloat64(this.position, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_FLOAT64;
            return e
        };
        a.prototype.readFloat = function() {
            if (!this.validate(a.SIZE_OF_FLOAT32)) return null;
            var e = this.data.getFloat32(this.position, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_FLOAT32;
            return e
        };
        a.prototype.readInt = function() {
            if (!this.validate(a.SIZE_OF_INT32)) return null;
            var e = this.data.getInt32(this.position, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_INT32;
            return e
        };
        a.prototype.readMultiByte = function(a, b) {
            return this.validate(a) ? "" : null
        };
        a.prototype.readShort = function() {
            if (!this.validate(a.SIZE_OF_INT16)) return null;
            var e = this.data.getInt16(this.position, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_INT16;
            return e
        };
        a.prototype.readUnsignedByte = function() {
            return this.validate(a.SIZE_OF_UINT8) ? this.data.getUint8(this.position++) : null
        };
        a.prototype.readUnsignedInt =
            function() {
                if (!this.validate(a.SIZE_OF_UINT32)) return null;
                var e = this.data.getUint32(this.position, this.endian == c.LITTLE_ENDIAN);
                this.position += a.SIZE_OF_UINT32;
                return e
            };
        a.prototype.readUnsignedShort = function() {
            if (!this.validate(a.SIZE_OF_UINT16)) return null;
            var e = this.data.getUint16(this.position, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_UINT16;
            return e
        };
        a.prototype.readUTF = function() {
            if (!this.validate(a.SIZE_OF_UINT16)) return null;
            var e = this.data.getUint16(this.position, this.endian ==
                c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_UINT16;
            return 0 < e ? this.readUTFBytes(e) : ""
        };
        a.prototype.readUTFBytes = function(a) {
            if (!this.validate(a)) return null;
            var b = new Uint8Array(this.buffer, this.bufferOffset + this.position, a);
            this.position += a;
            return this.decodeUTF8(b)
        };
        a.prototype.writeBoolean = function(e) {
            this.validateBuffer(a.SIZE_OF_BOOLEAN);
            this.data.setUint8(this.position++, e ? 1 : 0)
        };
        a.prototype.writeByte = function(e) {
            this.validateBuffer(a.SIZE_OF_INT8);
            this.data.setInt8(this.position++, e)
        };
        a.prototype.writeBytes =
            function(a, b, d) {
                void 0 === b && (b = 0);
                void 0 === d && (d = 0);
                if (!(0 > b || 0 > d) && (d = 0 == d ? a.length - b : Math.min(a.length - b, d), 0 < d)) {
                    this.validateBuffer(d);
                    a = new DataView(a.buffer);
                    for (var c = b; c < d + b; c++) this.data.setUint8(this.position++, a.getUint8(c))
                }
            };
        a.prototype.writeDouble = function(e) {
            this.validateBuffer(a.SIZE_OF_FLOAT64);
            this.data.setFloat64(this.position, e, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_FLOAT64
        };
        a.prototype.writeFloat = function(e) {
            this.validateBuffer(a.SIZE_OF_FLOAT32);
            this.data.setFloat32(this.position,
                e, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_FLOAT32
        };
        a.prototype.writeInt = function(e) {
            this.validateBuffer(a.SIZE_OF_INT32);
            this.data.setInt32(this.position, e, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_INT32
        };
        a.prototype.writeShort = function(e) {
            this.validateBuffer(a.SIZE_OF_INT16);
            this.data.setInt16(this.position, e, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_INT16
        };
        a.prototype.writeUnsignedInt = function(e) {
            this.validateBuffer(a.SIZE_OF_UINT32);
            this.data.setUint32(this.position,
                e, this.endian == c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_UINT32
        };
        a.prototype.writeUTF = function(e) {
            e = this.encodeUTF8(e);
            var b = e.length;
            this.validateBuffer(a.SIZE_OF_UINT16 + b);
            this.data.setUint16(this.position, b, this.endian === c.LITTLE_ENDIAN);
            this.position += a.SIZE_OF_UINT16;
            this._writeUint8Array(e, !1)
        };
        a.prototype.writeUTFBytes = function(a) {
            this._writeUint8Array(this.encodeUTF8(a))
        };
        a.prototype.toString = function() {
            return "[ByteArray] length:" + this.length + ", bytesAvailable:" + this.bytesAvailable
        };
        a.prototype._writeUint8Array =
            function(a, b) {
                void 0 === b && (b = !0);
                b && this.validateBuffer(this.position + a.length);
                for (var d = 0; d < a.length; d++) this.data.setUint8(this.position++, a[d])
            };
        a.prototype.validate = function(a) {
            if (0 < this.data.byteLength && this._position + a <= this.data.byteLength) return !0;
            throw b.getString(1025);
        };
        a.prototype.validateBuffer = function(a) {
            this.write_position = a > this.write_position ? a : this.write_position;
            a += this._position;
            this.data.byteLength < a && (a = new Uint8Array(new ArrayBuffer(a + this.BUFFER_EXT_SIZE)), a.set(new Uint8Array(this.data.buffer)),
                this.buffer = a.buffer)
        };
        a.prototype.encodeUTF8 = function(a) {
            var b = 0;
            a = this.stringToCodePoints(a);
            for (var d = []; a.length > b;) {
                var c = a[b++];
                if (this.inRange(c, 55296, 57343)) this.encoderError(c);
                else if (this.inRange(c, 0, 127)) d.push(c);
                else {
                    var g, f;
                    this.inRange(c, 128, 2047) ? (g = 1, f = 192) : this.inRange(c, 2048, 65535) ? (g = 2, f = 224) : this.inRange(c, 65536, 1114111) && (g = 3, f = 240);
                    for (d.push(this.div(c, Math.pow(64, g)) + f); 0 < g;) {
                        var l = this.div(c, Math.pow(64, g - 1));
                        d.push(128 + l % 64);
                        g -= 1
                    }
                }
            }
            return new Uint8Array(d)
        };
        a.prototype.decodeUTF8 =
            function(a) {
                for (var b = 0, d = "", c, g = 0, f = 0, l = 0, m = 0; a.length > b;) {
                    c = a[b++];
                    if (c === this.EOF_byte) c = 0 !== f ? this.decoderError(!1) : this.EOF_code_point;
                    else if (0 === f) this.inRange(c, 0, 127) || (this.inRange(c, 194, 223) ? (f = 1, m = 128, g = c - 192) : this.inRange(c, 224, 239) ? (f = 2, m = 2048, g = c - 224) : this.inRange(c, 240, 244) ? (f = 3, m = 65536, g = c - 240) : this.decoderError(!1), g *= Math.pow(64, f), c = null);
                    else if (this.inRange(c, 128, 191))
                        if (l += 1, g += (c - 128) * Math.pow(64, f - l), l !== f) c = null;
                        else {
                            var n = g,
                                p = m,
                                m = l = f = g = 0;
                            c = this.inRange(n, p, 1114111) && !this.inRange(n,
                                55296, 57343) ? n : this.decoderError(!1, c)
                        } else m = l = f = g = 0, b--, c = this.decoderError(!1, c);
                    null !== c && c !== this.EOF_code_point && (65535 >= c ? 0 < c && (d += String.fromCharCode(c)) : (c -= 65536, d += String.fromCharCode(55296 + (c >> 10 & 1023)), d += String.fromCharCode(56320 + (c & 1023))))
                }
                return d
            };
        a.prototype.encoderError = function(a) {
            throw b.getString(1026, a);
        };
        a.prototype.decoderError = function(a, d) {
            if (a) throw b.getString(1027);
            return d || 65533
        };
        a.prototype.inRange = function(a, b, d) {
            return b <= a && a <= d
        };
        a.prototype.div = function(a, b) {
            return Math.floor(a /
                b)
        };
        a.prototype.stringToCodePoints = function(a) {
            for (var b = [], d = 0, c = a.length; d < a.length;) {
                var g = a.charCodeAt(d);
                if (this.inRange(g, 55296, 57343))
                    if (this.inRange(g, 56320, 57343)) b.push(65533);
                    else if (d === c - 1) b.push(65533);
                else {
                    var f = a.charCodeAt(d + 1);
                    this.inRange(f, 56320, 57343) ? (g &= 1023, f &= 1023, d += 1, b.push(65536 + (g << 10) + f)) : b.push(65533)
                } else b.push(g);
                d += 1
            }
            return b
        };
        a.SIZE_OF_BOOLEAN = 1;
        a.SIZE_OF_INT8 = 1;
        a.SIZE_OF_INT16 = 2;
        a.SIZE_OF_INT32 = 4;
        a.SIZE_OF_UINT8 = 1;
        a.SIZE_OF_UINT16 = 2;
        a.SIZE_OF_UINT32 = 4;
        a.SIZE_OF_FLOAT32 =
            4;
        a.SIZE_OF_FLOAT64 = 8;
        return a
    }();
    b.ByteArray = d;
    d.prototype.__class__ = "egret.ByteArray"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(a, b, c) {
            d.call(this);
            this._target = null;
            this.loop = this.ignoreGlobalPause = this._useTicks = !1;
            this._actions = this._steps = this.pluginData = null;
            this.paused = !1;
            this.duration = 0;
            this._prevPos = -1;
            this.position = null;
            this._stepPosition = this._prevPosition = 0;
            this.passive = !1;
            this.initialize(a, b, c)
        }
        __extends(a, d);
        a.get = function(e, b, d, c) {
            void 0 === b && (b = null);
            void 0 === d && (d = null);
            void 0 === c && (c = !1);
            c && a.removeTweens(e);
            return new a(e, b, d)
        };
        a.removeTweens = function(e) {
            if (e.tween_count) {
                for (var b =
                    a._tweens, d = b.length - 1; 0 <= d; d--) b[d]._target == e && (b[d].paused = !0, b.splice(d, 1));
                e.tween_count = 0
            }
        };
        a.pauseTweens = function(a) {
            if (a.tween_count)
                for (var d = b.Tween._tweens, c = d.length - 1; 0 <= c; c--) d[c]._target == a && (d[c].paused = !0)
        };
        a.resumeTweens = function(a) {
            if (a.tween_count)
                for (var d = b.Tween._tweens, c = d.length - 1; 0 <= c; c--) d[c]._target == a && (d[c].paused = !1)
        };
        a.tick = function(e, b) {
            void 0 === b && (b = !1);
            for (var d = a._tweens.concat(), c = d.length - 1; 0 <= c; c--) {
                var g = d[c];
                b && !g.ignoreGlobalPause || g.paused || g.tick(g._useTicks ?
                    1 : e)
            }
        };
        a._register = function(e, d) {
            var c = e._target,
                h = a._tweens;
            if (d) c && (c.tween_count = 0 < c.tween_count ? c.tween_count + 1 : 1), h.push(e), a._inited || (b.Ticker.getInstance().register(a.tick, null), a._inited = !0);
            else
                for (c && c.tween_count--, c = h.length; c--;)
                    if (h[c] == e) {
                        h.splice(c, 1);
                        break
                    }
        };
        a.removeAllTweens = function() {
            for (var e = a._tweens, b = 0, d = e.length; b < d; b++) {
                var c = e[b];
                c.paused = !0;
                c._target.tweenjs_count = 0
            }
            e.length = 0
        };
        a.prototype.initialize = function(e, b, d) {
            this._target = e;
            b && (this._useTicks = b.useTicks, this.ignoreGlobalPause =
                b.ignoreGlobalPause, this.loop = b.loop, b.onChange && this.addEventListener("change", b.onChange, b.onChangeObj), b.override && a.removeTweens(e));
            this.pluginData = d || {};
            this._curQueueProps = {};
            this._initQueueProps = {};
            this._steps = [];
            this._actions = [];
            b && b.paused ? this.paused = !0 : a._register(this, !0);
            b && null != b.position && this.setPosition(b.position, a.NONE)
        };
        a.prototype.setPosition = function(a, b) {
            void 0 === b && (b = 1);
            0 > a && (a = 0);
            var d = a,
                c = !1;
            d >= this.duration && (this.loop ? d %= this.duration : (d = this.duration, c = !0));
            if (d == this._prevPos) return c;
            var g = this._prevPos;
            this.position = this._prevPos = d;
            this._prevPosition = a;
            if (this._target)
                if (c) this._updateTargetProps(null, 1);
                else if (0 < this._steps.length) {
                for (var f = 0, l = this._steps.length; f < l && !(this._steps[f].t > d); f++);
                f = this._steps[f - 1];
                this._updateTargetProps(f, (this._stepPosition = d - f.t) / f.d)
            }
            0 != b && 0 < this._actions.length && (this._useTicks ? this._runActions(d, d) : 1 == b && d < g ? (g != this.duration && this._runActions(g, this.duration), this._runActions(0, d, !0)) : this._runActions(g, d));
            c && this.setPaused(!0);
            this.dispatchEventWith("change");
            return c
        };
        a.prototype._runActions = function(a, b, d) {
            void 0 === d && (d = !1);
            var c = a,
                g = b,
                f = -1,
                l = this._actions.length,
                m = 1;
            a > b && (c = b, g = a, f = l, l = m = -1);
            for (;
                (f += m) != l;) {
                b = this._actions[f];
                var n = b.t;
                (n == g || n > c && n < g || d && n == a) && b.f.apply(b.o, b.p)
            }
        };
        a.prototype._updateTargetProps = function(e, b) {
            var d, c, g, f;
            if (e || 1 != b) {
                if (this.passive = !!e.v) return;
                e.e && (b = e.e(b, 0, 1, 1));
                d = e.p0;
                c = e.p1
            } else this.passive = !1, d = c = this._curQueueProps;
            for (var l in this._initQueueProps) {
                null == (g = d[l]) && (d[l] = g = this._initQueueProps[l]);
                null ==
                    (f = c[l]) && (c[l] = f = g);
                g = g == f || 0 == b || 1 == b || "number" != typeof g ? 1 == b ? f : g : g + (f - g) * b;
                var m = !1;
                if (f = a._plugins[l])
                    for (var n = 0, p = f.length; n < p; n++) {
                        var r = f[n].tween(this, l, g, d, c, b, !!e && d == c, !e);
                        r == a.IGNORE ? m = !0 : g = r
                    }
                m || (this._target[l] = g)
            }
        };
        a.prototype.setPaused = function(e) {
            this.paused = e;
            a._register(this, !e);
            return this
        };
        a.prototype._cloneProps = function(a) {
            var b = {},
                d;
            for (d in a) b[d] = a[d];
            return b
        };
        a.prototype._addStep = function(a) {
            0 < a.d && (this._steps.push(a), a.t = this.duration, this.duration += a.d);
            return this
        };
        a.prototype._appendQueueProps = function(e) {
            var b, d, c, g, f, l;
            for (l in e)
                if (void 0 === this._initQueueProps[l]) {
                    d = this._target[l];
                    if (b = a._plugins[l])
                        for (c = 0, g = b.length; c < g; c++) d = b[c].init(this, l, d);
                    this._initQueueProps[l] = this._curQueueProps[l] = void 0 === d ? null : d
                }
            for (l in e) {
                d = this._curQueueProps[l];
                if (b = a._plugins[l])
                    for (f = f || {}, c = 0, g = b.length; c < g; c++) b[c].step && b[c].step(this, l, d, e[l], f);
                this._curQueueProps[l] = e[l]
            }
            f && this._appendQueueProps(f);
            return this._curQueueProps
        };
        a.prototype._addAction = function(a) {
            a.t =
                this.duration;
            this._actions.push(a);
            return this
        };
        a.prototype._set = function(a, b) {
            for (var d in a) b[d] = a[d]
        };
        a.prototype.wait = function(a, b) {
            if (null == a || 0 >= a) return this;
            var d = this._cloneProps(this._curQueueProps);
            return this._addStep({
                d: a,
                p0: d,
                p1: d,
                v: b
            })
        };
        a.prototype.to = function(a, b, d) {
            void 0 === d && (d = void 0);
            if (isNaN(b) || 0 > b) b = 0;
            return this._addStep({
                d: b || 0,
                p0: this._cloneProps(this._curQueueProps),
                e: d,
                p1: this._cloneProps(this._appendQueueProps(a))
            })
        };
        a.prototype.call = function(a, b, d) {
            void 0 === b && (b = void 0);
            void 0 === d && (d = void 0);
            return this._addAction({
                f: a,
                p: d ? d : [],
                o: b ? b : this._target
            })
        };
        a.prototype.set = function(a, b) {
            void 0 === b && (b = null);
            return this._addAction({
                f: this._set,
                o: this,
                p: [a, b ? b : this._target]
            })
        };
        a.prototype.play = function(a) {
            a || (a = this);
            return this.call(a.setPaused, a, [!1])
        };
        a.prototype.pause = function(a) {
            a || (a = this);
            return this.call(a.setPaused, a, [!0])
        };
        a.prototype.tick = function(a) {
            this.paused || this.setPosition(this._prevPosition + a)
        };
        a.NONE = 0;
        a.LOOP = 1;
        a.REVERSE = 2;
        a._tweens = [];
        a.IGNORE = {};
        a._plugins = {};
        a._inited = !1;
        return a
    }(b.EventDispatcher);
    b.Tween = c;
    c.prototype.__class__ = "egret.Tween"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function d() {
            b.Logger.fatalWithErrorId(1014)
        }
        d.get = function(a) {
            -1 > a && (a = -1);
            1 < a && (a = 1);
            return function(e) {
                return 0 == a ? e : 0 > a ? e * (e * -a + 1 + a) : e * ((2 - e) * a + (1 - a))
            }
        };
        d.getPowIn = function(a) {
            return function(e) {
                return Math.pow(e, a)
            }
        };
        d.getPowOut = function(a) {
            return function(e) {
                return 1 - Math.pow(1 - e, a)
            }
        };
        d.getPowInOut = function(a) {
            return function(e) {
                return 1 > (e *= 2) ? 0.5 * Math.pow(e, a) : 1 - 0.5 * Math.abs(Math.pow(2 - e, a))
            }
        };
        d.sineIn = function(a) {
            return 1 - Math.cos(a * Math.PI / 2)
        };
        d.sineOut = function(a) {
            return Math.sin(a *
                Math.PI / 2)
        };
        d.sineInOut = function(a) {
            return -0.5 * (Math.cos(Math.PI * a) - 1)
        };
        d.getBackIn = function(a) {
            return function(e) {
                return e * e * ((a + 1) * e - a)
            }
        };
        d.getBackOut = function(a) {
            return function(e) {
                return --e * e * ((a + 1) * e + a) + 1
            }
        };
        d.getBackInOut = function(a) {
            a *= 1.525;
            return function(e) {
                return 1 > (e *= 2) ? 0.5 * e * e * ((a + 1) * e - a) : 0.5 * ((e -= 2) * e * ((a + 1) * e + a) + 2)
            }
        };
        d.circIn = function(a) {
            return -(Math.sqrt(1 - a * a) - 1)
        };
        d.circOut = function(a) {
            return Math.sqrt(1 - --a * a)
        };
        d.circInOut = function(a) {
            return 1 > (a *= 2) ? -0.5 * (Math.sqrt(1 - a * a) - 1) : 0.5 *
                (Math.sqrt(1 - (a -= 2) * a) + 1)
        };
        d.bounceIn = function(a) {
            return 1 - d.bounceOut(1 - a)
        };
        d.bounceOut = function(a) {
            return a < 1 / 2.75 ? 7.5625 * a * a : a < 2 / 2.75 ? 7.5625 * (a -= 1.5 / 2.75) * a + 0.75 : a < 2.5 / 2.75 ? 7.5625 * (a -= 2.25 / 2.75) * a + 0.9375 : 7.5625 * (a -= 2.625 / 2.75) * a + 0.984375
        };
        d.bounceInOut = function(a) {
            return 0.5 > a ? 0.5 * d.bounceIn(2 * a) : 0.5 * d.bounceOut(2 * a - 1) + 0.5
        };
        d.getElasticIn = function(a, e) {
            var b = 2 * Math.PI;
            return function(d) {
                if (0 == d || 1 == d) return d;
                var c = e / b * Math.asin(1 / a);
                return -(a * Math.pow(2, 10 * (d -= 1)) * Math.sin((d - c) * b / e))
            }
        };
        d.getElasticOut =
            function(a, e) {
                var b = 2 * Math.PI;
                return function(d) {
                    if (0 == d || 1 == d) return d;
                    var c = e / b * Math.asin(1 / a);
                    return a * Math.pow(2, -10 * d) * Math.sin((d - c) * b / e) + 1
                }
            };
        d.getElasticInOut = function(a, e) {
            var b = 2 * Math.PI;
            return function(d) {
                var c = e / b * Math.asin(1 / a);
                return 1 > (d *= 2) ? -0.5 * a * Math.pow(2, 10 * (d -= 1)) * Math.sin((d - c) * b / e) : a * Math.pow(2, -10 * (d -= 1)) * Math.sin((d - c) * b / e) * 0.5 + 1
            }
        };
        d.quadIn = d.getPowIn(2);
        d.quadOut = d.getPowOut(2);
        d.quadInOut = d.getPowInOut(2);
        d.cubicIn = d.getPowIn(3);
        d.cubicOut = d.getPowOut(3);
        d.cubicInOut = d.getPowInOut(3);
        d.quartIn = d.getPowIn(4);
        d.quartOut = d.getPowOut(4);
        d.quartInOut = d.getPowInOut(4);
        d.quintIn = d.getPowIn(5);
        d.quintOut = d.getPowOut(5);
        d.quintInOut = d.getPowInOut(5);
        d.backIn = d.getBackIn(1.7);
        d.backOut = d.getBackOut(1.7);
        d.backInOut = d.getBackInOut(1.7);
        d.elasticIn = d.getElasticIn(1, 0.3);
        d.elasticOut = d.getElasticOut(1, 0.3);
        d.elasticInOut = d.getElasticInOut(1, 0.3 * 1.5);
        return d
    }();
    b.Ease = c;
    c.prototype.__class__ = "egret.Ease"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {
            this.path = "";
            this.audio = null;
            this.type = b.EFFECT
        }
        b.prototype.play = function(a) {
            void 0 === a && (a = !1);
            var e = this.audio;
            e && (isNaN(e.duration) || (e.currentTime = 0), e.loop = a, e.play())
        };
        b.prototype.pause = function() {
            var a = this.audio;
            a && a.pause()
        };
        b.prototype.load = function() {
            var a = this.audio;
            a && a.load()
        };
        b.prototype.addEventListener = function(a, e) {
            this.audio && this.audio.addEventListener(a, e, !1)
        };
        b.prototype.removeEventListener = function(a, e) {
            this.audio && this.audio.removeEventListener(a,
                e, !1)
        };
        b.prototype.setVolume = function(a) {
            var e = this.audio;
            e && (e.volume = a)
        };
        b.prototype.getVolume = function() {
            return this.audio ? this.audio.volume : 0
        };
        b.prototype.preload = function(a) {
            this.type = a
        };
        b.prototype._setAudio = function(a) {
            this.audio = a
        };
        b.MUSIC = "music";
        b.EFFECT = "effect";
        return b
    }();
    b.Sound = c;
    c.prototype.__class__ = "egret.Sound"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.isNumber = function(a) {
            return "number" === typeof a && !isNaN(a)
        };
        b.sin = function(a) {
            a = Math.round(a);
            a %= 360;
            0 > a && (a += 360);
            return 90 > a ? egret_sin_map[a] : 180 > a ? egret_cos_map[a - 90] : 270 > a ? -egret_sin_map[a - 180] : -egret_cos_map[a - 270]
        };
        b.cos = function(a) {
            a = Math.round(a);
            a %= 360;
            0 > a && (a += 360);
            return 90 > a ? egret_cos_map[a] : 180 > a ? -egret_sin_map[a - 90] : 270 > a ? -egret_cos_map[a - 180] : egret_sin_map[a - 270]
        };
        return b
    }();
    b.NumberUtils = c;
    c.prototype.__class__ = "egret.NumberUtils"
})(egret ||
    (egret = {}));
for (var egret_sin_map = {}, egret_cos_map = {}, i = 0; 90 >= i; i++) egret_sin_map[i] = Math.sin(i * egret.Matrix.DEG_TO_RAD), egret_cos_map[i] = Math.cos(i * egret.Matrix.DEG_TO_RAD);
Function.prototype.bind || (Function.prototype.bind = function(b) {
    if ("function" !== typeof this) throw new TypeError(egret.getString(1029));
    var c = Array.prototype.slice.call(arguments, 1),
        d = this,
        a = function() {},
        e = function() {
            return d.apply(this instanceof a && b ? this : b, c.concat(Array.prototype.slice.call(arguments)))
        };
    a.prototype = this.prototype;
    e.prototype = new a;
    return e
});
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(e) {
            void 0 === e && (e = 60);
            d.call(this);
            this.frameRate = e;
            this._time = 0;
            this._requestAnimationId = NaN;
            this._isActivate = !0;
            60 == e && (a.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame, a.cancelAnimationFrame = window.cancelAnimationFrame || window.msCancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.oCancelAnimationFrame ||
                window.cancelRequestAnimationFrame || window.msCancelRequestAnimationFrame || window.mozCancelRequestAnimationFrame || window.oCancelRequestAnimationFrame || window.webkitCancelRequestAnimationFrame);
            a.requestAnimationFrame || (a.requestAnimationFrame = function(a) {
                return window.setTimeout(a, 1E3 / e)
            });
            a.cancelAnimationFrame || (a.cancelAnimationFrame = function(a) {
                return window.clearTimeout(a)
            });
            a.instance = this;
            this.registerListener()
        }
        __extends(a, d);
        a.prototype.enterFrame = function() {
            var e = a.instance,
                d = a._thisObject,
                c = a._callback,
                h = b.getTimer(),
                g = h - e._time;
            e._requestAnimationId = a.requestAnimationFrame.call(window, a.prototype.enterFrame);
            c.call(d, g);
            e._time = h
        };
        a.prototype.executeMainLoop = function(e, b) {
            a._callback = e;
            a._thisObject = b;
            this.enterFrame()
        };
        a.prototype.reset = function() {
            var e = a.instance;
            e._requestAnimationId && (e._time = b.getTimer(), a.cancelAnimationFrame.call(window, e._requestAnimationId), e.enterFrame())
        };
        a.prototype.registerListener = function() {
            var e = this,
                d = function() {
                    e._isActivate && (e._isActivate = !1, b.MainContext.instance.stage.dispatchEvent(new b.Event(b.Event.DEACTIVATE)))
                },
                c = function() {
                    e._isActivate || (e._isActivate = !0, a.instance.reset(), b.MainContext.instance.stage.dispatchEvent(new b.Event(b.Event.ACTIVATE)))
                },
                h = function() {
                    document[g] ? d() : c()
                };
            window.addEventListener("focus", c, !1);
            window.addEventListener("blur", d, !1);
            var g, f;
            "undefined" !== typeof document.hidden ? (g = "hidden", f = "visibilitychange") : "undefined" !== typeof document.mozHidden ? (g = "mozHidden", f = "mozvisibilitychange") : "undefined" !== typeof document.msHidden ? (g = "msHidden", f = "msvisibilitychange") : "undefined" !== typeof document.webkitHidden ?
                (g = "webkitHidden", f = "webkitvisibilitychange") : "undefined" !== typeof document.oHidden && (g = "oHidden", f = "ovisibilitychange");
            "onpageshow" in window && "onpagehide" in window && (window.addEventListener("pageshow", c, !1), window.addEventListener("pagehide", d, !1));
            g && f && document.addEventListener(f, h, !1)
        };
        a.instance = null;
        a.requestAnimationFrame = null;
        a.cancelAnimationFrame = null;
        a._thisObject = null;
        a._callback = null;
        return a
    }(b.DeviceContext);
    b.HTML5DeviceContext = c;
    c.prototype.__class__ = "egret.HTML5DeviceContext"
})(egret ||
    (egret = {}));
var egret_html5_localStorage;
(function(b) {
    b.getItem = function(b) {
        return window.localStorage.getItem(b)
    };
    b.setItem = function(b, d) {
        try {
            return window.localStorage.setItem(b, d), !0
        } catch (a) {
            return egret.Logger.infoWithErrorId(1018, b, d), !1
        }
    };
    b.removeItem = function(b) {
        window.localStorage.removeItem(b)
    };
    b.clear = function() {
        window.localStorage.clear()
    };
    b.init = function() {
        for (var c in b) egret.localStorage[c] = b[c]
    }
})(egret_html5_localStorage || (egret_html5_localStorage = {}));
egret_html5_localStorage.init();
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(a, b) {
            void 0 === b && (b = !0);
            d.call(this);
            this.useCacheCanvas = b;
            this.canvas = a || this.createCanvas();
            this.canvasContext = this.canvas.getContext("2d");
            b ? (this._cacheCanvas = document.createElement("canvas"), this._cacheCanvas.width = this.canvas.width, this._cacheCanvas.height = this.canvas.height, this.drawCanvasContext = this._cacheCanvasContext = this._cacheCanvas.getContext("2d")) : this.drawCanvasContext = this.canvasContext;
            this.onResize();
            var c = this.drawCanvasContext.setTransform,
                h = this;
            this.drawCanvasContext.setTransform = function(a, e, b, d, k, p) {
                h._matrixA = a;
                h._matrixB = e;
                h._matrixC = b;
                h._matrixD = d;
                h._matrixTx = k;
                h._matrixTy = p;
                c.call(h.drawCanvasContext, a, e, b, d, k, p)
            };
            this._matrixA = 1;
            this._matrixC = this._matrixB = 0;
            this._matrixD = 1;
            this._transformTy = this._transformTx = this._matrixTy = this._matrixTx = 0;
            this.initBlendMode()
        }
        __extends(a, d);
        a.prototype.createCanvas = function() {
            var a = b.Browser.getInstance().$("#egretCanvas");
            if (!a) {
                var d = document.getElementById(b.StageDelegate.canvas_div_name),
                    a = b.Browser.getInstance().$new("canvas");
                a.id = "egretCanvas";
                d.appendChild(a)
            }
            b.MainContext.instance.stage.addEventListener(b.Event.RESIZE, this.onResize, this);
            return a
        };
        a.prototype.onResize = function() {
            if (this.canvas) {
                var a = document.getElementById(b.StageDelegate.canvas_div_name);
                this.canvas.width = b.MainContext.instance.stage.stageWidth;
                this.canvas.height = b.MainContext.instance.stage.stageHeight;
                this.canvas.style.width = a.style.width;
                this.canvas.style.height = a.style.height;
                this.useCacheCanvas && (this._cacheCanvas.width =
                    this.canvas.width, this._cacheCanvas.height = this.canvas.height);
                this.drawCanvasContext.imageSmoothingEnabled = b.RendererContext.imageSmoothingEnabled;
                this.drawCanvasContext.webkitImageSmoothingEnabled = b.RendererContext.imageSmoothingEnabled;
                this.drawCanvasContext.mozImageSmoothingEnabled = b.RendererContext.imageSmoothingEnabled;
                this.drawCanvasContext.msImageSmoothingEnabled = b.RendererContext.imageSmoothingEnabled
            }
        };
        a.prototype.clearScreen = function() {
            for (var a = b.RenderFilter.getInstance().getDrawAreaList(),
                d = 0, c = a.length; d < c; d++) {
                var h = a[d];
                this.clearRect(h.x, h.y, h.width, h.height)
            }
            a = b.MainContext.instance.stage;
            this.useCacheCanvas && this._cacheCanvasContext.clearRect(0, 0, a.stageWidth, a.stageHeight);
            this.renderCost = 0
        };
        a.prototype.clearRect = function(a, b, d, c) {
            this.canvasContext.clearRect(a, b, d, c)
        };
        a.prototype.drawImage = function(a, c, q, h, g, f, l, m, n, p) {
            void 0 === p && (p = void 0);
            var r = a._bitmapData;
            f += this._transformTx;
            l += this._transformTy;
            var t = b.getTimer();
            void 0 === p ? this.drawCanvasContext.drawImage(r, c, q, h,
                g, f, l, m, n) : this.drawRepeatImage(a, c, q, h, g, f, l, m, n, p);
            d.prototype.drawImage.call(this, a, c, q, h, g, f, l, m, n, p);
            this.renderCost += b.getTimer() - t
        };
        a.prototype.drawRepeatImage = function(a, d, c, h, g, f, l, m, n, p) {
            if (void 0 === a.pattern) {
                var r = b.MainContext.instance.rendererContext._texture_scale_factor,
                    t = a._bitmapData,
                    s = t;
                if (t.width != h || t.height != g || 1 != r) s = document.createElement("canvas"), s.width = h * r, s.height = g * r, s.getContext("2d").drawImage(t, d, c, h, g, 0, 0, h * r, g * r);
                d = this.drawCanvasContext.createPattern(s, p);
                a.pattern =
                    d
            }
            this.drawCanvasContext.fillStyle = a.pattern;
            this.drawCanvasContext.translate(f, l);
            this.drawCanvasContext.fillRect(0, 0, m, n);
            this.drawCanvasContext.translate(-f, -l)
        };
        a.prototype.setTransform = function(a) {
            1 == a.a && 0 == a.b && 0 == a.c && 1 == a.d && 1 == this._matrixA && 0 == this._matrixB && 0 == this._matrixC && 1 == this._matrixD ? (this._transformTx = a.tx - this._matrixTx, this._transformTy = a.ty - this._matrixTy) : (this._transformTx = this._transformTy = 0, this._matrixA == a.a && this._matrixB == a.b && this._matrixC == a.c && this._matrixD == a.d &&
                this._matrixTx == a.tx && this._matrixTy == a.ty || this.drawCanvasContext.setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty))
        };
        a.prototype.setAlpha = function(a, d) {
            this.drawCanvasContext.globalAlpha = a;
            d ? (this.blendValue = this.blendModes[d], this.drawCanvasContext.globalCompositeOperation = this.blendValue) : this.blendValue != b.BlendMode.NORMAL && (this.blendValue = this.blendModes[b.BlendMode.NORMAL], this.drawCanvasContext.globalCompositeOperation = this.blendValue)
        };
        a.prototype.initBlendMode = function() {
            this.blendModes = {};
            this.blendModes[b.BlendMode.NORMAL] =
                "source-over";
            this.blendModes[b.BlendMode.ADD] = "lighter";
            this.blendModes[b.BlendMode.ERASE] = "destination-out";
            this.blendModes[b.BlendMode.ERASE_REVERSE] = "destination-in"
        };
        a.prototype.setupFont = function(a, b) {
            void 0 === b && (b = null);
            b = b || {};
            var d = null == b.size ? a._size : b.size,
                c = null == b.fontFamily ? a._fontFamily : b.fontFamily,
                g = this.drawCanvasContext,
                f = (null == b.italic ? a._italic : b.italic) ? "italic " : "normal ",
                f = f + ((null == b.bold ? a._bold : b.bold) ? "bold " : "normal ");
            g.font = f + (d + "px " + c);
            g.textAlign = "left";
            g.textBaseline =
                "middle"
        };
        a.prototype.measureText = function(a) {
            return this.drawCanvasContext.measureText(a).width
        };
        a.prototype.drawText = function(a, c, q, h, g, f) {
            void 0 === f && (f = null);
            this.setupFont(a, f);
            f = f || {};
            var l;
            l = null != f.textColor ? b.toColorString(f.textColor) : a._textColorString;
            var m;
            m = null != f.strokeColor ? b.toColorString(f.strokeColor) : a._strokeColorString;
            var n;
            n = null != f.stroke ? f.stroke : a._stroke;
            var p = this.drawCanvasContext;
            p.fillStyle = l;
            p.strokeStyle = m;
            n && (p.lineWidth = 2 * n, p.strokeText(c, q + this._transformTx, h +
                this._transformTy, g || 65535));
            p.fillText(c, q + this._transformTx, h + this._transformTy, g || 65535);
            d.prototype.drawText.call(this, a, c, q, h, g, f)
        };
        a.prototype.strokeRect = function(a, b, d, c, g) {
            this.drawCanvasContext.strokeStyle = g;
            this.drawCanvasContext.strokeRect(a, b, d, c)
        };
        a.prototype.pushMask = function(a) {
            this.drawCanvasContext.save();
            this.drawCanvasContext.beginPath();
            this.drawCanvasContext.rect(a.x + this._transformTx, a.y + this._transformTy, a.width, a.height);
            this.drawCanvasContext.clip();
            this.drawCanvasContext.closePath()
        };
        a.prototype.popMask = function() {
            this.drawCanvasContext.restore();
            this.drawCanvasContext.setTransform(1, 0, 0, 1, 0, 0)
        };
        a.prototype.onRenderStart = function() {
            this.drawCanvasContext.save()
        };
        a.prototype.onRenderFinish = function() {
            this.drawCanvasContext.restore();
            this.drawCanvasContext.setTransform(1, 0, 0, 1, 0, 0);
            if (this.useCacheCanvas)
                for (var a = this._cacheCanvas.width, d = this._cacheCanvas.height, c = b.RenderFilter.getInstance().getDrawAreaList(), h = 0, g = c.length; h < g; h++) {
                    var f = c[h],
                        l = f.x,
                        m = f.y,
                        n = f.width,
                        f = f.height;
                    l + n > a && (n = a - l);
                    m + f > d && (f = d - m);
                    0 < n && 0 < f && this.canvasContext.drawImage(this._cacheCanvas, l, m, n, f, l, m, n, f)
                }
        };
        return a
    }(b.RendererContext);
    b.HTML5CanvasRenderer = c;
    c.prototype.__class__ = "egret.HTML5CanvasRenderer"
})(egret || (egret = {}));
var egret_h5_graphics;
(function(b) {
    b.beginFill = function(b, a) {
        void 0 === a && (a = 1);
        var e = "rgba(" + (b >> 16) + "," + ((b & 65280) >> 8) + "," + (b & 255) + "," + a + ")";
        this.fillStyleColor = e;
        this._pushCommand(new c(this._setStyle, this, [e]))
    };
    b.drawRect = function(b, a, e, k) {
        this._pushCommand(new c(function(a, e, b, d) {
            var c = this.renderContext;
            this.canvasContext.beginPath();
            this.canvasContext.rect(c._transformTx + a, c._transformTy + e, b, d);
            this.canvasContext.closePath()
        }, this, [b, a, e, k]));
        this._fill();
        this.checkRect(b, a, e, k)
    };
    b.drawCircle = function(b, a, e) {
        this._pushCommand(new c(function(a,
            e, b) {
            var d = this.renderContext;
            this.canvasContext.beginPath();
            this.canvasContext.arc(d._transformTx + a, d._transformTy + e, b, 0, 2 * Math.PI);
            this.canvasContext.closePath()
        }, this, [b, a, e]));
        this._fill();
        this.checkRect(b - e, a - e, 2 * e, 2 * e)
    };
    b.drawRoundRect = function(b, a, e, k, q, h) {
        this._pushCommand(new c(function(a, e, b, d, c, k) {
            var q = this.renderContext;
            a = q._transformTx + a;
            e = q._transformTy + e;
            c /= 2;
            k = k ? k / 2 : c;
            b = a + b;
            d = e + d;
            q = d - k;
            this.canvasContext.beginPath();
            this.canvasContext.moveTo(b, q);
            this.canvasContext.quadraticCurveTo(b,
                d, b - c, d);
            this.canvasContext.lineTo(a + c, d);
            this.canvasContext.quadraticCurveTo(a, d, a, d - k);
            this.canvasContext.lineTo(a, e + k);
            this.canvasContext.quadraticCurveTo(a, e, a + c, e);
            this.canvasContext.lineTo(b - c, e);
            this.canvasContext.quadraticCurveTo(b, e, b, e + k);
            this.canvasContext.lineTo(b, q);
            this.canvasContext.closePath()
        }, this, [b, a, e, k, q, h]));
        this._fill();
        this.checkRect(b, a, e, k)
    };
    b.drawEllipse = function(b, a, e, k) {
        this._pushCommand(new c(function(a, e, b, d) {
            var c = this.renderContext;
            this.canvasContext.save();
            a = c._transformTx +
                a;
            e = c._transformTy + e;
            var c = b > d ? b : d,
                k = b / c;
            d /= c;
            this.canvasContext.scale(k, d);
            this.canvasContext.beginPath();
            this.canvasContext.moveTo((a + b) / k, e / d);
            this.canvasContext.arc(a / k, e / d, c, 0, 2 * Math.PI);
            this.canvasContext.closePath();
            this.canvasContext.restore();
            this.canvasContext.stroke()
        }, this, [b, a, e, k]));
        this._fill();
        this.checkRect(b - e, a - k, 2 * e, 2 * k)
    };
    b.lineStyle = function(b, a, e, k, q, h, g, f) {
        void 0 === b && (b = NaN);
        void 0 === a && (a = 0);
        void 0 === e && (e = 1);
        void 0 === k && (k = !1);
        void 0 === q && (q = "normal");
        void 0 === h && (h = null);
        void 0 === g && (g = null);
        void 0 === f && (f = 3);
        this.strokeStyleColor && (this.createEndLineCommand(), this._pushCommand(this.endLineCommand));
        this.strokeStyleColor = a = "rgba(" + (a >> 16) + "," + ((a & 65280) >> 8) + "," + (a & 255) + "," + e + ")";
        this._pushCommand(new c(function(a, e) {
            this.canvasContext.lineWidth = a;
            this.canvasContext.strokeStyle = e;
            this.canvasContext.beginPath()
        }, this, [b, a]));
        this.moveTo(this.lineX, this.lineY)
    };
    b.lineTo = function(b, a) {
        this._pushCommand(new c(function(a, b) {
            var d = this.renderContext;
            this.canvasContext.lineTo(d._transformTx +
                a, d._transformTy + b)
        }, this, [b, a]));
        this.checkPoint(this.lineX, this.lineY);
        this.lineX = b;
        this.lineY = a;
        this.checkPoint(b, a)
    };
    b.curveTo = function(b, a, e, k) {
        this._pushCommand(new c(function(a, e, b, d) {
            var c = this.renderContext;
            this.canvasContext.quadraticCurveTo(c._transformTx + a, c._transformTy + e, c._transformTx + b, c._transformTy + d)
        }, this, [b, a, e, k]));
        this.checkPoint(this.lineX, this.lineY);
        this.lineX = e;
        this.lineY = k;
        this.checkPoint(b, a);
        this.checkPoint(e, k)
    };
    b.moveTo = function(b, a) {
        this._pushCommand(new c(function(a,
            b) {
            var d = this.renderContext;
            this.canvasContext.moveTo(d._transformTx + a, d._transformTy + b)
        }, this, [b, a]))
    };
    b.clear = function() {
        this.lineY = this.lineX = this.commandQueue.length = 0;
        this.fillStyleColor = this.strokeStyleColor = null;
        this._dirty = !1;
        this._maxY = this._maxX = this._minY = this._minX = 0;
        this._firstCheck = !0
    };
    b.createEndFillCommand = function() {
        this.endFillCommand || (this.endFillCommand = new c(function() {
            this.canvasContext.fill();
            this.canvasContext.closePath()
        }, this, null))
    };
    b.endFill = function() {
        null != this.fillStyleColor &&
            this._fill()
    };
    b._fill = function() {
        this.fillStyleColor && (this.createEndFillCommand(), this._pushCommand(this.endFillCommand), this.fillStyleColor = null)
    };
    b.createEndLineCommand = function() {
        this.endLineCommand || (this.endLineCommand = new c(function() {
            this.canvasContext.stroke();
            this.canvasContext.closePath()
        }, this, null))
    };
    b._pushCommand = function(b) {
        this.commandQueue.push(b);
        this._dirty = !0
    };
    b._draw = function(b) {
        var a = this.commandQueue.length;
        if (0 != a) {
            this.renderContext = b;
            b = this.canvasContext = this.renderContext.drawCanvasContext;
            b.save();
            this.strokeStyleColor && 0 < a && this.commandQueue[a - 1] != this.endLineCommand && (this.createEndLineCommand(), this._pushCommand(this.endLineCommand), a = this.commandQueue.length);
            for (var e = 0; e < a; e++) {
                var c = this.commandQueue[e];
                c.method.apply(c.thisObject, c.args)
            }
            b.restore();
            this._dirty = !1
        }
    };
    var c = function() {
        return function(b, a, e) {
            this.method = b;
            this.thisObject = a;
            this.args = e
        }
    }();
    c.prototype.__class__ = "egret_h5_graphics.Command";
    b._setStyle = function(b) {
        this.canvasContext.fillStyle = b;
        this.canvasContext.beginPath()
    };
    b.init = function() {
        for (var d in b) egret.Graphics.prototype[d] = b[d];
        egret.RendererContext.createRendererContext = function(a) {
            return new egret.HTML5CanvasRenderer(a, !1)
        }
    }
})(egret_h5_graphics || (egret_h5_graphics = {}));
egret_h5_graphics.init();
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(a) {
            d.call(this);
            this.glID = this.gl = this.canvas = null;
            this.size = 2E3;
            this.vertices = null;
            this.vertSize = 5;
            this.indices = null;
            this.projectionY = this.projectionX = NaN;
            this.shaderManager = null;
            this.contextLost = !1;
            this.glContextId = 0;
            this.currentBlendMode = "";
            this.currentBaseTexture = null;
            this.currentBatchSize = 0;
            this.worldTransform = null;
            this.worldAlpha = 1;
            this.maskList = [];
            this.maskDataFreeList = [];
            this.graphicsIndexBuffer = this.graphicsBuffer = this.graphicsIndices = this.graphicsPoints =
                this.filterType = this.colorTransformMatrix = null;
            this.graphicsStyle = {};
            this.canvas = a || this.createCanvas();
            this.canvas.addEventListener("webglcontextlost", this.handleContextLost.bind(this), !1);
            this.canvas.addEventListener("webglcontextrestored", this.handleContextRestored.bind(this), !1);
            this.html5Canvas = document.createElement("canvas");
            this.canvasContext = new b.HTML5CanvasRenderer(this.html5Canvas);
            this.onResize();
            this.projectionX = this.canvas.width / 2;
            this.projectionY = -this.canvas.height / 2;
            a = 6 * this.size;
            this.vertices = new Float32Array(4 * this.size * this.vertSize);
            this.indices = new Uint16Array(a);
            for (var c = 0, q = 0; c < a; c += 6, q += 4) this.indices[c + 0] = q + 0, this.indices[c + 1] = q + 1, this.indices[c + 2] = q + 2, this.indices[c + 3] = q + 0, this.indices[c + 4] = q + 2, this.indices[c + 5] = q + 3;
            this.initWebGL();
            this.shaderManager = new b.WebGLShaderManager(this.gl);
            this.worldTransform = new b.Matrix;
            this.initAll()
        }
        __extends(a, d);
        a.prototype.onRenderFinish = function() {
            this._draw()
        };
        a.prototype.initAll = function() {
            a.isInit || (a.isInit = !0, egret_webgl_graphics.init(),
                b.TextField.prototype._makeBitmapCache = function() {
                    this.renderTexture || (this.renderTexture = new b.RenderTexture);
                    var a = this.getBounds(b.Rectangle.identity);
                    if (0 == a.width || 0 == a.height) return this._texture_to_render = null, !1;
                    this._bitmapData || (this._bitmapData = document.createElement("canvas"), this.renderContext = b.RendererContext.createRendererContext(this._bitmapData));
                    var d = a.width,
                        a = a.height,
                        c = b.MainContext.instance.rendererContext._texture_scale_factor,
                        a = a / c,
                        d = Math.round(d / c),
                        a = Math.round(a),
                        h = this._bitmapData;
                    h.width = d;
                    h.height = a;
                    h.style.width = d + "px";
                    h.style.height = a + "px";
                    this.renderContext._cacheCanvas && (this.renderContext._cacheCanvas.width = d, this.renderContext._cacheCanvas.height = a);
                    this._worldTransform.identity();
                    this._worldTransform.a = 1 / c;
                    this._worldTransform.d = 1 / c;
                    this.renderContext.setTransform(this._worldTransform);
                    this.worldAlpha = 1;
                    var h = b.RenderFilter.getInstance(),
                        g = h._drawAreaList.concat();
                    h._drawAreaList.length = 0;
                    this.renderContext.clearScreen();
                    this.renderContext.onRenderStart();
                    b.RendererContext.deleteTexture(this.renderTexture);
                    this._colorTransform && this.renderContext.setGlobalColorTransform(this._colorTransform.matrix);
                    var f = this.mask || this._scrollRect;
                    f && this.renderContext.pushMask(f);
                    this._render(this.renderContext);
                    f && this.renderContext.popMask();
                    this._colorTransform && this.renderContext.setGlobalColorTransform(null);
                    b.RenderTexture.identityRectangle.width = d;
                    b.RenderTexture.identityRectangle.height = a;
                    h.addDrawArea(b.RenderTexture.identityRectangle);
                    this.renderContext.onRenderFinish();
                    h._drawAreaList = g;
                    this.renderTexture._bitmapData =
                        this._bitmapData;
                    this.renderTexture._sourceWidth = d;
                    this.renderTexture._sourceHeight = a;
                    this.renderTexture._textureWidth = this.renderTexture._sourceWidth * c;
                    this.renderTexture._textureHeight = this.renderTexture._sourceHeight * c;
                    this._texture_to_render = this.renderTexture;
                    return !0
                }, b.TextField.prototype._draw = function(a) {
                    this.getDirty() && (this._texture_to_render = this.renderTexture, this._cacheAsBitmap = !0);
                    b.DisplayObject.prototype._draw.call(this, a)
                }, b.RenderTexture.prototype.init = function() {
                    this._bitmapData =
                        document.createElement("canvas");
                    this.canvasContext = this._bitmapData.getContext("2d");
                    this._webglBitmapData = document.createElement("canvas");
                    this.renderContext = new b.WebGLRenderer(this._webglBitmapData)
                }, b.RenderTexture.prototype.setSize = function(a, d) {
                    if (this._webglBitmapData) {
                        var c = this._webglBitmapData;
                        c.width = a;
                        c.height = d;
                        c.style.width = a + "px";
                        c.style.height = d + "px";
                        this.renderContext.projectionX = a / 2;
                        this.renderContext.projectionY = -d / 2;
                        this.renderContext.viewportScale = b.MainContext.instance.rendererContext._texture_scale_factor
                    }
                },
                b.RenderTexture.prototype.end = function() {}, b.RenderTexture.prototype.drawToTexture = function(a, d, c) {
                    var h = d || a.getBounds(b.Rectangle.identity);
                    if (0 == h.width || 0 == h.height || d && (0 == d.width || 0 == d.height)) return !1;
                    "undefined" == typeof c && (c = 1);
                    this._bitmapData || (this._bitmapData = document.createElement("canvas"), this.canvasContext = this._bitmapData.getContext("2d"), b.RenderTexture.WebGLCanvas || (b.RenderTexture.WebGLCanvas = document.createElement("canvas"), b.RenderTexture.WebGLRenderer = new b.WebGLRenderer(b.RenderTexture.WebGLCanvas)),
                        this._webglBitmapData = b.RenderTexture.WebGLCanvas, this.renderContext = b.RenderTexture.WebGLRenderer);
                    var g = h.x,
                        f = h.y;
                    d = h.width;
                    var h = h.height,
                        h = h / c,
                        l = b.MainContext.instance.rendererContext._texture_scale_factor;
                    d = Math.round(d / c);
                    h = Math.round(h);
                    this.setSize(d, h);
                    var m = this._bitmapData,
                        n = d / l * c,
                        p = h / l * c;
                    m.width = n;
                    m.height = p;
                    m.style.width = n + "px";
                    m.style.height = p + "px";
                    this.begin();
                    a._worldTransform.identity();
                    m = a._anchorOffsetX;
                    n = a._anchorOffsetY;
                    if (0 != a._anchorX || 0 != a._anchorY) m = a._anchorX * d, n = a._anchorY *
                        h;
                    this._offsetX = g + m;
                    this._offsetY = f + n;
                    a._worldTransform.append(1, 0, 0, 1, -this._offsetX, -this._offsetY);
                    a.worldAlpha = 1;
                    g = b.MainContext.__use_new_draw;
                    b.MainContext.__use_new_draw = !1;
                    if (a instanceof b.DisplayObjectContainer)
                        for (f = a._children, m = 0, n = f.length; m < n; m++) f[m]._updateTransform();
                    this.renderContext.setTransform(a._worldTransform);
                    f = b.RenderFilter.getInstance();
                    m = f._drawAreaList.concat();
                    f._drawAreaList.length = 0;
                    n = this.renderContext.gl;
                    n.viewport(0, 0, d, h);
                    n.bindFramebuffer(n.FRAMEBUFFER, null);
                    n.clearColor(0, 0, 0, 0);
                    n.clear(n.COLOR_BUFFER_BIT);
                    this.renderContext.onRenderStart();
                    b.RendererContext.deleteTexture(this);
                    a._filter && this.renderContext.setGlobalFilter(a._filter);
                    a._colorTransform && this.renderContext.setGlobalColorTransform(a._colorTransform.matrix);
                    (n = a.mask || a._scrollRect) && this.renderContext.pushMask(n);
                    a._render(this.renderContext);
                    this.renderContext._draw();
                    b.MainContext.__use_new_draw = g;
                    n && this.renderContext.popMask();
                    a._colorTransform && this.renderContext.setGlobalColorTransform(null);
                    a._filter && this.renderContext.setGlobalFilter(null);
                    b.RenderTexture.identityRectangle.width = d;
                    b.RenderTexture.identityRectangle.height = h;
                    f.addDrawArea(b.RenderTexture.identityRectangle);
                    this.renderContext.onRenderFinish();
                    f._drawAreaList = m;
                    this._sourceWidth = d / l * c;
                    this._sourceHeight = h / l * c;
                    this._textureWidth = d * c;
                    this._textureHeight = h * c;
                    this.canvasContext.drawImage(this._webglBitmapData, 0, 0, d, h, 0, 0, this._sourceWidth, this._sourceHeight);
                    return !0
                })
        };
        a.prototype.createCanvas = function() {
            var a = b.Browser.getInstance().$("#egretCanvas");
            if (!a) {
                var d = document.getElementById(b.StageDelegate.canvas_div_name),
                    a = b.Browser.getInstance().$new("canvas");
                a.id = "egretCanvas";
                d.appendChild(a)
            }
            b.MainContext.instance.stage.addEventListener(b.Event.RESIZE, this.onResize, this);
            return a
        };
        a.prototype.onResize = function() {
            var a = document.getElementById(b.StageDelegate.canvas_div_name);
            this.canvas && (this.canvas.width = b.MainContext.instance.stage.stageWidth, this.canvas.height = b.MainContext.instance.stage.stageHeight, this.canvas.style.width = a.style.width,
                this.canvas.style.height = a.style.height, this.projectionX = this.canvas.width / 2, this.projectionY = -this.canvas.height / 2);
            this.html5Canvas && (this.html5Canvas.width = b.MainContext.instance.stage.stageWidth, this.html5Canvas.height = b.MainContext.instance.stage.stageHeight, this.html5Canvas.style.width = a.style.width, this.html5Canvas.style.height = a.style.height)
        };
        a.prototype.handleContextLost = function() {
            this.contextLost = !0
        };
        a.prototype.handleContextRestored = function() {
            this.initWebGL();
            this.shaderManager.setContext(this.gl);
            this.contextLost = !1
        };
        a.prototype.initWebGL = function() {
            for (var e = {}, d, c = ["experimental-webgl", "webgl"], h = 0; h < c.length; h++) {
                try {
                    d = this.canvas.getContext(c[h], e)
                } catch (g) {}
                if (d) break
            }
            if (!d) throw Error(b.getString(1021));
            a.glID++;
            this.glID = a.glID;
            this.setContext(d)
        };
        a.prototype.setContext = function(a) {
            this.gl = a;
            a.id = this.glContextId++;
            this.vertexBuffer = a.createBuffer();
            this.indexBuffer = a.createBuffer();
            a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
            a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.indices,
                a.STATIC_DRAW);
            a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer);
            a.bufferData(a.ARRAY_BUFFER, this.vertices, a.DYNAMIC_DRAW);
            a.disable(a.DEPTH_TEST);
            a.disable(a.CULL_FACE);
            a.enable(a.BLEND);
            a.colorMask(!0, !0, !0, !0)
        };
        a.prototype.start = function() {
            if (!this.contextLost) {
                var a = this.gl;
                a.activeTexture(a.TEXTURE0);
                a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer);
                a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
                var b;
                b = this.colorTransformMatrix ? this.shaderManager.colorTransformShader : "blur" == this.filterType ?
                    this.shaderManager.blurShader : this.shaderManager.defaultShader;
                this.shaderManager.activateShader(b);
                b.syncUniforms();
                a.uniform2f(b.projectionVector, this.projectionX, this.projectionY);
                var d = 4 * this.vertSize;
                a.vertexAttribPointer(b.aVertexPosition, 2, a.FLOAT, !1, d, 0);
                a.vertexAttribPointer(b.aTextureCoord, 2, a.FLOAT, !1, d, 8);
                a.vertexAttribPointer(b.colorAttribute, 2, a.FLOAT, !1, d, 16)
            }
        };
        a.prototype.clearScreen = function() {
            var a = this.gl;
            a.colorMask(!0, !0, !0, !0);
            for (var d = b.RenderFilter.getInstance().getDrawAreaList(),
                c = 0, h = d.length; c < h; c++) {
                var g = d[c];
                a.viewport(g.x, g.y, g.width, g.height);
                a.bindFramebuffer(a.FRAMEBUFFER, null);
                a.clearColor(0, 0, 0, 0);
                a.clear(a.COLOR_BUFFER_BIT)
            }
            d = b.MainContext.instance.stage;
            a.viewport(0, 0, d.stageWidth, d.stageHeight);
            this.renderCost = 0
        };
        a.prototype.setBlendMode = function(a) {
            a || (a = b.BlendMode.NORMAL);
            if (this.currentBlendMode != a) {
                var d = b.RendererContext.blendModesForGL[a];
                d && (this._draw(), this.gl.blendFunc(d[0], d[1]), this.currentBlendMode = a)
            }
        };
        a.prototype.drawRepeatImage = function(a, d,
            c, h, g, f, l, m, n, p) {
            p = b.MainContext.instance.rendererContext._texture_scale_factor;
            h *= p;
            for (g *= p; f < m; f += h)
                for (var r = l; r < n; r += g) {
                    var t = Math.min(h, m - f),
                        s = Math.min(g, n - r);
                    this.drawImage(a, d, c, t / p, s / p, f, r, t, s)
                }
        };
        a.prototype.drawImage = function(a, b, d, c, g, f, l, m, n, p) {
            void 0 === p && (p = void 0);
            if (!this.contextLost)
                if (void 0 !== p) this.drawRepeatImage(a, b, d, c, g, f, l, m, n, p);
                else {
                    this.createWebGLTexture(a);
                    p = a._bitmapData.webGLTexture[this.glID];
                    if (p !== this.currentBaseTexture || this.currentBatchSize >= this.size - 1) this._draw(),
                        this.currentBaseTexture = p;
                    var r = this.worldTransform,
                        t = r.a,
                        s = r.b,
                        u = r.c,
                        w = r.d,
                        v = r.tx,
                        y = r.ty;
                    0 == f && 0 == l || r.append(1, 0, 0, 1, f, l);
                    1 == c / m && 1 == g / n || r.append(m / c, 0, 0, n / g, 0, 0);
                    f = r.a;
                    l = r.b;
                    m = r.c;
                    n = r.d;
                    p = r.tx;
                    var x = r.ty;
                    r.a = t;
                    r.b = s;
                    r.c = u;
                    r.d = w;
                    r.tx = v;
                    r.ty = y;
                    t = a._sourceWidth;
                    s = a._sourceHeight;
                    a = c;
                    r = g;
                    b /= t;
                    d /= s;
                    c /= t;
                    g /= s;
                    t = this.vertices;
                    s = 4 * this.currentBatchSize * this.vertSize;
                    u = this.worldAlpha;
                    t[s++] = p;
                    t[s++] = x;
                    t[s++] = b;
                    t[s++] = d;
                    t[s++] = u;
                    t[s++] = f * a + p;
                    t[s++] = l * a + x;
                    t[s++] = c + b;
                    t[s++] = d;
                    t[s++] = u;
                    t[s++] = f * a + m * r + p;
                    t[s++] =
                        n * r + l * a + x;
                    t[s++] = c + b;
                    t[s++] = g + d;
                    t[s++] = u;
                    t[s++] = m * r + p;
                    t[s++] = n * r + x;
                    t[s++] = b;
                    t[s++] = g + d;
                    t[s++] = u;
                    this.currentBatchSize++
                }
        };
        a.prototype._draw = function() {
            if (0 != this.currentBatchSize && !this.contextLost) {
                var a = b.getTimer();
                this.start();
                var d = this.gl;
                d.bindTexture(d.TEXTURE_2D, this.currentBaseTexture);
                var c = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                d.bufferSubData(d.ARRAY_BUFFER, 0, c);
                d.drawElements(d.TRIANGLES, 6 * this.currentBatchSize, d.UNSIGNED_SHORT, 0);
                this.currentBatchSize = 0;
                this.renderCost +=
                    b.getTimer() - a;
                b.Profiler.getInstance().onDrawImage()
            }
        };
        a.prototype.setTransform = function(a) {
            var b = this.worldTransform;
            b.a = a.a;
            b.b = a.b;
            b.c = a.c;
            b.d = a.d;
            b.tx = a.tx;
            b.ty = a.ty
        };
        a.prototype.setAlpha = function(a, b) {
            this.worldAlpha = a;
            this.setBlendMode(b)
        };
        a.prototype.createWebGLTexture = function(a) {
            a = a._bitmapData;
            a.webGLTexture || (a.webGLTexture = {});
            if (!a.webGLTexture[this.glID]) {
                var b = this.gl;
                a.webGLTexture[this.glID] = b.createTexture();
                b.bindTexture(b.TEXTURE_2D, a.webGLTexture[this.glID]);
                b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !0);
                b.texImage2D(b.TEXTURE_2D, 0, b.RGBA, b.RGBA, b.UNSIGNED_BYTE, a);
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, b.LINEAR);
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, b.LINEAR);
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, b.CLAMP_TO_EDGE);
                b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, b.CLAMP_TO_EDGE);
                b.bindTexture(b.TEXTURE_2D, null)
            }
        };
        a.prototype.pushMask = function(a) {
            this._draw();
            var b = this.gl;
            0 == this.maskList.length && b.enable(b.SCISSOR_TEST);
            a = this.getScissorRect(a);
            this.maskList.push(a);
            this.scissor(a.x, a.y, a.width, a.height)
        };
        a.prototype.getScissorRect = function(a) {
            var d = this.maskList[this.maskList.length - 1],
                c, h, g;
            d ? d.intersects(d) ? (c = Math.max(a.x + this.worldTransform.tx, d.x), h = Math.max(a.y + this.worldTransform.ty, d.y), g = Math.min(a.x + this.worldTransform.tx + a.width, d.x + d.width) - c, a = Math.min(a.y + this.worldTransform.ty + a.height, d.y + d.height) - h) : a = g = h = c = 0 : (c = a.x + this.worldTransform.tx, h = a.y + this.worldTransform.ty, g = a.width, a = a.height);
            (d = this.maskDataFreeList.pop()) ? (d.x = c, d.y = h, d.width =
                g, d.height = a) : d = new b.Rectangle(c, h, g, a);
            return d
        };
        a.prototype.popMask = function() {
            this._draw();
            var a = this.gl,
                b = this.maskList.pop();
            this.maskDataFreeList.push(b);
            b = this.maskList.length;
            0 != b ? (b = this.maskList[b - 1], (0 < b.width || 0 < b.height) && this.scissor(b.x, b.y, b.width, b.height)) : a.disable(a.SCISSOR_TEST)
        };
        a.prototype.scissor = function(a, d, c, h) {
            var g = this.gl;
            0 > c && (c = 0);
            0 > h && (h = 0);
            g.scissor(a, -d + b.MainContext.instance.stage.stageHeight - h, c, h)
        };
        a.prototype.setGlobalColorTransform = function(a) {
            if (this.colorTransformMatrix !=
                a && (this._draw(), this.colorTransformMatrix = a)) {
                a = a.concat();
                var b = this.shaderManager.colorTransformShader;
                b.uniforms.colorAdd.value.w = a.splice(19, 1)[0] / 255;
                b.uniforms.colorAdd.value.z = a.splice(14, 1)[0] / 255;
                b.uniforms.colorAdd.value.y = a.splice(9, 1)[0] / 255;
                b.uniforms.colorAdd.value.x = a.splice(4, 1)[0] / 255;
                b.uniforms.matrix.value = a
            }
        };
        a.prototype.setGlobalFilter = function(a) {
            this._draw();
            this.setFilterProperties(a)
        };
        a.prototype.setFilterProperties = function(a) {
            if (a) switch (this.filterType = a.type, a.type) {
                case "blur":
                    var b =
                        this.shaderManager.blurShader;
                    b.uniforms.blur.value.x = a.blurX;
                    b.uniforms.blur.value.y = a.blurY
            } else this.filterType = null
        };
        a.prototype.setupFont = function(a, b) {
            void 0 === b && (b = null);
            this.canvasContext.setupFont(a, b)
        };
        a.prototype.measureText = function(a) {
            return this.canvasContext.measureText(a)
        };
        a.prototype.renderGraphics = function(a) {
            this._draw();
            var b = this.gl,
                d = this.shaderManager.primitiveShader;
            this.graphicsPoints ? (this.graphicsPoints.length = 0, this.graphicsIndices.length = 0) : (this.graphicsPoints = [], this.graphicsIndices = [], this.graphicsBuffer = b.createBuffer(), this.graphicsIndexBuffer = b.createBuffer());
            this.updateGraphics(a);
            this.shaderManager.activateShader(d);
            b.blendFunc(b.ONE, b.ONE_MINUS_SRC_ALPHA);
            b.uniformMatrix3fv(d.translationMatrix, !1, this.worldTransform.toArray(!0));
            b.uniform2f(d.projectionVector, this.projectionX, -this.projectionY);
            b.uniform2f(d.offsetVector, 0, 0);
            b.uniform3fv(d.tintColor, [1, 1, 1]);
            b.uniform1f(d.alpha, this.worldAlpha);
            b.bindBuffer(b.ARRAY_BUFFER, this.graphicsBuffer);
            b.vertexAttribPointer(d.aVertexPosition,
                2, b.FLOAT, !1, 24, 0);
            b.vertexAttribPointer(d.colorAttribute, 4, b.FLOAT, !1, 24, 8);
            b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, this.graphicsIndexBuffer);
            b.drawElements(b.TRIANGLE_STRIP, this.graphicsIndices.length, b.UNSIGNED_SHORT, 0);
            this.shaderManager.activateShader(this.shaderManager.defaultShader)
        };
        a.prototype.updateGraphics = function(a) {
            var b = this.gl;
            this.buildRectangle(a);
            b.bindBuffer(b.ARRAY_BUFFER, this.graphicsBuffer);
            b.bufferData(b.ARRAY_BUFFER, new Float32Array(this.graphicsPoints), b.STATIC_DRAW);
            b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
                this.graphicsIndexBuffer);
            b.bufferData(b.ELEMENT_ARRAY_BUFFER, new Uint16Array(this.graphicsIndices), b.STATIC_DRAW)
        };
        a.prototype.buildRectangle = function(a) {
            var b = a.x,
                d = a.y,
                c = a.w;
            a = a.h;
            var g = this.graphicsStyle.a,
                f = this.graphicsStyle.r * g,
                l = this.graphicsStyle.g * g,
                m = this.graphicsStyle.b * g,
                n = this.graphicsPoints,
                p = this.graphicsIndices,
                r = n.length / 6;
            n.push(b, d);
            n.push(f, l, m, g);
            n.push(b + c, d);
            n.push(f, l, m, g);
            n.push(b, d + a);
            n.push(f, l, m, g);
            n.push(b + c, d + a);
            n.push(f, l, m, g);
            p.push(r, r, r + 1, r + 2, r + 3, r + 3)
        };
        a.prototype.setGraphicsStyle =
            function(a, b, d, c) {
                this.graphicsStyle.r = a;
                this.graphicsStyle.g = b;
                this.graphicsStyle.b = d;
                this.graphicsStyle.a = c
            };
        a.glID = 0;
        a.isInit = !1;
        return a
    }(b.RendererContext);
    b.WebGLRenderer = c;
    c.prototype.__class__ = "egret.WebGLRenderer"
})(egret || (egret = {}));
var egret_webgl_graphics;
(function(b) {
    b.beginFill = function(b, a) {
        void 0 === a && (a = 1);
        this._pushCommand(new c(this._setStyle, this, [(b >> 16) / 255, ((b & 65280) >> 8) / 255, (b & 255) / 255, a]))
    };
    b.drawRect = function(b, a, e, k) {
        this._pushCommand(new c(function(a) {
            this.renderContext.renderGraphics(a)
        }, this, [{
            x: b,
            y: a,
            w: e,
            h: k
        }]));
        this.checkRect(b, a, e, k)
    };
    b.drawCircle = function(b, a, e) {};
    b.drawRoundRect = function(b, a, e, c, q, h) {};
    b.drawEllipse = function(b, a, e, c) {};
    b.lineStyle = function(b, a, e, c, q, h, g, f) {};
    b.lineTo = function(b, a) {};
    b.curveTo = function(b, a, e,
        c) {};
    b.moveTo = function(b, a) {};
    b.clear = function() {
        this._maxY = this._maxX = this._minY = this._minX = this.commandQueue.length = 0
    };
    b.endFill = function() {};
    b._pushCommand = function(b) {
        this.commandQueue.push(b)
    };
    b._draw = function(b) {
        var a = this.commandQueue.length;
        if (0 != a)
            for (this.renderContext = b, b = 0; b < a; b++) {
                var e = this.commandQueue[b];
                e.method.apply(e.thisObject, e.args)
            }
    };
    var c = function() {
        return function(b, a, e) {
            this.method = b;
            this.thisObject = a;
            this.args = e
        }
    }();
    c.prototype.__class__ = "egret_webgl_graphics.Command";
    b._setStyle = function(b, a, e, c) {
        this.renderContext.setGraphicsStyle(b, a, e, c)
    };
    b.init = function() {
        for (var d in b) egret.Graphics.prototype[d] = b[d]
    }
})(egret_webgl_graphics || (egret_webgl_graphics = {}));
(function(b) {
    var c = function() {
        function d() {}
        d.compileProgram = function(a, e, c) {
            c = d.compileFragmentShader(a, c);
            e = d.compileVertexShader(a, e);
            var q = a.createProgram();
            a.attachShader(q, e);
            a.attachShader(q, c);
            a.linkProgram(q);
            a.getProgramParameter(q, a.LINK_STATUS) || b.Logger.infoWithErrorId(1020);
            return q
        };
        d.compileFragmentShader = function(a, b) {
            return d._compileShader(a, b, a.FRAGMENT_SHADER)
        };
        d.compileVertexShader = function(a, b) {
            return d._compileShader(a, b, a.VERTEX_SHADER)
        };
        d._compileShader = function(a, e, d) {
            d =
                a.createShader(d);
            a.shaderSource(d, e);
            a.compileShader(d);
            return a.getShaderParameter(d, a.COMPILE_STATUS) ? d : (b.Logger.info(a.getShaderInfoLog(d)), null)
        };
        d.checkCanUseWebGL = function() {
            if (void 0 == d.canUseWebGL) try {
                var a = document.createElement("canvas");
                d.canUseWebGL = !!window.WebGLRenderingContext && !(!a.getContext("webgl") && !a.getContext("experimental-webgl"))
            } catch (b) {
                d.canUseWebGL = !1
            }
            return d.canUseWebGL
        };
        return d
    }();
    b.WebGLUtils = c;
    c.prototype.__class__ = "egret.WebGLUtils"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function d(a) {
            this.defaultVertexSrc = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec2 aColor;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nconst vec2 center = vec2(-1.0, 1.0);\nvoid main(void) {\n   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.x, aColor.x, aColor.x, aColor.x);\n}";
            this.program = this.gl = null;
            this.fragmentSrc = "precision lowp float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void) {\ngl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;\n}";
            this.uniforms = null;
            this.gl = a;
            this.init()
        }
        d.prototype.init = function() {
            var a = this.gl,
                e = b.WebGLUtils.compileProgram(a, this.defaultVertexSrc, this.fragmentSrc);
            a.useProgram(e);
            this.uSampler = a.getUniformLocation(e, "uSampler");
            this.projectionVector = a.getUniformLocation(e, "projectionVector");
            this.offsetVector = a.getUniformLocation(e, "offsetVector");
            this.dimensions = a.getUniformLocation(e, "dimensions");
            this.aVertexPosition = a.getAttribLocation(e, "aVertexPosition");
            this.aTextureCoord = a.getAttribLocation(e, "aTextureCoord");
            this.colorAttribute = a.getAttribLocation(e, "aColor"); - 1 === this.colorAttribute && (this.colorAttribute = 2);
            this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute];
            for (var d in this.uniforms) this.uniforms[d].uniformLocation = a.getUniformLocation(e, d);
            this.initUniforms();
            this.program = e
        };
        d.prototype.initUniforms = function() {
            if (this.uniforms) {
                var a = this.gl,
                    b, d;
                for (d in this.uniforms) {
                    b = this.uniforms[d];
                    var c = b.type;
                    "mat2" === c || "mat3" === c || "mat4" === c ? (b.glMatrix = !0, b.glValueLength = 1, "mat2" === c ? b.glFunc = a.uniformMatrix2fv : "mat3" === c ? b.glFunc = a.uniformMatrix3fv : "mat4" === c && (b.glFunc = a.uniformMatrix4fv)) : (b.glFunc = a["uniform" + c], b.glValueLength = "2f" === c || "2i" === c ? 2 : "3f" === c || "3i" === c ? 3 : "4f" === c || "4i" === c ? 4 : 1)
                }
            }
        };
        d.prototype.syncUniforms = function() {
            if (this.uniforms) {
                var a,
                    b = this.gl,
                    d;
                for (d in this.uniforms) a = this.uniforms[d], 1 === a.glValueLength ? !0 === a.glMatrix ? a.glFunc.call(b, a.uniformLocation, a.transpose, a.value) : a.glFunc.call(b, a.uniformLocation, a.value) : 2 === a.glValueLength ? a.glFunc.call(b, a.uniformLocation, a.value.x, a.value.y) : 3 === a.glValueLength ? a.glFunc.call(b, a.uniformLocation, a.value.x, a.value.y, a.value.z) : 4 === a.glValueLength && a.glFunc.call(b, a.uniformLocation, a.value.x, a.value.y, a.value.z, a.value.w)
            }
        };
        return d
    }();
    b.EgretShader = c;
    c.prototype.__class__ = "egret.EgretShader"
})(egret ||
    (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(a) {
            b.call(this, a);
            this.fragmentSrc = "precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform float invert;\nuniform mat4 matrix;\nuniform vec4 colorAdd;\nuniform sampler2D uSampler;\nvoid main(void) {\nvec4 locColor = texture2D(uSampler, vTextureCoord) * matrix;\nif(locColor.a != 0.0){\nlocColor += colorAdd;\n}\ngl_FragColor = locColor;\n}";
            this.uniforms = {
                matrix: {
                    type: "mat4",
                    value: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]
                },
                colorAdd: {
                    type: "4f",
                    value: {
                        x: 0,
                        y: 0,
                        z: 0,
                        w: 0
                    }
                }
            };
            this.init()
        }
        __extends(a, b);
        return a
    }(b.EgretShader);
    b.ColorTransformShader = c;
    c.prototype.__class__ = "egret.ColorTransformShader"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a(a) {
            b.call(this, a);
            this.fragmentSrc = "precision mediump float;uniform vec2 blur;uniform sampler2D uSampler;varying vec2 vTextureCoord;void main(){gl_FragColor = vec4(0.0);gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.028 * blur.x, -0.028 * blur.y))) * 0.0044299121055113265;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.024 * blur.x, -0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.020 * blur.x, -0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.016 * blur.x, -0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.012 * blur.x, -0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.008 * blur.x, -0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2(-0.004 * blur.x, -0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, vTextureCoord) * 0.159576912161;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.004 * blur.x,  0.004 * blur.y))) * 0.147308056121;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.008 * blur.x,  0.008 * blur.y))) * 0.115876621105;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.012 * blur.x,  0.012 * blur.y))) * 0.0776744219933;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.016 * blur.x,  0.016 * blur.y))) * 0.0443683338718;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.020 * blur.x,  0.020 * blur.y))) * 0.0215963866053;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.024 * blur.x,  0.024 * blur.y))) * 0.00895781211794;gl_FragColor += texture2D(uSampler, (vTextureCoord + vec2( 0.028 * blur.x,  0.028 * blur.y))) * 0.0044299121055113265;}";
            this.uniforms = {
                blur: {
                    type: "2f",
                    value: {
                        x: 2,
                        y: 2
                    }
                }
            };
            this.init()
        }
        __extends(a, b);
        return a
    }(b.EgretShader);
    b.BlurShader = c;
    c.prototype.__class__ = "egret.BlurShader"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function d(a) {
            this.alpha = this.translationMatrix = this.attributes = this.colorAttribute = this.aVertexPosition = this.tintColor = this.offsetVector = this.projectionVector = this.program = this.gl = null;
            this.fragmentSrc = "precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n   gl_FragColor = vColor;\n}";
            this.vertexSrc = "attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform vec2 projectionVector;\nuniform vec2 offsetVector;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void) {\n   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);\n   v -= offsetVector.xyx;\n   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}";
            this.gl = a;
            this.init()
        }
        d.prototype.init = function() {
            var a = this.gl,
                e = b.WebGLUtils.compileProgram(a, this.vertexSrc, this.fragmentSrc);
            a.useProgram(e);
            this.projectionVector = a.getUniformLocation(e, "projectionVector");
            this.offsetVector = a.getUniformLocation(e, "offsetVector");
            this.tintColor = a.getUniformLocation(e, "tint");
            this.aVertexPosition = a.getAttribLocation(e, "aVertexPosition");
            this.colorAttribute = a.getAttribLocation(e, "aColor");
            this.attributes = [this.aVertexPosition, this.colorAttribute];
            this.translationMatrix =
                a.getUniformLocation(e, "translationMatrix");
            this.alpha = a.getUniformLocation(e, "alpha");
            this.program = e
        };
        return d
    }();
    b.PrimitiveShader = c;
    c.prototype.__class__ = "egret.PrimitiveShader"
})(egret || (egret = {}));
(function(b) {
    var c = function() {
        function d(a) {
            this.gl = null;
            this.maxAttibs = 10;
            this.attribState = [];
            this.tempAttribState = [];
            this.blurShader = this.colorTransformShader = this.primitiveShader = this.defaultShader = this.currentShader = null;
            for (var b = 0; b < this.maxAttibs; b++) this.attribState[b] = !1;
            this.setContext(a)
        }
        d.prototype.setContext = function(a) {
            this.gl = a;
            this.primitiveShader = new b.PrimitiveShader(a);
            this.defaultShader = new b.EgretShader(a);
            this.colorTransformShader = new b.ColorTransformShader(a);
            this.blurShader =
                new b.BlurShader(a);
            this.activateShader(this.defaultShader)
        };
        d.prototype.activateShader = function(a) {
            this.currentShader != a && (this.gl.useProgram(a.program), this.setAttribs(a.attributes), this.currentShader = a)
        };
        d.prototype.setAttribs = function(a) {
            var b, d;
            d = this.tempAttribState.length;
            for (b = 0; b < d; b++) this.tempAttribState[b] = !1;
            d = a.length;
            for (b = 0; b < d; b++) this.tempAttribState[a[b]] = !0;
            a = this.gl;
            d = this.attribState.length;
            for (b = 0; b < d; b++) this.attribState[b] !== this.tempAttribState[b] && (this.attribState[b] = this.tempAttribState[b],
                this.tempAttribState[b] ? a.enableVertexAttribArray(b) : a.disableVertexAttribArray(b))
        };
        return d
    }();
    b.WebGLShaderManager = c;
    c.prototype.__class__ = "egret.WebGLShaderManager"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this)
        }
        __extends(a, d);
        a.prototype.proceed = function(a) {
            function d() {
                if (4 == h.readyState)
                    if (h.status != a._status && (a._status = h.status, b.HTTPStatusEvent.dispatchHTTPStatusEvent(a, h.status)), 400 <= h.status || 0 == h.status) b.IOErrorEvent.dispatchIOErrorEvent(a);
                    else {
                        switch (a.dataFormat) {
                            case b.URLLoaderDataFormat.TEXT:
                                a.data = h.responseText;
                                break;
                            case b.URLLoaderDataFormat.VARIABLES:
                                a.data = new b.URLVariables(h.responseText);
                                break;
                            case b.URLLoaderDataFormat.BINARY:
                                a.data =
                                    h.response;
                                break;
                            default:
                                a.data = h.responseText
                        }
                        b.__callAsync(b.Event.dispatchEvent, b.Event, a, b.Event.COMPLETE)
                    }
            }
            if (a.dataFormat == b.URLLoaderDataFormat.TEXTURE) this.loadTexture(a);
            else if (a.dataFormat == b.URLLoaderDataFormat.SOUND) this.loadSound(a);
            else {
                var c = a._request,
                    h = this.getXHR();
                h.onreadystatechange = d;
                var g = b.NetContext._getUrl(c);
                h.open(c.method, g, !0);
                this.setResponseType(h, a.dataFormat);
                c.method != b.URLRequestMethod.GET && c.data ? c.data instanceof b.URLVariables ? (h.setRequestHeader("Content-Type",
                    "application/x-www-form-urlencoded"), h.send(c.data.toString())) : (h.setRequestHeader("Content-Type", "multipart/form-data"), h.send(c.data)) : h.send()
            }
        };
        a.prototype.loadSound = function(a) {
            function d(g) {
                b.clearTimeout(h.__timeoutId);
                h.removeEventListener("canplaythrough", d, !1);
                h.removeEventListener("error", c, !1);
                g = new b.Sound;
                g._setAudio(h);
                a.data = g;
                b.__callAsync(b.Event.dispatchEvent, b.Event, a, b.Event.COMPLETE)
            }

            function c(g) {
                b.clearTimeout(h.__timeoutId);
                h.removeEventListener("canplaythrough", d, !1);
                h.removeEventListener("error",
                    c, !1);
                b.IOErrorEvent.dispatchIOErrorEvent(a)
            }
            var h = new Audio(a._request.url);
            h.__timeoutId = b.setTimeout(d, this, 100);
            h.addEventListener("canplaythrough", d, !1);
            h.addEventListener("error", c, !1);
            h.load()
        };
        a.prototype.getXHR = function() {
            return window.XMLHttpRequest ? new window.XMLHttpRequest : new ActiveXObject("MSXML2.XMLHTTP")
        };
        a.prototype.setResponseType = function(a, d) {
            switch (d) {
                case b.URLLoaderDataFormat.TEXT:
                case b.URLLoaderDataFormat.VARIABLES:
                    a.responseType = b.URLLoaderDataFormat.TEXT;
                    break;
                case b.URLLoaderDataFormat.BINARY:
                    a.responseType =
                        "arraybuffer";
                    break;
                default:
                    a.responseType = d
            }
        };
        a.prototype.loadTexture = function(a) {
            var d = a._request,
                c = new Image;
            c.onload = function(d) {
                c.onerror = null;
                c.onload = null;
                d = new b.Texture;
                d._setBitmapData(c);
                a.data = d;
                b.__callAsync(b.Event.dispatchEvent, b.Event, a, b.Event.COMPLETE)
            };
            c.onerror = function(d) {
                c.onerror = null;
                c.onload = null;
                b.IOErrorEvent.dispatchIOErrorEvent(a)
            };
            c.src = d.url
        };
        return a
    }(b.NetContext);
    b.HTML5NetContext = c;
    c.prototype.__class__ = "egret.HTML5NetContext"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this._isTouchDown = !1;
            this.rootDiv = null;
            this.rootDiv = document.getElementById(b.StageDelegate.canvas_div_name)
        }
        __extends(a, d);
        a.prototype.prevent = function(a) {
            a.stopPropagation();
            !0 != a.isScroll && a.preventDefault()
        };
        a.prototype.run = function() {
            var a = this;
            window.navigator.msPointerEnabled ? (this.rootDiv.addEventListener("MSPointerDown", function(b) {
                a._onTouchBegin(b);
                a.prevent(b)
            }, !1), this.rootDiv.addEventListener("MSPointerMove", function(b) {
                a._onTouchMove(b);
                a.prevent(b)
            }, !1), this.rootDiv.addEventListener("MSPointerUp", function(b) {
                a._onTouchEnd(b);
                a.prevent(b)
            }, !1)) : b.MainContext.deviceType == b.MainContext.DEVICE_MOBILE ? this.addTouchListener() : b.MainContext.deviceType == b.MainContext.DEVICE_PC && (this.addTouchListener(), this.addMouseListener());
            window.addEventListener("mousedown", function(b) {
                a.inOutOfCanvas(b) ? a.dispatchLeaveStageEvent() : a._isTouchDown = !0
            });
            window.addEventListener("mouseup", function(b) {
                a._isTouchDown && (a.inOutOfCanvas(b) ? a.dispatchLeaveStageEvent() :
                    a._onTouchEnd(b));
                a._isTouchDown = !1
            })
        };
        a.prototype.addMouseListener = function() {
            var a = this;
            this.rootDiv.addEventListener("mousedown", function(b) {
                a._onTouchBegin(b)
            });
            this.rootDiv.addEventListener("mousemove", function(b) {
                a._onTouchMove(b)
            });
            this.rootDiv.addEventListener("mouseup", function(b) {
                a._onTouchEnd(b)
            })
        };
        a.prototype.addTouchListener = function() {
            var a = this;
            this.rootDiv.addEventListener("touchstart", function(b) {
                for (var d = b.changedTouches.length, c = 0; c < d; c++) a._onTouchBegin(b.changedTouches[c]);
                a.prevent(b)
            }, !1);
            this.rootDiv.addEventListener("touchmove", function(b) {
                for (var d = b.changedTouches.length, c = 0; c < d; c++) a._onTouchMove(b.changedTouches[c]);
                a.prevent(b)
            }, !1);
            this.rootDiv.addEventListener("touchend", function(b) {
                for (var d = b.changedTouches.length, c = 0; c < d; c++) a._onTouchEnd(b.changedTouches[c]);
                a.prevent(b)
            }, !1);
            this.rootDiv.addEventListener("touchcancel", function(b) {
                for (var d = b.changedTouches.length, c = 0; c < d; c++) a._onTouchEnd(b.changedTouches[c]);
                a.prevent(b)
            }, !1)
        };
        a.prototype.inOutOfCanvas = function(a) {
            var d =
                this.getLocation(this.rootDiv, a);
            a = d.x;
            var d = d.y,
                c = b.MainContext.instance.stage;
            return 0 > a || 0 > d || a > c.stageWidth || d > c.stageHeight ? !0 : !1
        };
        a.prototype.dispatchLeaveStageEvent = function() {
            this.touchingIdentifiers.length = 0;
            b.MainContext.instance.stage.dispatchEventWith(b.Event.LEAVE_STAGE)
        };
        a.prototype._onTouchBegin = function(a) {
            var b = this.getLocation(this.rootDiv, a),
                d = -1;
            a.hasOwnProperty("identifier") && (d = a.identifier);
            this.onTouchBegan(b.x, b.y, d)
        };
        a.prototype._onTouchMove = function(a) {
            var b = this.getLocation(this.rootDiv,
                    a),
                d = -1;
            a.hasOwnProperty("identifier") && (d = a.identifier);
            this.onTouchMove(b.x, b.y, d)
        };
        a.prototype._onTouchEnd = function(a) {
            var b = this.getLocation(this.rootDiv, a),
                d = -1;
            a.hasOwnProperty("identifier") && (d = a.identifier);
            this.onTouchEnd(b.x, b.y, d)
        };
        a.prototype.getLocation = function(a, d) {
            var c = document.documentElement,
                h = window,
                g, f;
            "function" === typeof a.getBoundingClientRect ? (f = a.getBoundingClientRect(), g = f.left, f = f.top) : f = g = 0;
            g += h.pageXOffset - c.clientLeft;
            f += h.pageYOffset - c.clientTop;
            null != d.pageX ? (c = d.pageX,
                h = d.pageY) : (g -= document.body.scrollLeft, f -= document.body.scrollTop, c = d.clientX, h = d.clientY);
            var l = b.Point.identity;
            l.x = (c - g) / b.StageDelegate.getInstance().getScaleX();
            l.y = (h - f) / b.StageDelegate.getInstance().getScaleY();
            return l
        };
        return a
    }(b.TouchContext);
    b.HTML5TouchContext = c;
    c.prototype.__class__ = "egret.HTML5TouchContext"
})(egret || (egret = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this.inputElement = this.div = null;
            this._hasListeners = !1;
            this._inputType = "";
            this._isShow = !1;
            this.textValue = "";
            this._height = this._width = 0;
            this._styleInfoes = {};
            var e = b.StageDelegate.getInstance().getScaleX(),
                c = b.StageDelegate.getInstance().getScaleY(),
                q = b.Browser.getInstance().$new("div");
            q.position.x = 0;
            q.position.y = 0;
            q.scale.x = e;
            q.scale.y = c;
            q.transforms();
            q.style[a.getTrans("transformOrigin")] = "0% 0% 0px";
            this.div = q;
            c = b.MainContext.instance.stage;
            e = c.stageWidth;
            c = c.stageHeight;
            q = new b.Shape;
            q.width = e;
            q.height = c;
            q.touchEnabled = !0;
            this._shape = q;
            this.getStageDelegateDiv().appendChild(this.div)
        }
        __extends(a, d);
        a.getTrans = function(b) {
            "" == a.header && (a.header = a.getHeader());
            return a.header + b.substring(1, b.length)
        };
        a.getHeader = function() {
            for (var a = document.createElement("div").style, b = ["t", "webkitT", "msT", "MozT", "OT"], d = 0; d < b.length; d++)
                if (b[d] + "ransform" in a) return b[d];
            return b[0]
        };
        a.prototype.getStageDelegateDiv = function() {
            var a = b.Browser.getInstance().$("#StageDelegateDiv");
            a || (a = b.Browser.getInstance().$new("div"), a.id = "StageDelegateDiv", document.getElementById(b.StageDelegate.canvas_div_name).appendChild(a), a.transforms());
            return a
        };
        a.prototype._setMultiline = function(a) {
            d.prototype._setMultiline.call(this, a);
            this.createInput()
        };
        a.prototype.callHandler = function(a) {
            a.stopPropagation()
        };
        a.prototype._add = function() {
            this.div && null == this.div.parentNode && this.getStageDelegateDiv().appendChild(this.div)
        };
        a.prototype._remove = function() {
            this._shape && this._shape.parent && this._shape.parent.removeChild(this._shape);
            this.div && this.div.parentNode && this.div.parentNode.removeChild(this.div)
        };
        a.prototype._addListeners = function() {
            this.inputElement && !this._hasListeners && (this._hasListeners = !0, this.inputElement.addEventListener("mousedown", this.callHandler), this.inputElement.addEventListener("touchstart", this.callHandler), this.inputElement.addEventListener("MSPointerDown", this.callHandler))
        };
        a.prototype._removeListeners = function() {
            this.inputElement && this._hasListeners && (this._hasListeners = !1, this.inputElement.removeEventListener("mousedown",
                this.callHandler), this.inputElement.removeEventListener("touchstart", this.callHandler), this.inputElement.removeEventListener("MSPointerDown", this.callHandler))
        };
        a.prototype.createInput = function() {
            var a = this._multiline ? "textarea" : "input";
            this._inputType != a && (this._inputType = a, null != this.inputElement && (this._removeListeners(), this.div.removeChild(this.inputElement)), this._multiline ? (a = document.createElement("textarea"), a.style.resize = "none") : a = document.createElement("input"), this._styleInfoes = {}, a.type =
                "text", this.inputElement = a, this.inputElement.value = "", this.div.appendChild(a), this._addListeners(), this.setElementStyle("width", "0px"), this.setElementStyle("border", "none"), this.setElementStyle("margin", "0"), this.setElementStyle("padding", "0"), this.setElementStyle("outline", "medium"), this.setElementStyle("verticalAlign", "top"), this.setElementStyle("wordBreak", "break-all"), this.setElementStyle("overflow", "hidden"))
        };
        a.prototype._open = function(a, b, d, c) {};
        a.prototype._setScale = function(a, c) {
            d.prototype._setScale.call(this,
                a, c);
            var q = b.StageDelegate.getInstance().getScaleX(),
                h = b.StageDelegate.getInstance().getScaleY();
            this.div.scale.x = q * a;
            this.div.scale.y = h * c;
            this.div.transforms()
        };
        a.prototype.changePosition = function(a, d) {
            var c = b.StageDelegate.getInstance().getScaleX(),
                h = b.StageDelegate.getInstance().getScaleY();
            this.div.position.x = a * c;
            this.div.position.y = d * h;
            this.div.transforms()
        };
        a.prototype.setStyles = function() {
            this.setElementStyle("fontStyle", this._italic ? "italic" : "normal");
            this.setElementStyle("fontWeight", this._bold ?
                "bold" : "normal");
            this.setElementStyle("textAlign", this._textAlign);
            this.setElementStyle("fontSize", this._size + "px");
            this.setElementStyle("color", "#000000");
            this.setElementStyle("width", this._width + "px");
            this.setElementStyle("height", this._height + "px");
            this.setElementStyle("display", "block")
        };
        a.prototype._show = function() {
            b.MainContext.instance.stage._changeSizeDispatchFlag = !1;
            0 < this._maxChars ? this.inputElement.setAttribute("maxlength", this._maxChars) : this.inputElement.removeAttribute("maxlength");
            this._isShow = !0;
            var a = this._getText();
            this.inputElement.value = a;
            var d = this;
            this.inputElement.oninput = function() {
                d.textValue = d.inputElement.value;
                d.dispatchEvent(new b.Event("updateText"))
            };
            this.setStyles();
            this.inputElement.focus();
            this.inputElement.selectionStart = a.length;
            this.inputElement.selectionEnd = a.length;
            this._shape && null == this._shape.parent && b.MainContext.instance.stage.addChild(this._shape)
        };
        a.prototype._hide = function() {
            b.MainContext.instance.stage._changeSizeDispatchFlag = !0;
            if (null != this.inputElement) {
                this._isShow = !1;
                this.inputElement.oninput = function() {};
                this.setElementStyle("border", "none");
                this.setElementStyle("display", "none");
                this.inputElement.value = "";
                this.setElementStyle("width", "0px");
                window.scrollTo(0, 0);
                var a = this;
                b.setTimeout(function() {
                    a.inputElement.blur();
                    window.scrollTo(0, 0)
                }, this, 50);
                this._shape && this._shape.parent && this._shape.parent.removeChild(this._shape)
            }
        };
        a.prototype._getText = function() {
            this.textValue || (this.textValue = "");
            return this.textValue
        };
        a.prototype._setText = function(a) {
            this.textValue =
                a;
            this.resetText()
        };
        a.prototype.resetText = function() {
            this.inputElement && (this.inputElement.value = this.textValue)
        };
        a.prototype._setWidth = function(a) {
            this._width = a
        };
        a.prototype._setHeight = function(a) {
            this._height = a
        };
        a.prototype.setElementStyle = function(a, b) {
            this.inputElement && this._styleInfoes[a] != b && (this.inputElement.style[a] = b, this._styleInfoes[a] = b)
        };
        a.header = "";
        return a
    }(b.StageText);
    b.HTML5StageText = c;
    c.prototype.__class__ = "egret.HTML5StageText"
})(egret || (egret = {}));
egret.StageText.create = function() {
    return new egret.HTML5StageText
};
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    RES;
(function(b) {
    var c = function(b) {
        function a(a, c, q) {
            void 0 === c && (c = !1);
            void 0 === q && (q = !1);
            b.call(this, a, c, q);
            this.itemsTotal = this.itemsLoaded = 0;
            this.groupName = "";
            this.resItem = null
        }
        __extends(a, b);
        a.dispatchResourceEvent = function(b, d, c, h, g, f) {
            void 0 === c && (c = "");
            void 0 === h && (h = null);
            void 0 === g && (g = 0);
            void 0 === f && (f = 0);
            var l = egret.Event._getPropertyData(a);
            l.groupName = c;
            l.resItem = h;
            l.itemsLoaded = g;
            l.itemsTotal = f;
            egret.Event._dispatchByTarget(a, b, d, l)
        };
        a.ITEM_LOAD_ERROR = "itemLoadError";
        a.CONFIG_COMPLETE =
            "configComplete";
        a.CONFIG_LOAD_ERROR = "configLoadError";
        a.GROUP_PROGRESS = "groupProgress";
        a.GROUP_COMPLETE = "groupComplete";
        a.GROUP_LOAD_ERROR = "groupLoadError";
        return a
    }(egret.Event);
    b.ResourceEvent = c;
    c.prototype.__class__ = "RES.ResourceEvent"
})(RES || (RES = {}));
(function(b) {
    var c = function() {
        function b(a, e, d) {
            this.groupName = "";
            this.data = null;
            this._loaded = !1;
            this.name = a;
            this.url = e;
            this.type = d
        }
        Object.defineProperty(b.prototype, "loaded", {
            get: function() {
                return this.data ? this.data.loaded : this._loaded
            },
            set: function(a) {
                this.data && (this.data.loaded = a);
                this._loaded = a
            },
            enumerable: !0,
            configurable: !0
        });
        b.prototype.toString = function() {
            return '[ResourceItem name="' + this.name + '" url="' + this.url + '" type="' + this.type + '"]'
        };
        b.TYPE_XML = "xml";
        b.TYPE_IMAGE = "image";
        b.TYPE_BIN =
            "bin";
        b.TYPE_TEXT = "text";
        b.TYPE_JSON = "json";
        b.TYPE_SHEET = "sheet";
        b.TYPE_FONT = "font";
        b.TYPE_SOUND = "sound";
        return b
    }();
    b.ResourceItem = c;
    c.prototype.__class__ = "RES.ResourceItem"
})(RES || (RES = {}));
(function(b) {
    var c = function() {
        function d() {
            this.keyMap = {};
            this.groupDic = {};
            b.configInstance = this
        }
        d.prototype.getGroupByName = function(a) {
            var b = [];
            if (!this.groupDic[a]) return b;
            a = this.groupDic[a];
            for (var d = a.length, c = 0; c < d; c++) b.push(this.parseResourceItem(a[c]));
            return b
        };
        d.prototype.getRawGroupByName = function(a) {
            return this.groupDic[a] ? this.groupDic[a] : []
        };
        d.prototype.createGroup = function(a, b, d) {
            void 0 === d && (d = !1);
            if (!d && this.groupDic[a] || !b || 0 == b.length) return !1;
            d = this.groupDic;
            for (var c = [], h = b.length,
                g = 0; g < h; g++) {
                var f = b[g],
                    l = d[f];
                if (l)
                    for (var f = l.length, m = 0; m < f; m++) {
                        var n = l[m]; - 1 == c.indexOf(n) && c.push(n)
                    } else(n = this.keyMap[f]) ? -1 == c.indexOf(n) && c.push(n) : egret.Logger.warningWithErrorId(2E3, f)
            }
            if (0 == c.length) return !1;
            this.groupDic[a] = c;
            return !0
        };
        d.prototype.parseConfig = function(a, b) {
            if (a) {
                var d = a.resources;
                if (d)
                    for (var c = d.length, h = 0; h < c; h++) {
                        var g = d[h],
                            f = g.url;
                        f && -1 == f.indexOf("://") && (g.url = b + f);
                        this.addItemToKeyMap(g)
                    }
                if (d = a.groups)
                    for (c = d.length, h = 0; h < c; h++) {
                        for (var f = d[h], l = [], m = f.keys.split(","),
                            n = m.length, p = 0; p < n; p++) g = m[p].trim(), (g = this.keyMap[g]) && -1 == l.indexOf(g) && l.push(g);
                        this.groupDic[f.name] = l
                    }
            }
        };
        d.prototype.addSubkey = function(a, b) {
            var d = this.keyMap[b];
            d && !this.keyMap[a] && (this.keyMap[a] = d)
        };
        d.prototype.addItemToKeyMap = function(a) {
            this.keyMap[a.name] || (this.keyMap[a.name] = a);
            if (a.hasOwnProperty("subkeys")) {
                var b = a.subkeys.split(",");
                a.subkeys = b;
                for (var d = b.length, c = 0; c < d; c++) {
                    var h = b[c];
                    null == this.keyMap[h] && (this.keyMap[h] = a)
                }
            }
        };
        d.prototype.getName = function(a) {
            return (a = this.keyMap[a]) ?
                a.name : ""
        };
        d.prototype.getType = function(a) {
            return (a = this.keyMap[a]) ? a.type : ""
        };
        d.prototype.getRawResourceItem = function(a) {
            return this.keyMap[a]
        };
        d.prototype.getResourceItem = function(a) {
            return (a = this.keyMap[a]) ? this.parseResourceItem(a) : null
        };
        d.prototype.parseResourceItem = function(a) {
            var e = new b.ResourceItem(a.name, a.url, a.type);
            e.data = a;
            return e
        };
        return d
    }();
    b.ResourceConfig = c;
    c.prototype.__class__ = "RES.ResourceConfig"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this.thread = 2;
            this.loadingCount = 0;
            this.resInstance = this.callBack = null;
            this.groupTotalDic = {};
            this.numLoadedDic = {};
            this.itemListDic = {};
            this.groupErrorDic = {};
            this.retryTimesDic = {};
            this.maxRetryTimes = 3;
            this.failedList = [];
            this.priorityQueue = {};
            this.lazyLoadList = [];
            this.analyzerDic = {};
            this.queueIndex = 0
        }
        __extends(a, d);
        a.prototype.isGroupInLoading = function(a) {
            return void 0 !== this.itemListDic[a]
        };
        a.prototype.loadGroup = function(a, d, c) {
            void 0 === c && (c =
                0);
            if (!this.itemListDic[d] && d)
                if (a && 0 != a.length) {
                    this.priorityQueue[c] ? this.priorityQueue[c].push(d) : this.priorityQueue[c] = [d];
                    this.itemListDic[d] = a;
                    c = a.length;
                    for (var h = 0; h < c; h++) a[h].groupName = d;
                    this.groupTotalDic[d] = a.length;
                    this.numLoadedDic[d] = 0;
                    this.next()
                } else egret.Logger.warningWithErrorId(2001, d), a = new b.ResourceEvent(b.ResourceEvent.GROUP_LOAD_ERROR), a.groupName = d, this.dispatchEvent(a)
        };
        a.prototype.loadItem = function(a) {
            this.lazyLoadList.push(a);
            a.groupName = "";
            this.next()
        };
        a.prototype.next =
            function() {
                for (; this.loadingCount < this.thread;) {
                    var a = this.getOneResourceItem();
                    if (!a) break;
                    this.loadingCount++;
                    if (a.loaded) this.onItemComplete(a);
                    else {
                        var d = this.analyzerDic[a.type];
                        d || (d = this.analyzerDic[a.type] = egret.Injector.getInstance(b.AnalyzerBase, a.type));
                        d.loadFile(a, this.onItemComplete, this)
                    }
                }
            };
        a.prototype.getOneResourceItem = function() {
            if (0 < this.failedList.length) return this.failedList.shift();
            var a = Number.NEGATIVE_INFINITY,
                b;
            for (b in this.priorityQueue) a = Math.max(a, b);
            a = this.priorityQueue[a];
            if (!a || 0 == a.length) return 0 == this.lazyLoadList.length ? null : this.lazyLoadList.pop();
            b = a.length;
            for (var d, c = 0; c < b; c++) {
                this.queueIndex >= b && (this.queueIndex = 0);
                d = this.itemListDic[a[this.queueIndex]];
                if (0 < d.length) break;
                this.queueIndex++
            }
            return 0 == d.length ? null : d.shift()
        };
        a.prototype.onItemComplete = function(a) {
            this.loadingCount--;
            var d = a.groupName;
            if (!a.loaded) {
                var c = this.retryTimesDic[a.name] || 1;
                if (c > this.maxRetryTimes) delete this.retryTimesDic[a.name], b.ResourceEvent.dispatchResourceEvent(this.resInstance,
                    b.ResourceEvent.ITEM_LOAD_ERROR, d, a);
                else {
                    this.retryTimesDic[a.name] = c + 1;
                    this.failedList.push(a);
                    this.next();
                    return
                }
            }
            if (d) {
                this.numLoadedDic[d]++;
                var c = this.numLoadedDic[d],
                    h = this.groupTotalDic[d];
                a.loaded || (this.groupErrorDic[d] = !0);
                b.ResourceEvent.dispatchResourceEvent(this.resInstance, b.ResourceEvent.GROUP_PROGRESS, d, a, c, h);
                c == h && (a = this.groupErrorDic[d], this.removeGroupName(d), delete this.groupTotalDic[d], delete this.numLoadedDic[d], delete this.itemListDic[d], delete this.groupErrorDic[d], a ? b.ResourceEvent.dispatchResourceEvent(this,
                    b.ResourceEvent.GROUP_LOAD_ERROR, d) : b.ResourceEvent.dispatchResourceEvent(this, b.ResourceEvent.GROUP_COMPLETE, d))
            } else this.callBack.call(this.resInstance, a);
            this.next()
        };
        a.prototype.removeGroupName = function(a) {
            for (var b in this.priorityQueue) {
                for (var d = this.priorityQueue[b], c = d.length, g = 0, f = !1, c = d.length, l = 0; l < c; l++) {
                    if (d[l] == a) {
                        d.splice(g, 1);
                        f = !0;
                        break
                    }
                    g++
                }
                if (f) {
                    0 == d.length && delete this.priorityQueue[b];
                    break
                }
            }
        };
        return a
    }(egret.EventDispatcher);
    b.ResourceLoader = c;
    c.prototype.__class__ = "RES.ResourceLoader"
})(RES ||
    (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this.resourceConfig = null;
            this.resourceConfig = b.configInstance
        }
        __extends(a, d);
        a.prototype.addSubkey = function(a, b) {
            this.resourceConfig.addSubkey(a, b)
        };
        a.prototype.loadFile = function(a, b, d) {};
        a.prototype.getRes = function(a) {};
        a.prototype.destroyRes = function(a) {
            return !1
        };
        a.getStringPrefix = function(a) {
            if (!a) return "";
            var b = a.indexOf(".");
            return -1 != b ? a.substring(0, b) : ""
        };
        a.getStringTail = function(a) {
            if (!a) return "";
            var b = a.indexOf(".");
            return -1 != b ? a.substring(b +
                1) : ""
        };
        return a
    }(egret.HashObject);
    b.AnalyzerBase = c;
    c.prototype.__class__ = "RES.AnalyzerBase"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a() {
            b.call(this);
            this.fileDic = {};
            this.resItemDic = [];
            this._dataFormat = egret.URLLoaderDataFormat.BINARY;
            this.recycler = new egret.Recycler
        }
        __extends(a, b);
        a.prototype.loadFile = function(a, b, d) {
            if (this.fileDic[a.name]) b.call(d, a);
            else {
                var c = this.getLoader();
                this.resItemDic[c.hashCode] = {
                    item: a,
                    func: b,
                    thisObject: d
                };
                c.load(new egret.URLRequest(a.url))
            }
        };
        a.prototype.getLoader = function() {
            var a = this.recycler.pop();
            a || (a = new egret.URLLoader, a.addEventListener(egret.Event.COMPLETE,
                this.onLoadFinish, this), a.addEventListener(egret.IOErrorEvent.IO_ERROR, this.onLoadFinish, this));
            a.dataFormat = this._dataFormat;
            return a
        };
        a.prototype.onLoadFinish = function(a) {
            var b = a.target,
                d = this.resItemDic[b.hashCode];
            delete this.resItemDic[b.hashCode];
            var c = d.item,
                g = d.func;
            c.loaded = a.type == egret.Event.COMPLETE;
            c.loaded && this.analyzeData(c, b.data);
            this.recycler.push(b);
            g.call(d.thisObject, c)
        };
        a.prototype.analyzeData = function(a, b) {
            var d = a.name;
            !this.fileDic[d] && b && (this.fileDic[d] = b)
        };
        a.prototype.getRes =
            function(a) {
                return this.fileDic[a]
            };
        a.prototype.hasRes = function(a) {
            return null != this.getRes(a)
        };
        a.prototype.destroyRes = function(a) {
            return this.fileDic[a] ? (delete this.fileDic[a], !0) : !1
        };
        return a
    }(b.AnalyzerBase);
    b.BinAnalyzer = c;
    c.prototype.__class__ = "RES.BinAnalyzer"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a() {
            b.call(this);
            this._dataFormat = egret.URLLoaderDataFormat.TEXTURE
        }
        __extends(a, b);
        a.prototype.analyzeData = function(a, b) {
            var d = a.name;
            !this.fileDic[d] && b && (this.fileDic[d] = b, (d = a.data) && d.scale9grid && (d = d.scale9grid.split(","), b.scale9Grid = new egret.Rectangle(parseInt(d[0]), parseInt(d[1]), parseInt(d[2]), parseInt(d[3]))))
        };
        return a
    }(b.BinAnalyzer);
    b.ImageAnalyzer = c;
    c.prototype.__class__ = "RES.ImageAnalyzer"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a() {
            b.call(this);
            this._dataFormat = egret.URLLoaderDataFormat.TEXT
        }
        __extends(a, b);
        a.prototype.analyzeData = function(a, b) {
            var d = a.name;
            if (!this.fileDic[d] && b) try {
                this.fileDic[d] = JSON.parse(b)
            } catch (c) {
                egret.Logger.warningWithErrorId(1017, a.url, b)
            }
        };
        return a
    }(b.BinAnalyzer);
    b.JsonAnalyzer = c;
    c.prototype.__class__ = "RES.JsonAnalyzer"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a() {
            b.call(this);
            this._dataFormat = egret.URLLoaderDataFormat.TEXT
        }
        __extends(a, b);
        return a
    }(b.BinAnalyzer);
    b.TextAnalyzer = c;
    c.prototype.__class__ = "RES.TextAnalyzer"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a() {
            d.call(this);
            this.sheetMap = {};
            this.textureMap = {};
            this._dataFormat = egret.URLLoaderDataFormat.TEXT
        }
        __extends(a, d);
        a.prototype.getRes = function(a) {
            var d = this.fileDic[a];
            d || (d = this.textureMap[a]);
            !d && (d = b.AnalyzerBase.getStringPrefix(a), d = this.fileDic[d]) && (a = b.AnalyzerBase.getStringTail(a), d = d.getTexture(a));
            return d
        };
        a.prototype.onLoadFinish = function(a) {
            var b = a.target,
                d = this.resItemDic[b.hashCode];
            delete this.resItemDic[b.hashCode];
            var c = d.item,
                g = d.func;
            c.loaded =
                a.type == egret.Event.COMPLETE;
            if (c.loaded)
                if ("string" == typeof b.data) {
                    if (c.loaded = !1, a = this.analyzeConfig(c, b.data)) {
                        c.url = a;
                        this._dataFormat = egret.URLLoaderDataFormat.TEXTURE;
                        this.loadFile(c, g, d.thisObject);
                        this._dataFormat = egret.URLLoaderDataFormat.TEXT;
                        return
                    }
                } else this.analyzeBitmap(c, b.data);
            c.url = c.data.url;
            this.recycler.push(b);
            g.call(d.thisObject, c)
        };
        a.prototype.analyzeConfig = function(a, b) {
            var d = a.name,
                c, g = "";
            try {
                c = JSON.parse(b)
            } catch (f) {
                egret.Logger.warningWithErrorId(1017, a.url, b)
            }
            c && (this.sheetMap[d] =
                c, g = this.getRelativePath(a.url, c.file));
            return g
        };
        a.prototype.analyzeBitmap = function(a, b) {
            var d = a.name;
            if (!this.fileDic[d] && b) {
                var c = this.sheetMap[d];
                delete this.sheetMap[d];
                c = this.parseSpriteSheet(b, c, a.data && a.data.subkeys ? "" : d);
                this.fileDic[d] = c
            }
        };
        a.prototype.getRelativePath = function(a, b) {
            a = a.split("\\").join("/");
            var d = a.lastIndexOf("/");
            return a = -1 != d ? a.substring(0, d + 1) + b : b
        };
        a.prototype.parseSpriteSheet = function(a, b, d) {
            b = b.frames;
            if (!b) return null;
            var c = new egret.SpriteSheet(a),
                g = this.textureMap,
                f;
            for (f in b) {
                var l = b[f];
                a = c.createTexture(f, l.x, l.y, l.w, l.h, l.offX, l.offY, l.sourceW, l.sourceH);
                l.scale9grid && (l = l.scale9grid.split(","), a.scale9Grid = new egret.Rectangle(parseInt(l[0]), parseInt(l[1]), parseInt(l[2]), parseInt(l[3])));
                null == g[f] && (g[f] = a, d && this.addSubkey(f, d))
            }
            return c
        };
        a.prototype.destroyRes = function(a) {
            var b = this.fileDic[a];
            if (b) {
                delete this.fileDic[a];
                for (var d in b._textureMap) this.textureMap[d] && delete this.textureMap[d];
                return !0
            }
            return !1
        };
        return a
    }(b.BinAnalyzer);
    b.SheetAnalyzer =
        c;
    c.prototype.__class__ = "RES.SheetAnalyzer"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a() {
            b.call(this)
        }
        __extends(a, b);
        a.prototype.analyzeConfig = function(a, b) {
            var d = a.name,
                c, g = "";
            try {
                c = JSON.parse(b)
            } catch (f) {}
            c ? g = this.getRelativePath(a.url, c.file) : (c = b, g = this.getTexturePath(a.url, c));
            this.sheetMap[d] = c;
            return g
        };
        a.prototype.analyzeBitmap = function(a, b) {
            var d = a.name;
            if (!this.fileDic[d] && b) {
                var c = this.sheetMap[d];
                delete this.sheetMap[d];
                c = new egret.BitmapFont(b, c);
                this.fileDic[d] = c
            }
        };
        a.prototype.getTexturePath = function(a, b) {
            var d = "",
                c = b.split("\n")[2],
                g = c.indexOf('file="'); - 1 != g && (c = c.substring(g + 6), g = c.indexOf('"'), d = c.substring(0, g));
            a = a.split("\\").join("/");
            g = a.lastIndexOf("/");
            return a = -1 != g ? a.substring(0, g + 1) + d : d
        };
        a.prototype.destroyRes = function(a) {
            return this.fileDic[a] ? (delete this.fileDic[a], !0) : !1
        };
        return a
    }(b.SheetAnalyzer);
    b.FontAnalyzer = c;
    c.prototype.__class__ = "RES.FontAnalyzer"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a() {
            b.call(this);
            this._dataFormat = egret.URLLoaderDataFormat.SOUND
        }
        __extends(a, b);
        a.prototype.analyzeData = function(a, b) {
            var d = a.name;
            !this.fileDic[d] && b && (this.fileDic[d] = b, (d = a.data) && d.soundType ? b.preload(d.soundType) : b.preload(egret.Sound.EFFECT))
        };
        return a
    }(b.BinAnalyzer);
    b.SoundAnalyzer = c;
    c.prototype.__class__ = "RES.SoundAnalyzer"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(b) {
        function a() {
            b.call(this);
            this._dataFormat = egret.URLLoaderDataFormat.TEXT
        }
        __extends(a, b);
        a.prototype.analyzeData = function(a, b) {
            var d = a.name;
            if (!this.fileDic[d] && b) try {
                var c = egret.XML.parse(b);
                this.fileDic[d] = c
            } catch (g) {}
        };
        return a
    }(b.BinAnalyzer);
    b.XMLAnalyzer = c;
    c.prototype.__class__ = "RES.XMLAnalyzer"
})(RES || (RES = {}));
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    b.loadConfig = function(a, b, c) {
        void 0 === b && (b = "");
        void 0 === c && (c = "json");
        d.loadConfig(a, b, c)
    };
    b.loadGroup = function(a, b) {
        void 0 === b && (b = 0);
        d.loadGroup(a, b)
    };
    b.isGroupLoaded = function(a) {
        return d.isGroupLoaded(a)
    };
    b.getGroupByName = function(a) {
        return d.getGroupByName(a)
    };
    b.createGroup = function(a, b, c) {
        void 0 === c && (c = !1);
        return d.createGroup(a, b, c)
    };
    b.hasRes = function(a) {
        return d.hasRes(a)
    };
    b.parseConfig = function(a, b) {
        void 0 === b && (b = "");
        d.parseConfig(a, b)
    };
    b.getRes = function(a) {
        return d.getRes(a)
    };
    b.getResAsync = function(a, b, c) {
        d.getResAsync(a, b, c)
    };
    b.getResByUrl = function(a, b, c, q) {
        void 0 === q && (q = "");
        d.getResByUrl(a, b, c, q)
    };
    b.destroyRes = function(a) {
        return d.destroyRes(a)
    };
    b.setMaxLoadingThread = function(a) {
        d.setMaxLoadingThread(a)
    };
    b.setMaxRetryTimes = function(a) {
        d.setMaxRetryTimes(a)
    };
    b.addEventListener = function(a, b, c, q, h) {
        void 0 === q && (q = !1);
        void 0 === h && (h = 0);
        d.addEventListener(a, b, c, q, h)
    };
    b.removeEventListener = function(a, b, c, q) {
        void 0 === q && (q = !1);
        d.removeEventListener(a, b, c, q)
    };
    var c = function(a) {
        function d() {
            a.call(this);
            this.analyzerDic = {};
            this.configItemList = [];
            this.configComplete = this.callLaterFlag = !1;
            this.loadedGroups = [];
            this.groupNameList = [];
            this.asyncDic = {};
            this.init()
        }
        __extends(d, a);
        d.prototype.getAnalyzerByType = function(a) {
            var d = this.analyzerDic[a];
            d || (d = this.analyzerDic[a] = egret.Injector.getInstance(b.AnalyzerBase, a));
            return d
        };
        d.prototype.init = function() {
            egret.Injector.hasMapRule(b.AnalyzerBase, b.ResourceItem.TYPE_BIN) || egret.Injector.mapClass(b.AnalyzerBase, b.BinAnalyzer, b.ResourceItem.TYPE_BIN);
            egret.Injector.hasMapRule(b.AnalyzerBase,
                b.ResourceItem.TYPE_IMAGE) || egret.Injector.mapClass(b.AnalyzerBase, b.ImageAnalyzer, b.ResourceItem.TYPE_IMAGE);
            egret.Injector.hasMapRule(b.AnalyzerBase, b.ResourceItem.TYPE_TEXT) || egret.Injector.mapClass(b.AnalyzerBase, b.TextAnalyzer, b.ResourceItem.TYPE_TEXT);
            egret.Injector.hasMapRule(b.AnalyzerBase, b.ResourceItem.TYPE_JSON) || egret.Injector.mapClass(b.AnalyzerBase, b.JsonAnalyzer, b.ResourceItem.TYPE_JSON);
            egret.Injector.hasMapRule(b.AnalyzerBase, b.ResourceItem.TYPE_SHEET) || egret.Injector.mapClass(b.AnalyzerBase,
                b.SheetAnalyzer, b.ResourceItem.TYPE_SHEET);
            egret.Injector.hasMapRule(b.AnalyzerBase, b.ResourceItem.TYPE_FONT) || egret.Injector.mapClass(b.AnalyzerBase, b.FontAnalyzer, b.ResourceItem.TYPE_FONT);
            egret.Injector.hasMapRule(b.AnalyzerBase, b.ResourceItem.TYPE_SOUND) || egret.Injector.mapClass(b.AnalyzerBase, b.SoundAnalyzer, b.ResourceItem.TYPE_SOUND);
            egret.Injector.hasMapRule(b.AnalyzerBase, b.ResourceItem.TYPE_XML) || egret.Injector.mapClass(b.AnalyzerBase, b.XMLAnalyzer, b.ResourceItem.TYPE_XML);
            this.resConfig =
                new b.ResourceConfig;
            this.resLoader = new b.ResourceLoader;
            this.resLoader.callBack = this.onResourceItemComp;
            this.resLoader.resInstance = this;
            this.resLoader.addEventListener(b.ResourceEvent.GROUP_COMPLETE, this.onGroupComp, this);
            this.resLoader.addEventListener(b.ResourceEvent.GROUP_LOAD_ERROR, this.onGroupError, this)
        };
        d.prototype.loadConfig = function(a, b, d) {
            void 0 === d && (d = "json");
            this.configItemList.push({
                url: a,
                resourceRoot: b,
                type: d
            });
            this.callLaterFlag || (egret.callLater(this.startLoadConfig, this), this.callLaterFlag = !0)
        };
        d.prototype.startLoadConfig = function() {
            this.callLaterFlag = !1;
            var a = this.configItemList;
            this.configItemList = [];
            this.loadingConfigList = a;
            for (var c = a.length, h = [], g = 0; g < c; g++) {
                var f = a[g],
                    f = new b.ResourceItem(f.url, f.url, f.type);
                h.push(f)
            }
            this.resLoader.loadGroup(h, d.GROUP_CONFIG, Number.MAX_VALUE)
        };
        d.prototype.isGroupLoaded = function(a) {
            return -1 != this.loadedGroups.indexOf(a)
        };
        d.prototype.getGroupByName = function(a) {
            return this.resConfig.getGroupByName(a)
        };
        d.prototype.loadGroup = function(a, d) {
            void 0 ===
                d && (d = 0);
            if (-1 != this.loadedGroups.indexOf(a)) b.ResourceEvent.dispatchResourceEvent(this, b.ResourceEvent.GROUP_COMPLETE, a);
            else if (!this.resLoader.isGroupInLoading(a))
                if (this.configComplete) {
                    var e = this.resConfig.getGroupByName(a);
                    this.resLoader.loadGroup(e, a, d)
                } else this.groupNameList.push({
                    name: a,
                    priority: d
                })
        };
        d.prototype.createGroup = function(a, b, d) {
            void 0 === d && (d = !1);
            if (d) {
                var e = this.loadedGroups.indexOf(a); - 1 != e && this.loadedGroups.splice(e, 1)
            }
            return this.resConfig.createGroup(a, b, d)
        };
        d.prototype.onGroupComp =
            function(a) {
                if (a.groupName == d.GROUP_CONFIG) {
                    a = this.loadingConfigList.length;
                    for (var c = 0; c < a; c++) {
                        var h = this.loadingConfigList[c],
                            g = this.getAnalyzerByType(h.type),
                            f = g.getRes(h.url);
                        g.destroyRes(h.url);
                        this.resConfig.parseConfig(f, h.resourceRoot)
                    }
                    this.configComplete = !0;
                    this.loadingConfigList = null;
                    b.ResourceEvent.dispatchResourceEvent(this, b.ResourceEvent.CONFIG_COMPLETE);
                    this.loadDelayGroups()
                } else this.loadedGroups.push(a.groupName), this.dispatchEvent(a)
            };
        d.prototype.loadDelayGroups = function() {
            var a =
                this.groupNameList;
            this.groupNameList = [];
            for (var b = a.length, d = 0; d < b; d++) {
                var e = a[d];
                this.loadGroup(e.name, e.priority)
            }
        };
        d.prototype.onGroupError = function(a) {
            a.groupName == d.GROUP_CONFIG ? (this.loadingConfigList = null, b.ResourceEvent.dispatchResourceEvent(this, b.ResourceEvent.CONFIG_LOAD_ERROR)) : this.dispatchEvent(a)
        };
        d.prototype.hasRes = function(a) {
            var d = this.resConfig.getType(a);
            return "" == d && (a = b.AnalyzerBase.getStringPrefix(a), d = this.resConfig.getType(a), "" == d) ? !1 : !0
        };
        d.prototype.parseConfig = function(a,
            b) {
            this.resConfig.parseConfig(a, b);
            this.configComplete || this.loadingConfigList || (this.configComplete = !0, this.loadDelayGroups())
        };
        d.prototype.getRes = function(a) {
            var d = this.resConfig.getType(a);
            return "" == d && (d = b.AnalyzerBase.getStringPrefix(a), d = this.resConfig.getType(d), "" == d) ? null : this.getAnalyzerByType(d).getRes(a)
        };
        d.prototype.getResAsync = function(a, d, e) {
            var c = this.resConfig.getType(a),
                f = this.resConfig.getName(a);
            if ("" == c && (f = b.AnalyzerBase.getStringPrefix(a), c = this.resConfig.getType(f), "" == c)) {
                d.call(e,
                    null);
                return
            }(c = this.getAnalyzerByType(c).getRes(a)) ? d.call(e, c): (a = {
                key: a,
                compFunc: d,
                thisObject: e
            }, this.asyncDic[f] ? this.asyncDic[f].push(a) : (this.asyncDic[f] = [a], f = this.resConfig.getResourceItem(f), this.resLoader.loadItem(f)))
        };
        d.prototype.getResByUrl = function(a, d, e, c) {
            void 0 === c && (c = "");
            if (a) {
                c || (c = this.getTypeByUrl(a));
                var f = this.getAnalyzerByType(c).getRes(a);
                f ? d.call(e, f) : (d = {
                    key: a,
                    compFunc: d,
                    thisObject: e
                }, this.asyncDic[a] ? this.asyncDic[a].push(d) : (this.asyncDic[a] = [d], a = new b.ResourceItem(a,
                    a, c), this.resLoader.loadItem(a)))
            } else d.call(e, null)
        };
        d.prototype.getTypeByUrl = function(a) {
            (a = a.substr(a.lastIndexOf(".") + 1)) && (a = a.toLowerCase());
            switch (a) {
                case b.ResourceItem.TYPE_XML:
                case b.ResourceItem.TYPE_JSON:
                case b.ResourceItem.TYPE_SHEET:
                    break;
                case "png":
                case "jpg":
                case "gif":
                case "jpeg":
                case "bmp":
                    a = b.ResourceItem.TYPE_IMAGE;
                    break;
                case "fnt":
                    a = b.ResourceItem.TYPE_FONT;
                    break;
                case "txt":
                    a = b.ResourceItem.TYPE_TEXT;
                    break;
                case "mp3":
                case "ogg":
                case "mpeg":
                case "wav":
                case "m4a":
                case "mp4":
                case "aiff":
                case "wma":
                case "mid":
                    a =
                        b.ResourceItem.TYPE_SOUND;
                    break;
                default:
                    a = b.ResourceItem.TYPE_BIN
            }
            return a
        };
        d.prototype.onResourceItemComp = function(a) {
            var b = this.asyncDic[a.name];
            delete this.asyncDic[a.name];
            a = this.getAnalyzerByType(a.type);
            for (var d = b.length, e = 0; e < d; e++) {
                var c = b[e],
                    l = a.getRes(c.key);
                c.compFunc.call(c.thisObject, l, c.key)
            }
        };
        d.prototype.destroyRes = function(a) {
            var b = this.resConfig.getRawGroupByName(a);
            if (b) {
                var d = this.loadedGroups.indexOf(a); - 1 != d && this.loadedGroups.splice(d, 1);
                a = b.length;
                for (var e = 0; e < a; e++) {
                    d = b[e];
                    d.loaded = !1;
                    var c = this.getAnalyzerByType(d.type);
                    c.destroyRes(d.name)
                }
                return !0
            }
            b = this.resConfig.getType(a);
            if ("" == b) return !1;
            d = this.resConfig.getRawResourceItem(a);
            d.loaded = !1;
            c = this.getAnalyzerByType(b);
            return c.destroyRes(a)
        };
        d.prototype.setMaxLoadingThread = function(a) {
            1 > a && (a = 1);
            this.resLoader.thread = a
        };
        d.prototype.setMaxRetryTimes = function(a) {
            a = Math.max(a, 0);
            this.resLoader.maxRetryTimes = a
        };
        d.GROUP_CONFIG = "RES__CONFIG";
        return d
    }(egret.EventDispatcher);
    c.prototype.__class__ = "RES.Resource";
    var d =
        new c
})(RES || (RES = {}));
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    starlingswf;
(function(b) {
    var c = function(b) {
        function a() {
            b.apply(this, arguments)
        }
        __extends(a, b);
        a.prototype.getTextField = function(a) {
            return this.getChildByName(a)
        };
        a.prototype.getMovie = function(a) {
            return this.getChildByName(a)
        };
        a.prototype.getSprite = function(a) {
            return this.getChildByName(a)
        };
        a.prototype.getImage = function(a) {
            return this.getChildByName(a)
        };
        return a
    }(egret.DisplayObjectContainer);
    b.SwfSprite = c;
    c.prototype.__class__ = "starlingswf.SwfSprite"
})(starlingswf || (starlingswf = {}));
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    App = function(b) {
        function c() {
            b.call(this);
            this._miniLogoAlign = 1;
            this.addEventListener(egret.Event.ADDED_TO_STAGE, this.onAddToStageHandler, this)
        }
        __extends(c, b);
        Object.defineProperty(c, "swf", {
            get: function() {
                return c._swf
            },
            enumerable: !0,
            configurable: !0
        });
        Object.defineProperty(c, "stage", {
            get: function() {
                return c._stage
            },
            enumerable: !0,
            configurable: !0
        });
        c.prototype._createLoadingView = function() {
            this.__loadingSkin = c.swf.createSprite("spr_YIA_LOADING_VIEW");
            c._stage.addChild(this.__loadingSkin);
            var b = this.__loadingSkin.getSprite("loadingSpr"),
                a = this.__loadingSkin.getImage("logoImg");
            a.y = (c.stage.stageHeight - a.height) / 2;
            var e = a.y - 30;
            a.alpha = 0;
            egret.Tween.get(a).to({
                alpha: 1,
                y: e
            }, 800);
            this.__oriLoadingBarWidhth = b.getImage("loadingBar").width;
            b.getImage("loadingBar").scrollRect = new egret.Rectangle(0, 0, 0.1 * this.__oriLoadingBarWidhth, b.getImage("loadingBar").height);
            a.touchEnabled = !0;
            a.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchLogoHandler, this);
            b = this.__loadingSkin.getImage("playBtn");
            b.touchEnabled = !1;
            b.alpha = 0;
            this.onStageResizeHandler(null)
        };
        c.prototype.setProgress = function(b, a) {
            this.__loadingSkin.getSprite("loadingSpr").getImage("loadingBar").scrollRect.width = b / a * this.__oriLoadingBarWidhth
        };
        c.prototype.onAddToStageHandler = function(b) {
            if (!c.stage) {
                try {
                    eval("OnGameStage").call(this)
                } catch (a) {
                    console.log("Can not found function [OnGameStage]")
                }
                c.isDebug &&
                    (console.log("DebugModel"), console.log("gamename: " + c.gamename), console.log("nameid: " + c.nameid), console.log("AppVersion: " + c.version));
                this.removeEventListener(egret.Event.ADDED_TO_STAGE, this.onAddToStageHandler, this);
                c._stage = this.stage;
                RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE, this.onConfigComplete, this);
                RES.loadConfig("resource/resource.json", "resource/");
                c.stage.addEventListener(egret.Event.RESIZE, this.onStageResizeHandler, this)
            }
        };
        c.prototype.onStageResizeHandler = function(b) {
            if (this.__loadingSkin) {
                b =
                    this.__loadingSkin.getImage("bg");
                var a = this.__loadingSkin.getSprite("loadingSpr"),
                    e = this.__loadingSkin.getImage("logoImg"),
                    k = this.__loadingSkin.getImage("playBtn");
                b.width = c.stage.stageWidth;
                b.height = c.stage.stageHeight;
                e.x = (c.stage.stageWidth - e.width) / 2;
                e.y = (c.stage.stageHeight - e.height) / 2;
                a.x = (c.stage.stageWidth - a.width) / 2;
                a.y = e.y + e.height + 50;
                k.x = (c.stage.stageWidth - k.width) / 2;
                k.y = a.y
            }
            this.__miniLogo && this.alignMiniLogo(this._miniLogoAlign)
        };
        c.prototype.onConfigComplete = function(b) {
            RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,
                this.onConfigComplete, this);
            RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE, this.onResourceLoadComplete, this);
            RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR, this.onResourceLoadError, this);
            RES.loadGroup("yia_loading")
        };
        c.prototype.onResourceLoadComplete = function(b) {
            if ("yia_loading" == b.groupName) {
                b = RES.getRes("yia_swf");
                var a = RES.getRes("yia"),
                    e = new starlingswf.SwfAssetManager;
                e.addSpriteSheet("yia", a);
                c._swf = new starlingswf.Swf(b, e, 24);
                this._createLoadingView();
                RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,
                    this.onResourceProgress, this);
                RES.loadGroup("preload")
            } else "preload" == b.groupName && (RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE, this.onResourceLoadComplete, this), RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR, this.onResourceLoadError, this), RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS, this.onResourceProgress, this), this.__loadingSkin.getSprite("loadingSpr").visible = !1, b = this.__loadingSkin.getImage("playBtn"), b.touchEnabled = !0, b.visible = !0, egret.Tween.get(b).to({
                    alpha: 1
                },
                800), b.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchPlayHandler, this))
        };
        c.prototype.onTouchLogoHandler = function(b) {
            "logoImg" == b.currentTarget.name ? c.ClickLoadingLogo() : "mini_logo" == b.currentTarget.name ? c.ClickLogo() : b.currentTarget == c.stage && c.ClickLoadingSplash()
        };
        c.prototype.onTouchPlayHandler = function(b) {
            this.__loadingSkin.getImage("logoImg").removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchLogoHandler, this);
            this.__loadingSkin.getImage("playBtn").removeEventListener(egret.TouchEvent.TOUCH_TAP,
                this.onTouchPlayHandler, this);
            this.__loadingSkin.getSprite("loadingSpr").visible = !1;
            this.__loadingSkin.getImage("playBtn").touchEnabled = !1;
            this.__appTimer = new egret.Timer(c.isDebug ? 100 : 5E3);
            this.__appTimer.addEventListener(egret.TimerEvent.TIMER, this.removeSkin, this);
            this.__appTimer.start();
            b = new egret.Timer(10);
            b.addEventListener(egret.TimerEvent.TIMER, this.__removeTimerHandler, this);
            b.start()
        };
        c.prototype.__removeTimerHandler = function(b) {
            b.currentTarget.removeEventListener(egret.TimerEvent.TIMER,
                this.__removeTimerHandler, this);
            var a = this.__loadingSkin.getImage("logoImg");
            b = a.x;
            var a = a.y,
                e = this.__loadingSkin.getImage("playBtn");
            e.touchEnabled = !1;
            egret.Tween.get(e).to({
                alpha: 0
            }, 500).call(this.logoTween, this, [0.9, b, a])
        };
        c.prototype.logoTween = function(b, a, e) {
            if (this.__loadingSkin) {
                var k = this.__loadingSkin.getImage("logoImg"),
                    q = a + k.width / k.scaleX * (1 - b) / 2,
                    h = e + k.height / k.scaleY * (1 - b) / 2;
                egret.Tween.get(k).to({
                    scaleX: b,
                    scaleY: b,
                    x: q,
                    y: h
                }, 1E3).call(this.logoTween, this, [1 == b ? 0.9 : 1, a, e]);
                c.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,
                    this.onTouchLogoHandler, this)
            }
        };
        c.prototype.removeSkin = function(b) {
            c.stage.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchLogoHandler, this);
            b = this.__loadingSkin.getImage("logoImg");
            egret.Tween.removeTweens(b);
            this.__appTimer.stop();
            this.__appTimer.removeEventListener(egret.TimerEvent.TIMER, this.removeSkin, this);
            this.__appTimer = null;
            this.__loadingSkin && (c.stage.removeChild(this.__loadingSkin), this.__loadingSkin = null);
            b = c.swf.createImage("img_YIA_LOGO");
            this._createMiniLogo(b);
            this.createGameScene()
        };
        c.prototype._createMiniLogo = function(b) {
            this.__miniLogo && (this.__miniLogo.parent.removeChild(this.__miniLogo), this.__miniLogo.removeEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchLogoHandler, this));
            this.__miniLogo = b;
            this.__miniLogo.touchEnabled = !0;
            this.__miniLogo.name = "mini_logo";
            this.stage.addChild(this.__miniLogo);
            this.__miniLogo.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTouchLogoHandler, this);
            this.alignMiniLogo(this._miniLogoAlign)
        };
        c.prototype.alignMiniLogo = function(b) {
            void 0 ===
                b && (b = 1);
            this._miniLogoAlign = b;
            var a = new egret.Point;
            switch (b) {
                case 0:
                    a.x = 10;
                    a.y = 10;
                    break;
                case 1:
                    a.x = 10;
                    a.y = c.stage.stageHeight - this.__miniLogo.height * this.__miniLogo.scaleY - 10;
                    break;
                case 2:
                    a.x = c.stage.stageWidth - this.__miniLogo.width * this.__miniLogo.scaleX - 10;
                    a.y = 10;
                    break;
                case 3:
                    a.x = c.stage.stageWidth - this.__miniLogo.width * this.__miniLogo.scaleX - 10;
                    a.y = c.stage.stageHeight - this.__miniLogo.height * this.__miniLogo.scaleY - 10;
                    break;
                case 4:
                    a.x = (c.stage.stageWidth - this.__miniLogo.width * this.__miniLogo.scaleX) /
                        2;
                    break;
                case 5:
                    a.x = (c.stage.stageWidth - this.__miniLogo.width * this.__miniLogo.scaleX) / 2, a.y = c.stage.stageHeight - this.__miniLogo.height * this.__miniLogo.scaleY - 10
            }
            this.__miniLogo.x = a.x;
            this.__miniLogo.y = a.y
        };
        c.prototype.onResourceLoadError = function(b) {
            console.warn("Group:" + b.groupName + " \u4e2d\u6709\u52a0\u8f7d\u5931\u8d25\u7684\u9879\u76ee");
            this.onResourceLoadComplete(b)
        };
        c.prototype.onResourceProgress = function(b) {
            "preload" == b.groupName && this.setProgress(b.itemsLoaded, b.itemsTotal)
        };
        c.prototype.createGameScene =
            function() {
                this._createGameSwf()
            };
        c.prototype._createGameSwf = function() {
            var b = RES.getRes("Game_swf"),
                a = new starlingswf.SwfAssetManager;
            if (RES.hasRes("Game_json")) {
                var e = RES.getRes("Game_json");
                a.addSpriteSheet("Game_json", e)
            }
            var e = RES.getGroupByName("preload"),
                k = e.length;
            if (3 < k)
                for (var q = 0; q < k; q++) {
                    var h = e[q];
                    "Game_json" != h.name && "Game_png" != h.name && "Game_swf" != h.name && a.addTexture(h.name, RES.getRes(h.name))
                }
            c._swf = new starlingswf.Swf(b, a, 24)
        };
        c.OpenUrl = function(b, a) {
            void 0 === a && (a = "_blank");
            window.open(b,
                a)
        };
        c.SendAnaly = function(b, a, e) {
            console.log(22);
            moregame();
            // Play68.goHome();
            // console.log("SendAnaly(" + b + "," + a + "," + e + ")");
            try {
                var c = eval("CreateLinksInGame");
                c && c.call(this, b, a, e)
            } catch (q) {
                console.log("Can not found function [CreateLinksInGame].")
            }
        };
        c.ShareToFacebook = function(b, a, e) {
            void 0 === e && (e = !0);
            b = e ? "Scored " + b + " in the game " + c.gamename + " and beat " + a + "% of players worldwide!" : "I passed level " + b + " in the game " + c.gamename + " and beat " + a + "% of players worldwide!";
            console.log("ShareToFacebook(" + c.nameid + "," + b + ")");
            try {
                var k = eval("ShareToFacebook");
                k && k.call(this, c.nameid, b)
            } catch (q) {
                console.log("Can not found function [ShareToFacebook].")
            }
        };
        c.ShareToTwitter = function(b, a, e) {
            void 0 === e && (e = !0);
            b = e ? "Scored " + b + " in the game " + c.gamename + " and beat " + a + "%25 of players worldwide!" : "I passed level " + b + " in the game " + c.gamename + " and beat " + a + "%25 of players worldwide!";
            console.log("ShareToTwitter(" + c.nameid + "," + b + ")");
            try {
                var k = eval("ShareToTwitter");
                k && k.call(this, c.nameid, b)
            } catch (q) {
                console.log("Can not found function [ShareToTwitter].")
            }
        };
        c.ClickLoadingLogo =
            function() {
                c.SendAnaly(c.nameid, "loading", "logo")
            };
        c.ClickLoadingSplash = function() {
            c.SendAnaly(c.nameid, "splash", "logo")
        };
        c.ClickLogo = function() {
            c.state == c.PREGAME ? c.SendAnaly(c.nameid, "pregame", "logo") : c.SendAnaly(c.nameid, "ingame", "logo")
        };
        c.ClickMore = function() {
            c.state == c.PREGAME ? c.SendAnaly(c.nameid, "pregame", "moregamesbtn") : c.SendAnaly(c.nameid, "ingame", "moregamesbtn")
        };
        c.OpenHomepage = function(b) {
            void 0 === b && (b = "http://miagame.com");
            c.OpenUrl(b)
        };
        c.Version = function() {
            console.log("App version: " +
                c.version)
        };
        c.version = "1.0.1";
        c.isDebug = !1;
        c.gamename = "-1";
        c.nameid = "-1";
        c.PREGAME = "pregame";
        c.INGAME = "ingame";
        c.state = c.PREGAME;
        return c
    }(egret.DisplayObjectContainer);
App.prototype.__class__ = "App";
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    GameSelectPanel = function(b) {
        function c() {
            b.call(this);
            this.downY = this.preY = 0;
            var d = App.swf.createImage("img_mask");
            d.width = 480;
            d.height = 800;
            d.alpha = 0.8;
            d.touchEnabled = !0;
            this.addChild(d);
            d = App.swf.createImage("img_help_bgbg");
            d.x = 11;
            d.y = 16;
            this.addChild(d);
            d = App.swf.createImage("img_back");
            d.x = 0;
            d.y = 28;
            this.addChild(d);
            d.touchEnabled = !0;
            d.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBack, this);
            this.spr = App.swf.createSprite("spr_list");
            this.addChild(this.spr);
            d = App.swf.createImage("img_wuyong");
            d.x = 382;
            d.y = 718;
            this.addChild(d);
            this.sp_gezi = this.spr.getSprite("list_gezi");
            this.sp_gezi.touchEnabled = !0;
            d = new egret.Rectangle(29, 138, 420, 580);
            this.spr.mask = d;
            this.sp_gezi.addEventListener(egret.TouchEvent.TOUCH_BEGIN, this.onMouseDownHandler, this);
            for (var a, e, d = RES.getRes("fntParking"), c = 0; c < Game.MAX_LV; c++) a = this.sp_gezi.getSprite("a" +
                c), e = a.getImage("btn_click"), e.alpha = 0, e.touchEnabled = !0, e = a.getMovie("list_car"), e.stop(), e.visible = !1, e = a.getImage("select"), e.visible = !1, e = new egret.BitmapText, e.font = d, e.text = c + 1 + "", e.y = -13, e.x = -15, e.scaleX = e.scaleY = 0.7, 10 > c && (e.x = 0), a = a.getSprite("carNum"), a.addChild(e)
        }
        __extends(c, b);
        c.prototype.onBack = function(b) {
            Game.instance.showTitle();
            this.visible = !1
        };
        c.prototype.onMouseDownHandler = function(b) {
            this.downY = this.preY = b.stageY;
            App.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE, this.onMouseMoveHandler,
                this);
            App.stage.addEventListener(egret.TouchEvent.TOUCH_END, this.onMouseUpHandler, this)
        };
        c.prototype.onMouseMoveHandler = function(b) {
            var a = this.sp_gezi.y + (b.stageY - this.preY);
            140 < a && (a = 140); - 1320 > a && (a = -1320);
            this.sp_gezi.y = a;
            this.preY = b.stageY
        };
        c.prototype.onMouseUpHandler = function(b) {
            var a = 1;
            0 == b.stageY - this.downY && "btn_click" == b.target.name && (b = b.target.parent, a = parseInt(b.name.substr(1, 1)) + 1, Game.instance.selectGame(a), this.visible = !1);
            App.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,
                this.onMouseMoveHandler, this);
            App.stage.removeEventListener(egret.TouchEvent.TOUCH_END, this.onMouseUpHandler, this)
        };
        c.prototype.showMap = function() {
            for (var b = xht.getStorageData(Game.HIGHT_LV), b = b ? parseInt(b) : 0, a, e = 0; e < Game.MAX_LV; e++) a = this.sp_gezi.getSprite("a" + e), a.getImage("btn_click").touchEnabled = !1, e > b ? (a.getMovie("list_car").visible = !1, a.getImage("select").visible = !1) : b == e ? (a.getImage("btn_click").touchEnabled = !0, a.getImage("select").visible = !0, a.getMovie("list_car").visible = !1, this.moveMap(a)) :
                e < b && (a.getImage("btn_click").touchEnabled = !0, a.getMovie("list_car").visible = !0, a.getMovie("list_car").gotoAndStop(Math.floor(5 * Math.random())), a.getImage("select").visible = !1)
        };
        c.prototype.moveMap = function(b) {
            b = -b.y + 140;
            140 <= b && (b = 140); - 1320 >= b && (b = -1320);
            egret.Tween.get(this.sp_gezi).to({
                y: b
            }, 500)
        };
        return c
    }(egret.Sprite);
GameSelectPanel.prototype.__class__ = "GameSelectPanel";
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    GameTitlePanel = function(b) {
        function c() {
            b.call(this);
            this.init()
        }
        __extends(c, b);
        c.prototype.init = function() {
            var b = App.swf.createSprite("spr_title");
            b.x = -12;
            this.addChild(b);
            var a = b.getImage("btn_play"),
                b = b.getImage("more");
            b.touchEnabled = a.touchEnabled = !0;
            b.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onMore, this);
            a.addEventListener(egret.TouchEvent.TOUCH_TAP,
                this.onPlay, this)
        };
        c.prototype.onMore = function(b) {
            App.ClickMore()
        };
        c.prototype.onPlay = function(b) {
            Game.instance.showSelectPanel()
        };
        return c
    }(egret.DisplayObjectContainer);
GameTitlePanel.prototype.__class__ = "GameTitlePanel";
(function(b) {
    var c = function() {
        function d(a, e, c) {
            void 0 === c && (c = 24);
            this._swfData = a;
            this._assetManager = e;
            this._createDisplayFuns = {};
            this._createDisplayFuns[d.dataKey_Sprite] = this.createSprite;
            this._createDisplayFuns[d.dataKey_MovieClip] = this.createMovie;
            this._createDisplayFuns[d.dataKey_Image] = this.createImage;
            this._createDisplayFuns[d.dataKey_Scale9] = this.createS9Image;
            this._createDisplayFuns[d.dataKey_ShapeImg] = this.createShapeImage;
            this._createDisplayFuns[d.dataKey_TextField] = this.createTextField;
            this.swfUpdateManager = b.SwfUpdateManager.createSwfUpdateManager(c)
        }
        d.prototype.createSprite = function(a, c, k) {
            void 0 === c && (c = null);
            void 0 === k && (k = null);
            null == k && (k = this._swfData[d.dataKey_Sprite][a]);
            a = new b.SwfSprite;
            for (var q = k.length, h, g, f = 0; f < q; f++) h = k[f], g = this._createDisplayFuns[h[1]], null != g && (g = g.apply(this, [h[0], h]), g.name = h[9], g.x = h[2], g.y = h[3], h[1] != d.dataKey_Scale9 && h[1] != d.dataKey_ShapeImg && (g.scaleX = h[4], g.scaleY = h[5]), g.skewX = h[6], g.skewY = h[7], g.alpha = h[8], a.addChild(g));
            null != c && b.SwfBlendMode.setBlendMode(a,
                c[11]);
            return a
        };
        d.prototype.createMovie = function(a, c) {
            void 0 === c && (c = null);
            var k = this._swfData[d.dataKey_MovieClip][a],
                q = k.objCount,
                h = {},
                g, f, l, m, n;
            for (n in q) {
                f = q[n][0];
                l = q[n][1];
                g = null == h[n] ? [] : h[n];
                for (var p = 0; p < l; p++) m = this._createDisplayFuns[f], null != m && g.push(m.apply(this, [n, null]));
                h[n] = g
            }
            q = new b.SwfMovieClip(k.frames, k.labels, h, this, k.frameEvents);
            q.loop = k.loop;
            null != c && b.SwfBlendMode.setBlendMode(q, c[11]);
            return q
        };
        d.prototype.createImage = function(a, c) {
            void 0 === c && (c = null);
            var k = this._swfData[d.dataKey_Image][a],
                q = this._assetManager.createBitmap(a);
            q.anchorOffsetX = k[0];
            q.anchorOffsetY = k[1];
            null != c && b.SwfBlendMode.setBlendMode(q, c[11]);
            return q
        };
        d.prototype.createS9Image = function(a, c) {
            void 0 === c && (c = null);
            var k = this._swfData[d.dataKey_Scale9][a],
                q = this._assetManager.createBitmap(a);
            q.scale9Grid = new egret.Rectangle(k[0], k[1], k[2], k[3]);
            null != c && (q.width = c[10], q.height = c[11], b.SwfBlendMode.setBlendMode(q, c[13]));
            return q
        };
        d.prototype.createShapeImage = function(a, d) {
            void 0 === d && (d = null);
            var c = this._assetManager.createBitmap(a);
            c.fillMode = egret.BitmapFillMode.REPEAT;
            null != d && (c.width = d[10], c.height = d[11], b.SwfBlendMode.setBlendMode(c, d[13]));
            return c
        };
        d.prototype.createTextField = function(a, d) {
            void 0 === d && (d = null);
            var c = new egret.TextField;
            null != d && (c.width = d[10], c.height = d[11], c.fontFamily = d[12], c.textColor = d[13], c.size = d[14], c.textAlign = d[15], c.text = d[18], b.SwfBlendMode.setBlendMode(c, d[20]));
            return c
        };
        d.dataKey_Sprite = "spr";
        d.dataKey_Image = "img";
        d.dataKey_MovieClip = "mc";
        d.dataKey_TextField = "text";
        d.dataKey_Button = "btn";
        d.dataKey_Scale9 = "s9";
        d.dataKey_ShapeImg = "shapeImg";
        d.dataKey_Component = "comp";
        d.dataKey_Particle = "particle";
        return d
    }();
    b.Swf = c;
    c.prototype.__class__ = "starlingswf.Swf"
})(starlingswf || (starlingswf = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.setBlendMode = function(a, c) {
            b.modes[c] && (a.blendMode = c)
        };
        b.modes = {
            normal: !0,
            add: !0
        };
        return b
    }();
    b.SwfBlendMode = c;
    c.prototype.__class__ = "starlingswf.SwfBlendMode"
})(starlingswf || (starlingswf = {}));
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    xht;
(function(b) {
    b.getStorageData = function(b) {
        var d = egret.localStorage.getItem(b);
        console.log("get", b, d);
        return d
    };
    b.saveStorageData = function(b, d) {
        console.log("save", b, d);
        // updateShare(d, window.score);
        //Play68.setRankingLevelScoreDesc(d, window.score);
        egret.localStorage.setItem(b, d)
    }
})(xht || (xht = {}));
var Game = function(b) {
    function c() {
        b.call(this);
        c._instance = this
    }
    __extends(c, b);
    Object.defineProperty(c, "instance", {
        get: function() {
            return c._instance
        },
        enumerable: !0,
        configurable: !0
    });
    c.prototype.createGameScene = function() {
        b.prototype.createGameScene.call(this);
        this.title = new GameTitlePanel;
        this.addChild(this.title);
        this.gameStar();
        this.gameSelectPanel = new GameSelectPanel;
        this.gameSelectPanel.visible = !1;
        this.addChild(this.gameSelectPanel);
        this.alignMiniLogo(5)
    };
    c.prototype.gameStar = function() {
        App.state =
            App.INGAME;
        this.gameScreen = new game1;
        this.gameScreen.visible = !1;
        this.addChild(this.gameScreen)
    };
    c.prototype.selectGame = function(b) {
        this.title.visible = !1;
        this.gameScreen.visible = !0;
        this.gameScreen.selectStart(b)
    };
    c.prototype.showSelectPanel = function() {
        this.gameSelectPanel.visible = !0;
        this.gameSelectPanel.showMap()
    };
    c.prototype.showTitle = function() {
        this.gameScreen.visible = !1;
        this.title.visible = !0
    };
    c.MAX_LV = 40;
    c.HIGHT_LV = "hight_lv";
    return c
}(App);
Game.prototype.__class__ = "Game";
__extends = this.__extends || function(b, c) {
    function d() {
        this.constructor = b
    }
    for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
    d.prototype = c.prototype;
    b.prototype = new d
};
(function(b) {
    var c = function(d) {
        function a(a, b, c, h, g) {
            void 0 === g && (g = null);
            d.call(this);
            this._isPlay = !1;
            this.loop = !0;
            this._completeFunction = null;
            this._hasCompleteListener = !1;
            this._frames = a;
            this._labels = b;
            this._displayObjects = c;
            this._frameEvents = g;
            this._startFrame = 0;
            this._endFrame = this._frames.length - 1;
            this._ownerSwf = h;
            this.setCurrentFrame(0);
            this.play()
        }
        __extends(a, d);
        a.prototype.update = function() {
            if (this._isPlay)
                if (this._currentFrame > this._endFrame) {
                    var a = !1;
                    this.loop && this._startFrame != this._endFrame ||
                        (this._ownerSwf && this.stop(!1), a = !0);
                    this._hasCompleteListener && this.dispatchEventWith(egret.Event.COMPLETE);
                    a || this.setCurrentFrame(this._startFrame)
                } else this.setCurrentFrame(this._currentFrame), this._currentFrame += 1
        };
        a.prototype.setCurrentFrame = function(a) {
            this._children.length = 0;
            this._currentFrame = a;
            this.__frameInfos = this._frames[this._currentFrame];
            for (var d, c, h = this.__frameInfos.length, g = 0; g < h; g++) {
                a = this.__frameInfos[g];
                d = a[10];
                d = this._displayObjects[a[0]][d];
                d._skewX = a[6];
                d._skewY = a[7];
                d._alpha =
                    a[8];
                d.name = a[9];
                d._x = a[2];
                d._y = a[3];
                switch (a[1]) {
                    case b.Swf.dataKey_Scale9:
                        d.width = a[11];
                        d.height = a[12];
                        b.SwfBlendMode.setBlendMode(d, a[13]);
                        break;
                    case b.Swf.dataKey_ShapeImg:
                        d.width = a[11];
                        d.height = a[12];
                        b.SwfBlendMode.setBlendMode(d, a[13]);
                        break;
                    case b.Swf.dataKey_TextField:
                        c = d;
                        c.width = a[11];
                        c.height = a[12];
                        c.fontFamily = a[13];
                        c.textColor = a[14];
                        c.size = a[15];
                        c.textAlign = a[16];
                        a[19] && "\r" != a[19] && "" != a[19] && (c.text = a[19]);
                        b.SwfBlendMode.setBlendMode(c, a[20]);
                        break;
                    default:
                        d._scaleX = a[4], d._scaleY = a[5],
                            b.SwfBlendMode.setBlendMode(d, a[11])
                }
                this._children.push(d);
                d._parent = this
            }
            null != this._frameEvents && null != this._frameEvents[this._currentFrame] && this.dispatchEventWith(this._frameEvents[this._currentFrame])
        };
        a.prototype.getCurrentFrame = function() {
            return this._currentFrame
        };
        a.prototype.play = function() {
            this._isPlay = !0;
            this._ownerSwf.swfUpdateManager.addSwfAnimation(this);
            var a, d, c;
            for (a in this._displayObjects)
                if (0 == a.indexOf(b.Swf.dataKey_MovieClip)) {
                    d = this._displayObjects[a];
                    c = d.length;
                    for (var h =
                        0; h < c; h++) d[h].play()
                }
        };
        a.prototype.stop = function(a) {
            void 0 === a && (a = !0);
            this._isPlay = !1;
            this._ownerSwf.swfUpdateManager.removeSwfAnimation(this);
            if (a) {
                var d, c, h;
                for (d in this._displayObjects)
                    if (0 == d.indexOf(b.Swf.dataKey_MovieClip)) {
                        c = this._displayObjects[d];
                        h = c.length;
                        for (var g = 0; g < h; g++) c[g].stop(a)
                    }
            }
        };
        a.prototype.gotoAndStop = function(a, b) {
            void 0 === b && (b = !0);
            this.goTo(a);
            this.stop(b)
        };
        a.prototype.gotoAndPlay = function(a) {
            this.goTo(a);
            this.play()
        };
        a.prototype.goTo = function(a) {
            "string" == typeof a ? (a =
                this.getLabelData(a), this._currentLabel = a[0], this._currentFrame = this._startFrame = a[1], this._endFrame = a[2]) : "number" == typeof a && (this._currentFrame = this._startFrame = a, this._endFrame = this._frames.length - 1);
            this.setCurrentFrame(this._currentFrame)
        };
        a.prototype.getLabelData = function(a) {
            for (var b = this._labels.length, d, c = 0; c < b; c++)
                if (d = this._labels[c], d[0] == a) return d;
            return null
        };
        a.prototype.isPlay = function() {
            return this._isPlay
        };
        a.prototype.totalFrames = function() {
            return this._frames.length
        };
        a.prototype.currentLabel =
            function() {
                return this._currentLabel
            };
        a.prototype.labels = function() {
            for (var a = this._labels.length, b = [], d = 0; d < a; d++) b.push(this._labels[d][0]);
            return b
        };
        a.prototype.hasLabel = function(a) {
            return -1 != this.labels().indexOf(a)
        };
        a.prototype.addEventListener = function(a, b, c, h, g) {
            void 0 === h && (h = !1);
            void 0 === g && (g = 0);
            d.prototype.addEventListener.call(this, a, b, c, h, g);
            this._hasCompleteListener = this.hasEventListener(egret.Event.COMPLETE)
        };
        a.prototype.removeEventListener = function(a, b, c, h) {
            void 0 === h && (h = !1);
            d.prototype.removeEventListener.call(this,
                a, b, c, h);
            this._hasCompleteListener = this.hasEventListener(egret.Event.COMPLETE)
        };
        return a
    }(b.SwfSprite);
    b.SwfMovieClip = c;
    c.prototype.__class__ = "starlingswf.SwfMovieClip"
})(starlingswf || (starlingswf = {}));
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    GameHelpPanel = function(b) {
        function c() {
            b.call(this);
            this.init()
        }
        __extends(c, b);
        c.prototype.init = function() {
            var b = App.swf.createSprite("spr_help");
            this.addChild(b);
            var a = b.getImage("back");
            a.touchEnabled = !0;
            a.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPlay, this);
            b = b.getImage("mask_bg");
            b.width = 480;
            b.height = 800;
            b.alpha = 0.6;
            b.touchEnabled = !0
        };
        c.prototype.onPlay = function(b) {
            this.visible = !1
        };
        return c
    }(egret.DisplayObjectContainer);
GameHelpPanel.prototype.__class__ = "GameHelpPanel";
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    GameLevelPanel = function(b) {
        function c() {
            b.call(this);
            this.lv = 1;
            this.init()
        }
        __extends(c, b);
        c.prototype.init = function() {
            var b = App.swf.createSprite("spr_screen");
            this.addChild(b);
            var a = b.getImage("game_star");
            a.touchEnabled = !1;
            a.visible = !1;
            a.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPlay, this);
            a = RES.getRes("fntyellow");
            this.lvTxt =
                new egret.BitmapText;
            this.lvTxt.font = a;
            this.lvTxt.text = "1";
            this.lvTxt.x = 200;
            this.lvTxt.y = 350;
            this.addChild(this.lvTxt);
            this.bgMask = b.getImage("mask_bg");
            this.bgMask.visible = !1;
            this.bgMask.x = -150;
            this.bgMask.width = 1200;
            this.bgMask.height = 800;
            this.bgMask.alpha = 0.6;
            this.bgMask.touchEnabled = !0
        };
        c.prototype.show = function() {
            var b = this;
            b.bgMask.visible = !0;
            this.x = -480;
            egret.Tween.get(this).to({
                x: 0
            }, 1E3, egret.Ease.backInOut).call(function() {
                setTimeout(function() {
                    b.onPlay()
                }, 2E3)
            })
        };
        c.prototype.onPlay = function(b) {
            Game.instance.gameScreen.gameStart();
            this.visible = !1
        };
        c.prototype.onSetData = function(b) {
            this.lv = b;
            this.lvTxt.text = this.lv + ""
        };
        return c
    }(egret.DisplayObjectContainer);
GameLevelPanel.prototype.__class__ = "GameLevelPanel";
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    GameResultPanel = function(b) {
        function c() {
            b.call(this);
            this.beatPer = this.score = 0;
            this.init()
        }
        __extends(c, b);
        c.prototype.init = function() {
            var b = App.swf.createSprite("spr_result");
            this.addChild(b);
            var a = b.getImage("mask_bg");
            a.width = 480;
            a.height = 800;
            a.alpha = 0.8;
            a.touchEnabled = !0;
            var a = b.getImage("btn_t"),
                c = b.getImage("btn_f");
            c.touchEnabled =
                a.touchEnabled = !0;
            c.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onFace, this);
            a.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onTwitter, this);
            this.btn_play = b.getImage("btn_play");
            this.btn_return = b.getImage("btn_return");
            this.btn_play.touchEnabled = this.btn_return.touchEnabled = !0;
            this.btn_play.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onPlay, this);
            this.btn_return.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onReturn, this);
            this.shareTxt = b.getTextField("txt_share");
            this.shareTxt._setSize(20);
            this.shareTxt.verticalAlign = egret.VerticalAlign.MIDDLE;
            this.shareTxt.textAlign = egret.HorizontalAlign.CENTER;
            this.shareTxt.text = "\u4f60\u6253\u8d25\u4e86\u5168\u4e16\u754c 99% \u7684\u5bf9\u624b\u3002\u72ec\u4e50\u4e50\u4e0d\u5982\u4f17\u4e50\u4e50\uff0c\u5206\u4eab\u7ed9\u4f60\u7684\u670b\u53cb\u5427\uff01";
            b = RES.getRes("fntwhite");
            this.lvTxt = new egret.BitmapText;
            this.lvTxt.font = b;
            this.lvTxt.text = "0";
            this.lvTxt.x = 123;
            this.lvTxt.y = 190;
            this.addChild(this.lvTxt);
            this.scoreTxt = new egret.BitmapText;
            this.scoreTxt.font = b;
            this.scoreTxt.text = "0";
            this.scoreTxt.x = 310;
            this.scoreTxt.y = this.lvTxt.y;
            this.addChild(this.scoreTxt)
        };
        c.prototype.onPlay = function(b) {
            this.visible = !1;
            Game.instance.gameScreen.showLevelPanel()
        };
        c.prototype.onReturn = function(b) {
            Game.instance.gameScreen.gameStart()
        };
        c.prototype.onFace = function(b) {
            this.beatPer = Math.min(99, Math.round(100 * Math.sqrt(this.score / 2E5)));
            console.log("face" + this.score, this.beatPer);
            App.ShareToFacebook(this.score, this.beatPer)
        };
        c.prototype.onTwitter = function(b) {
            this.beatPer = Math.min(99, Math.round(100 * Math.sqrt(this.score / 2E5)));
            console.log("twitter" +
                this.score, this.beatPer);
            App.ShareToTwitter(this.score, this.beatPer)
        };
        c.prototype.setData = function(b, a) {
            console.log("setdata", a);
            0 > a && (a = 0);
            this.score = a;
            window.score = a;
            this.btn_play.visible = !0;
            this.btn_return.visible = !1;
            this.visible = !0;
            this.beatPer = Math.min(99, Math.round(100 * Math.sqrt(this.score / 2E5)));
            this.shareTxt.text = "\u4f60\u6253\u8d25\u4e86\u5168\u4e16\u754c " + this.beatPer + "% \u7684\u5bf9\u624b\u3002\u72ec\u4e50\u4e50\u4e0d\u5982\u4f17\u4e50\u4e50\uff0c\u5206\u4eab\u7ed9\u4f60\u7684\u670b\u53cb\u5427\uff01";
            this.lvTxt.text = b + "";
            this.scoreTxt.text = this.score + ""
        };
        return c
    }(egret.DisplayObjectContainer);
GameResultPanel.prototype.__class__ = "GameResultPanel";
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    GameScorePanel = function(b) {
        function c() {
            b.call(this);
            this.lv = 1;
            this.score = 0;
            this.maxStep = this.step = 50;
            this.init()
        }
        __extends(c, b);
        c.prototype.init = function() {
            this.mc = App.swf.createMovie("mc_gamebg");
            this.addChild(this.mc);
            var b = RES.getRes("fntwhite");
            this.scoreTxt = new egret.BitmapText;
            this.scoreTxt.font = b;
            this.scoreTxt.text = this.score.toString();
            this.scoreTxt.x = 266;
            this.scoreTxt.y = -38;
            this.addChild(this.scoreTxt);
            this.lvTxt = new egret.BitmapText;
            this.lvTxt.font = b;
            this.lvTxt.text = this.lv.toString();
            this.lvTxt.x = 84;
            this.lvTxt.y = -38;
            this.addChild(this.lvTxt);
            b = this.mc.getImage("btn_help");
            b.touchEnabled = !0;
            b.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onHelp, this);
            b = this.mc.getImage("btn_list");
            b.touchEnabled = !0;
            b.addEventListener(egret.TouchEvent.TOUCH_TAP, this.onList, this);
            b = RES.getRes("fntsteps");
            this.stepTxt = new egret.BitmapText;
            this.stepTxt.font =
                b;
            this.stepTxt.text = this.step.toString();
            this.stepTxt.x = 230;
            this.stepTxt.y = 650;
            this.addChild(this.stepTxt);
            this.randomBg();
            this.setData(1, 0, 50, 50)
        };
        c.prototype.onList = function(b) {
            Game.instance.showSelectPanel()
        };
        c.prototype.onHelp = function(b) {
            console.log("help");
            Game.instance.gameScreen.showHelp()
        };
        c.prototype.setData = function(b, a, c, k) {
            this.lv = b;
            this.score = a;
            this.step = c;
            this.maxStep = k;
            this.lvTxt.text = this.lv.toString();
            this.scoreTxt.text = this.score.toString();
            this.stepTxt.text = this.step + "/" + this.maxStep
        };
        c.prototype.randomBg = function() {
            var b = Math.floor(3 * Math.random());
            this.mc.gotoAndStop(b)
        };
        return c
    }(egret.DisplayObjectContainer);
GameScorePanel.prototype.__class__ = "GameScorePanel";
var __extends = this.__extends || function(b, c) {
        function d() {
            this.constructor = b
        }
        for (var a in c) c.hasOwnProperty(a) && (b[a] = c[a]);
        d.prototype = c.prototype;
        b.prototype = new d
    },
    game1 = function(b) {
        function c() {
            b.call(this);
            this.positions1 = "2,3,5,1,4";
            this.bridges1 = "10,12,23,34,45,50,30,14,25";
            this.positions2 = "5,4,2,3,1";
            this.bridges2 = "10,20,40,50,15,23,34";
            this.positions3 = "3,4,5,1,2";
            this.bridges3 = "20,30,40,13,14,25,35";
            this.positions4 = "4,3,5,2,1";
            this.bridges4 = "30,10,50,15,14,25,24,23,34";
            this.positions5 = "5,4,2,1,3";
            this.bridges5 = "10,50,12,13,14,23,24,25,34,35,45";
            this.positions6 = "5,3,4,2,1";
            this.bridges6 = "10,12,14,15,23,24,25,34,45,50";
            this.positions7 = "4,5,1,2,3";
            this.bridges7 = "13,14,15,20,24,25,30,35,40";
            this.positions8 = "3,5,4,2,1";
            this.bridges8 = "10,12,15,23,24,34,30,45,50";
            this.positions9 = "4,5,1,2,3";
            this.bridges9 = "12,13,14,20,25,35,30,45,40";
            this.positions10 = "2,4,5,1,3";
            this.bridges10 = "10,12,23,24,30,34,45,50";
            this.positions11 = "3,4,2,5,1";
            this.bridges11 = "12,13,14,20,25,35,45,40";
            this.positions12 = "3,4,5,2,1";
            this.bridges12 = "10,12,13,20,23,31,34,35,45,40,50";
            this.positions13 = "3,5,4,1,2";
            this.bridges13 = "10,12,15,20,23,34,45,40,50";
            this.positions14 = "5,3,4,1,2";
            this.bridges14 = "10,12,13,23,30,34,35,45,50";
            this.positions15 = "3,5,2,1,4";
            this.bridges15 = "10,12,20,23,24,34,40,45,50";
            this.positions16 = "4,1,5,3,2";
            this.bridges16 = "10,13,20,23,34,35,40,50";
            this.positions17 = "5,4,2,3,1";
            this.bridges17 = "12,13,15,20,24,30,35,40,45";
            this.positions18 = "3,5,4,1,2";
            this.bridges18 = "10,12,13,15,20,23,24,34,35,40,45,50";
            this.positions19 =
                "4,3,2,5,1";
            this.bridges19 = "13,14,15,20,25,30,35,40";
            this.positions20 = "2,5,4,1,3";
            this.bridges20 = "10,12,14,23,25,34,45,50";
            this.positions21 = "2,4,1,5,3";
            this.bridges21 = "01,05,12,13,14,25,35,45";
            this.positions22 = "5,4,2,1,3";
            this.bridges22 = "01,03,05,12,15,23,34,45";
            this.positions23 = "2,3,4,5,1";
            this.bridges23 = "01,03,05,14,23,24,25,34";
            this.positions24 = "5,4,1,2,3";
            this.bridges24 = "01,02,04,05,12,13,35,45";
            this.positions25 = "4,3,5,1,2";
            this.bridges25 = "02,04,13,14,15,24,25,35";
            this.positions26 = "5,1,4,3,2";
            this.bridges26 = "01,02,03,04,05,12,23,34,45";
            this.positions27 = "4,3,5,2,1";
            this.bridges27 = "02,03,04,12,13,24,35,45";
            this.positions28 = "5,1,4,2,3";
            this.bridges28 = "01,03,05,14,15,23,25,34";
            this.positions29 = "3,1,2,5,4";
            this.bridges29 = "02,03,04,13,14,24,25,35";
            this.positions30 = "3,4,5,1,2";
            this.bridges30 = "01,05,14,15,23,24,25,34";
            this.positions31 = "3,5,2,1,4";
            this.bridges31 = "01,05,12,15,23,34,45";
            this.positions32 = "4,3,5,2,1";
            this.bridges32 = "01,03,05,12,23,34,45";
            this.positions33 = "5,4,3,2,1";
            this.bridges33 =
                "01,05,12,15,23,24,34,45";
            this.positions34 = "5,4,1,3,2";
            this.bridges34 = "02,03,04,12,13,15,35,45";
            this.positions35 = "5,4,2,3,1";
            this.bridges35 = "01,05,12,13,23,34,35,45";
            this.positions36 = "2,3,4,5,1";
            this.bridges36 = "02,04,12,13,15,24,35,45";
            this.positions37 = "3,4,2,5,1";
            this.bridges37 = "01,03,05,14,23,25,34";
            this.positions38 = "4,3,5,2,1";
            this.bridges38 = "01,05,12,23,24,34,45";
            this.positions39 = "3,4,5,1,2";
            this.bridges39 = "01,05,13,14,24,25,35";
            this.positions40 = "5,3,2,1,4";
            this.bridges40 = "01,05,14,15,23,25,34";
            this.totalBoards = 40;
            this.score = this.currentBoard = this.maxMoves = this.boaedScore = this.boardScore = this.stoppedRotatingCars = this.totalCorrects = this.moves = this.freeParking = this.parkingNum = this.yyDistance = this.xxDistance = this.yStartDistance = this.xStartDistance = 0;
            this.animation = !1;
            this.carToMove = 0;
            this.init()
        }
        __extends(c, b);
        c.prototype.init = function() {
            this.carArrMC = [];
            this.parkingArrMC = [];
            this.bridgeArrMC = [];
            this.bridgesArray = [];
            this.carOnParking = [];
            this.gameScorePanel = new GameScorePanel;
            this.addChild(this.gameScorePanel);
            this.gameScreen = App.swf.createSprite("spr_parking");
            this.gameScreen.x = -15;
            this.gameScreen.y = 115;
            this.addChild(this.gameScreen);
            this.gameLevelPanel = new GameLevelPanel;
            this.addChild(this.gameLevelPanel);
            this.gameLevelPanel.visible = !1;
            this.gameResultPanel = new GameResultPanel;
            this.addChild(this.gameResultPanel);
            this.gameResultPanel.visible = !1;
            this.gameHelpPanel = new GameHelpPanel;
            this.addChild(this.gameHelpPanel);
            this.gameHelpPanel.visible = !1;
            for (var b = 0, b = 0; 6 > b; b++) {
                if (0 < b) {
                    var a = this.gameScreen.getMovie("car" +
                        b);
                    a.stop();
                    this.carArrMC.push(a)
                }
                a = this.gameScreen.getMovie("parking" + b);
                a.stop();
                a.getChildByName("btn").touchEnabled = !0;
                a.getChildByName("btn").addEventListener(egret.TouchEvent.TOUCH_TAP, this.onBtnClick, this);
                this.parkingArrMC.push(a)
            }
            b = this.gameScreen.getMovie("parking0");
            a = RES.getRes("fntParking");
            this.parkingNo = new egret.BitmapText;
            this.parkingNo.font = a;
            this.parkingNo.text = "1";
            this.parkingNo.x = 10;
            this.parkingNo.y = -30;
            b.getSprite("level").addChild(this.parkingNo);
            for (b = 0; 5 >= b;) {
                for (a = b + 1; 5 >=
                    a;) {
                    var c = this.gameScreen.getMovie("bridge" + b + a);
                    this.bridgeArrMC.push(c);
                    c.stop();
                    ++a
                }++b
            }
            this.gameInit()
        };
        c.prototype.showHelp = function() {
            this.gameHelpPanel.visible = !0
        };
        c.prototype.onBtnClick = function(b) {
            this.crossBridge(b.target.parent.name.substr(-1))
        };
        c.prototype.showLevelPanel = function() {
            this.gameLevelPanel.visible = !0;
            this.gameLevelPanel.show()
        };
        c.prototype.gameInit = function() {
            for (var b = 1; 5 >= b;) this.parkingArrMC[b].gotoAndStop(b - 1), this.carArrMC[b - 1].gotoAndStop(b - 1), this.gameScreen.setChildIndex(this.carArrMC[b -
                1], 500 + b), ++b;
            this.parkingArrMC[0].gotoAndStop(5);
            this.currentBoard = 1;
            this.score = 0;
            this.maxMoves = 50;
            this.gameScorePanel.setData(this.currentBoard, this.score, this.moves, this.maxMoves);
            this.animation = !0;
            this.gameLevelPanel.onSetData(this.currentBoard)
        };
        c.prototype.gameStart = function() {
            this.prepareBoard(this.currentBoard)
        };
        c.prototype.selectStart = function(b) {
            this.currentBoard = b;
            this.gameLevelPanel.onSetData(this.currentBoard);
            this.showLevelPanel();
            this.prepareBoard(this.currentBoard)
        };
        c.prototype.prepareBoard =
            function(b, a) {
                void 0 === a && (a = !0);
                this.gameScorePanel.setData(this.currentBoard, this.score, this.moves, this.maxMoves);
                this.gameScorePanel.randomBg();
                for (var c = 0; 5 >= c;) {
                    for (var k = c + 1; 5 >= k;) this.gameScreen.getChildByName("bridge" + c + k)._visible = !1, ++k;
                    ++c
                }
                this.bridgesArray = this["bridges" + b].split(",");
                for (c = 0; c < this.bridgesArray.length;) this.bridgesArray[c].substr(0, 1) > this.bridgesArray[c].substr(1, 1) && (this.bridgesArray[c] = this.bridgesArray[c].substr(1, 1) + this.bridgesArray[c].substr(0, 1)), this.gameScreen.getChildByName("bridge" +
                    this.bridgesArray[c])._visible = !0, this.gameScreen.setChildIndex(this.gameScreen.getChildByName("bridge" + this.bridgesArray[c]), 1E3 + 100 * c), ++c;
                this.positionsArray = this["positions" + b].split(",");
                this.carOnParking = [];
                for (c = 1; 5 >= c;) this.carArrMC[this.positionsArray[c - 1] - 1]._x = this.parkingArrMC[c]._x, this.carArrMC[this.positionsArray[c - 1] - 1]._y = this.parkingArrMC[c]._y, this.carOnParking[c] = this.positionsArray[c - 1], ++c;
                !0 == a && (this.moves = 0, this.gameScorePanel.setData(this.currentBoard, this.score, this.moves,
                    this.maxMoves));
                this.parkingNo.text = b + "";
                this.freeParking = 0;
                this.checkPositions();
                this.rotateAllConnectedCars()
            };
        c.prototype.checkPositions = function() {
            this.totalCorrects = 0;
            for (var b = 1; 5 >= b;) this.carOnParking[b] == b ? (this.parkingArrMC[b].getChildByName("correctCar")._visible = !0, ++this.totalCorrects) : this.parkingArrMC[b].getChildByName("correctCar")._visible = !1, ++b;
            this.parkingArrMC[0].getChildByName("correctCar")._visible = !1;
            5 == this.totalCorrects && this.BoardFinished()
        };
        c.prototype.crossBridge = function(b) {
            this.parkingNum =
                b;
            this.carToMove = this.carOnParking[this.parkingNum];
            b = "";
            this.curCar = this.gameScreen.getChildByName("car" + this.carToMove);
            this.curParking = this.gameScreen.getChildByName("parking" + this.freeParking);
            this.animation ? (this.buttonsBlocked(!0), b = this.parkingNum > this.freeParking ? this.freeParking.toString() + this.parkingNum : this.parkingNum.toString() + this.freeParking, b = this.gameScreen.getMovie("bridge" + b), this.curCar.parent.setChildIndex(this.curCar, b.parent.getChildIndex(b) + 1), this.rotateCarToFree(this.curCar),
                this.gas = this.curCar.getMovie("gas"), this.gas.play(), this.gas.addEventListener(egret.Event.ENTER_FRAME, this.gasPlay, this), this.xStartDistance = this.curParking._x - this.curCar._x, this.yStartDistance = this.curParking._y - this.curCar._y, this.curCar.addEventListener(egret.Event.ENTER_FRAME, this.CaronEnterFrame, this)) : (this.curCar._x = this.curParking._x, this.curCar._y = this.curParking._y, this.carOnParking[this.parkingNum] = 0, this.carOnParking[this.freeParking] = this.carToMove, this.freeParking = this.parkingNum,
                ++this.moves, this.gameScorePanel.setData(this.currentBoard, this.score, this.moves, this.maxMoves), this.checkPositions(), this.stoppedRotatingCars = 0, this.rotateAllConnectedCars())
        };
        c.prototype.gasPlay = function() {
            this.gas.getCurrentFrame() >= this.gas.totalFrames() && (this.gas.gotoAndStop(0), this.gas.removeEventListener(egret.Event.ENTER_FRAME, this.gasPlay, this))
        };
        c.prototype.CaronEnterFrame = function() {
            this.xxDistance = this.curParking._x - this.curCar._x;
            this.yyDistance = this.curParking._y - this.curCar._y;
            this.curCar._x +=
                this.xStartDistance / 30;
            this.curCar._y += this.yStartDistance / 30;
            5 > Math.abs(this.xxDistance) && 5 > Math.abs(this.yyDistance) && (this.curCar._x = this.curParking._x, this.curCar._y = this.curParking._y, this.carOnParking[this.parkingNum] = 0, this.carOnParking[this.freeParking] = this.carToMove, this.freeParking = this.parkingNum, ++this.moves, this.gameScorePanel.setData(this.currentBoard, this.score, this.moves, this.maxMoves), this.checkPositions(), this.stoppedRotatingCars = 0, this.rotateAllConnectedCars(), this.curCar.removeEventListener(egret.Event.ENTER_FRAME,
                this.CaronEnterFrame, this))
        };
        c.prototype.rotateAllConnectedCars = function() {
            for (var b = 0; 5 >= b;) {
                if (this.connectionExists(b.toString() + this.freeParking)) {
                    var a = this.gameScreen.getChildByName("car" + this.carOnParking[b]);
                    this.rotateCarToFree(a)
                } else this.carStoppedRotating();
                ++b
            }
        };
        c.prototype.connectionExists = function(b) {
            b.substr(0, 1) > b.substr(1, 1) && (b = b.substr(1, 1) + b.substr(0, 1));
            for (var a = 0; a < this.bridgesArray.length;) {
                if (b == this.bridgesArray[a]) return !0;
                ++a
            }
            return !1
        };
        c.prototype.carStoppedRotating =
            function() {
                ++this.stoppedRotatingCars;
                if (6 == this.stoppedRotatingCars) {
                    this.buttonsBlocked(!1);
                    for (var b = this.stoppedRotatingCars = 0; 5 >= b;) {
                        var a = this.gameScreen.getChildByName("parking" + b);
                        a.getChildByName("btn").alpha = 0;
                        this.connectionExists(b.toString() + this.freeParking) ? a.getChildByName("btn")._visible = !0 : a.getChildByName("btn")._visible = !1;
                        ++b
                    }
                }
            };
        c.prototype.buttonsBlocked = function(b) {
            for (var a = 0; 5 >= a;) {
                var c = this.gameScreen.getChildByName("parking" + a);
                c.getChildByName("btn").alpha = 0;
                c.getChildByName("btn")._visible = !b;
                ++a
            }
        };
        c.prototype.BoardFinished = function() {
            this.boardScore = 10 * (this.maxMoves - this.moves);
            0 > this.boardScore && (this.boaedScore = 0);
            this.addScore(this.boardScore);
            ++this.currentBoard;
            this.gameScorePanel.setData(this.currentBoard, this.score, this.moves, this.maxMoves);
            this.gameLevelPanel.onSetData(this.currentBoard)
        };
        c.prototype.addScore = function(b) {
            console.log("?\u5206\u6570", b);
            this.score += b;
            this.gameResultPanel.setData(this.currentBoard, this.score);
            b = xht.getStorageData(Game.HIGHT_LV);
            (b ? parseInt(b) :
                1) <= this.currentBoard && xht.saveStorageData(Game.HIGHT_LV, this.currentBoard + "")
        };
        c.prototype.thousandsDot = function(b) {
            var a = b.toString(),
                c = "",
                k = "";
            1E3 < b && (c = a.substr(-3), k = a.substring(0, a.length - 3), a = k + "." + c);
            return a
        };
        c.prototype.rotateCarToFree = function(b) {
            function a() {
                var c = k - b._rotation;
                if (10 < Math.abs(c))
                    if (0 < c && 180 > c || -360 < c && -180 > c) {
                        if (b._rotation += 10, -359 >= c || 359 <= c) b._rotation = k, this.carStoppedRotating(), b.removeEventListener(egret.Event.ENTER_FRAME, a, this)
                    } else {
                        if (b._rotation -= 10, 359 <= c ||
                            -359 >= c) b._rotation = k, this.carStoppedRotating(), b.removeEventListener(egret.Event.ENTER_FRAME, a, this)
                    } else b._rotation = k, this.carStoppedRotating(), b.removeEventListener(egret.Event.ENTER_FRAME, a, this)
            }
            var c = this.gameScreen.getChildByName("parking" + this.freeParking),
                k = 180 * Math.atan2(c._y - b._y, c._x - b._x) / 3.141593;
            b.addEventListener(egret.Event.ENTER_FRAME, a, this)
        };
        return c
    }(egret.DisplayObjectContainer);
game1.prototype.__class__ = "game1";
(function(b) {
    var c = function() {
        function b() {
            this._sheets = {};
            this._textures = {}
        }
        b.prototype.addSpriteSheet = function(a, b) {
            this._sheets[a] = b
        };
        b.prototype.addTexture = function(a, b) {
            this._textures[a] = b
        };
        b.prototype.createBitmap = function(a) {
            var b, c;
            for (c in this._sheets)
                if (b = this._sheets[c], b = b.getTexture(a), null != b) break;
            null == b && (b = this._textures[a]);
            if (null == b) return null;
            a = new egret.Bitmap;
            a.texture = b;
            return a
        };
        return b
    }();
    b.SwfAssetManager = c;
    c.prototype.__class__ = "starlingswf.SwfAssetManager"
})(starlingswf ||
    (starlingswf = {}));
(function(b) {
    var c = function() {
        function b() {}
        b.createSwfUpdateManager = function(a) {
            var c = new b;
            c._animations = [];
            c._addQueue = [];
            c._removeQueue = [];
            c._currentTime = 0;
            c.setFps(a);
            egret.Ticker.getInstance().register(c.update, c);
            return c
        };
        b.prototype.setFps = function(a) {
            this._fps = a;
            this._fpsTime = 1E3 / a
        };
        b.prototype.addSwfAnimation = function(a) {
            this._addQueue.push(a)
        };
        b.prototype.removeSwfAnimation = function(a) {
            this._removeQueue.push(a)
        };
        b.prototype.updateAdd = function() {
            for (var a = this._addQueue.length, b, c, d = 0; d <
                a; d++) c = this._addQueue.pop(), b = this._animations.indexOf(c), -1 == b && this._animations.push(c)
        };
        b.prototype.updateRemove = function() {
            for (var a = this._removeQueue.length, b, c = 0; c < a; c++) b = this._removeQueue.pop(), b = this._animations.indexOf(b), -1 != b && this._animations.splice(b, 1)
        };
        b.prototype.update = function(a) {
            this._currentTime += a;
            if (!(this._currentTime < this._fpsTime)) {
                this._currentTime -= this._fpsTime;
                this._currentTime > this._fpsTime && (this._currentTime = 0);
                this.updateRemove();
                this.updateAdd();
                a = this._animations.length;
                for (var b = 0; b < a; b++) this._animations[b].update()
            }
        };
        return b
    }();
    b.SwfUpdateManager = c;
    c.prototype.__class__ = "starlingswf.SwfUpdateManager"
})(starlingswf || (starlingswf = {}));