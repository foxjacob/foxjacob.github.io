/**
 * @license jCanvas v14.12.11
 * Copyright 2014 Caleb Evans
 * Released under the MIT license
 */
!function($,e,t,r,n,a,o,i,s,l){function h(e){var t=this,r;for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function c(){mt(this,c.baseDefaults)}function g(e){return"string"===xt(e)}function f(e){return!isNaN(a(e))}function u(e){return e&&e.getContext?e.getContext("2d"):s}function d(e){var t,r,n;for(t in e)e.hasOwnProperty(t)&&(n=e[t],r=xt(n),"string"===r&&f(n)&&"text"!==t&&(e[t]=a(n)));void 0!==e.text&&(e.text=String(e.text))}function y(e){return e=mt({},e),e.masks=e.masks.slice(0),e}function v(e,t){var r;e.save(),r=y(t.transforms),t.savedTransforms.push(r)}function p(e,t){0===t.savedTransforms.length?t.transforms=y(zt):(e.restore(),t.transforms=t.savedTransforms.pop())}function m(e,t,r,n){r[n]&&(t[n]=bt(r[n])?r[n].call(e,r):r[n])}function w(e,t,r){m(e,t,r,"fillStyle"),m(e,t,r,"strokeStyle"),t.lineWidth=r.strokeWidth,r.rounded?t.lineCap=t.lineJoin="round":(t.lineCap=r.strokeCap,t.lineJoin=r.strokeJoin,t.miterLimit=r.miterLimit),r.strokeDash||(r.strokeDash=[]),t.setLineDash&&t.setLineDash(r.strokeDash),t.webkitLineDash=t.mozDash=r.strokeDash,t.lineDashOffset=t.webkitLineDashOffset=t.mozDashOffset=r.strokeDashOffset,t.shadowOffsetX=r.shadowX,t.shadowOffsetY=r.shadowY,t.shadowBlur=r.shadowBlur,t.shadowColor=r.shadowColor,t.globalAlpha=r.opacity,t.globalCompositeOperation=r.compositing,r.imageSmoothing&&(t.webkitImageSmoothingEnabled=t.mozImageSmoothingEnabled=r.imageSmoothingEnabled)}function x(e,t,r){r.mask&&(r.autosave&&v(e,t),e.clip(),t.transforms.masks.push(r._args))}function b(e,t){t._transformed&&e.restore()}function _(e,t,r){var n;r.closed&&t.closePath(),r.shadowStroke&&0!==r.strokeWidth?(t.stroke(),t.fill(),t.shadowColor="transparent",t.shadowBlur=0,t.stroke()):(t.fill(),"transparent"!==r.fillStyle&&(t.shadowColor="transparent"),0!==r.strokeWidth&&t.stroke()),r.closed||t.closePath(),b(t,r),r.mask&&(n=k(e),x(t,n,r))}function L(e,t,r,n,a){r._toRad=r.inDegrees?Lt/180:1,r._transformed=o,t.save(),r.fromCenter||r._centered||n===l||(a===l&&(a=n),r.x+=n/2,r.y+=a/2,r._centered=o),r.rotate&&K(t,r,s),(1!==r.scale||1!==r.scaleX||1!==r.scaleY)&&Z(t,r,s),(r.translate||r.translateX||r.translateY)&&et(t,r,s)}function k(e){var t=Ot.dataCache,r;return t._canvas===e&&t._data?r=t._data:(r=$.data(e,"jCanvas"),r||(r={canvas:e,layers:[],layer:{names:{},groups:{}},eventHooks:{},intersecting:[],lastIntersected:s,cursor:$(e).css("cursor"),drag:{layer:s,dragging:i},event:{type:s,x:s,y:s},events:{},transforms:y(zt),savedTransforms:[],animating:i,animated:s,pixelRatio:1,scaled:i},$.data(e,"jCanvas",r)),t._canvas=e,t._data=r),r}function C(e,t,r){var n;for(n in Wt.events)Wt.events.hasOwnProperty(n)&&(r[n]||r.cursors&&r.cursors[n])&&S(e,t,r,n);t.events.mouseout||(e.bind("mouseout.jCanvas",function(){var r=t.drag.layer,n;for(r&&(t.drag={},A(e,t,r,"dragcancel")),n=0;n<t.layers.length;n+=1)r=t.layers[n],r._hovered&&e.triggerLayerEvent(t.layers[n],"mouseout");e.drawLayers()}),t.events.mouseout=o)}function S(e,t,r,n){Wt.events[n](e,t),r._event=o}function T(e,t,r){var n,a,i;if(r.draggable||r.cursors){for(n=["mousedown","mousemove","mouseup"],i=0;i<n.length;i+=1)a=n[i],S(e,t,r,a);r._event=o}}function P(e,t,r,n){var a=t.layer.names;n?n.name!==l&&g(r.name)&&r.name!==n.name&&delete a[r.name]:n=r,g(n.name)&&(a[n.name]=r)}function R(e,t,r,n){var a=t.layer.groups,o,i,h,c,g;if(n){if(n.groups!==l&&r.groups!==s)for(h=0;h<r.groups.length;h+=1)if(i=r.groups[h],o=a[i]){for(g=0;g<o.length;g+=1)if(o[g]===r){c=g,o.splice(g,1);break}0===o.length&&delete a[i]}}else n=r;if(n.groups!==l&&n.groups!==s)for(h=0;h<n.groups.length;h+=1)i=n.groups[h],o=a[i],o||(o=a[i]=[],o.name=i),c===l&&(c=o.length),o.splice(c,0,r)}function X(e){var t,r,n,a;for(t=s,r=e.intersecting.length-1;r>=0;r-=1)if(t=e.intersecting[r],t._masks){for(a=t._masks.length-1;a>=0;a-=1)if(n=t._masks[a],!n.intersects){t.intersects=i;break}if(t.intersects&&!t.intangible)break}return t&&t.intangible&&(t=s),t}function Y(e,t,r,n){r&&r.visible&&r._method&&(r._next=n?n:s,r._method.call(e,r))}function O(e,t,r){var n,a,s,l,h,c,g,f,u,d;if(l=t.drag,a=l.layer,h=a&&a.dragGroups||[],n=t.layers,"mousemove"===r||"touchmove"===r){if(l.dragging||(l.dragging=o,a.dragging=o,a.bringToFront&&(n.splice(a.index,1),a.index=n.push(a)),a._startX=a.x,a._startY=a.y,a._endX=a._eventX,a._endY=a._eventY,A(e,t,a,"dragstart")),l.dragging)for(u=a._eventX-(a._endX-a._startX),d=a._eventY-(a._endY-a._startY),a.dx=u-a.x,a.dy=d-a.y,a.x=u,a.y=d,A(e,t,a,"drag"),f=0;f<h.length;f+=1)if(g=h[f],c=t.layer.groups[g],a.groups&&c)for(s=0;s<c.length;s+=1)c[s]!==a&&(c[s].x+=a.dx,c[s].y+=a.dy)}else("mouseup"===r||"touchend"===r)&&(l.dragging&&(a.dragging=i,l.dragging=i,A(e,t,a,"dragstop")),t.drag={})}function z(e,t,r){var n;t.cursors&&(n=t.cursors[r]),-1!==$.inArray(n,Dt.cursors)&&(n=Dt.prefix+n),n&&e.css({cursor:n})}function D(e,t){e.css({cursor:t.cursor})}function H(e,t,r,n,a){n[r]&&t._running&&!t._running[r]&&(t._running[r]=o,n[r].call(e[0],t,a),t._running[r]=i)}function W(e,t){return!(e.disableEvents||e.intangible&&-1!==$.inArray(t,Ht))}function A(e,t,r,n,a){W(r,n)&&("mouseout"!==n&&z(e,r,n),H(e,r,n,r,a),H(e,r,n,t.eventHooks,a),H(e,r,n,Wt.eventHooks,a))}function j(e,t,r,n){var a,i,c,f=t._layer?r:t;return t._args=r,(t.draggable||t.dragGroups)&&(t.layer=o,t.draggable=o),t._method=n?n:t.method?$.fn[t.method]:t.type?$.fn[Yt.drawings[t.type]]:function(){},t.layer&&!t._layer?(a=$(e),i=k(e),c=i.layers,(f.name===s||g(f.name)&&i.layer.names[f.name]===l)&&(d(t),f=new h(t),f.canvas=e,f.layer=o,f._layer=o,f._running={},f.data=f.data!==s?mt({},f.data):{},f.groups=f.groups!==s?f.groups.slice(0):[],P(a,i,f),R(a,i,f),C(a,i,f),T(a,i,f),t._event=f._event,f._method===$.fn.drawText&&a.measureText(f),f.index===s&&(f.index=c.length),c.splice(f.index,0,f),t._args=f,A(a,i,f,"add"))):t.layer||d(t),f}function E(e){var t,r;for(r=0;r<Dt.props.length;r+=1)t=Dt.props[r],e[t]=e["_"+t]}function G(e,t){var r,n;for(n=0;n<Dt.props.length;n+=1)r=Dt.props[n],e[r]!==l&&(e["_"+r]=e[r],Dt.propsObj[r]=o,t&&delete e[r])}function I(e,t,r){var n,a,o,i;for(n in r)if(r.hasOwnProperty(n)&&(a=r[n],bt(a)&&(r[n]=a.call(e,t,n)),"object"===xt(a)&&_t(a))){for(o in a)a.hasOwnProperty(o)&&(i=a[o],t[n]!==l&&(t[n+"."+o]=t[n][o],r[n+"."+o]=i));delete r[n]}return r}function F(e){var t;for(t in e)e.hasOwnProperty(t)&&-1!==t.indexOf(".")&&delete e[t]}function B(t){var r,n,o=[],i=1;return t.match(/^([a-z]+|#[0-9a-f]+)$/gi)&&("transparent"===t&&(t="rgba(0, 0, 0, 0)"),n=e.head,r=n.style.color,n.style.color=t,t=$.css(n,"color"),n.style.color=r),t.match(/^rgb/gi)&&(o=t.match(/(\d+(\.\d+)?)/gi),t.match(/%/gi)&&(i=2.55),o[0]*=i,o[1]*=i,o[2]*=i,o[3]=o[3]!==l?a(o[3]):1),o}function N(e){var t=3,r;for("array"!==xt(e.start)&&(e.start=B(e.start),e.end=B(e.end)),e.now=[],(1!==e.start[3]||1!==e.end[3])&&(t=4),r=0;t>r;r+=1)e.now[r]=e.start[r]+(e.end[r]-e.start[r])*e.pos,3>r&&(e.now[r]=kt(e.now[r]));1!==e.start[3]||1!==e.end[3]?e.now="rgba( "+e.now.join(",")+" )":(e.now.slice(0,3),e.now="rgb( "+e.now.join(",")+" )"),e.elem.nodeName?e.elem.style[e.prop]=e.now:e.elem[e.prop]=e.now}function J(e){var t;for(t=0;t<e.length;t+=1)$.fx.step[e[t]]=N}function q(e){return Yt.touchEvents[e]&&(e=Yt.touchEvents[e]),e}function Q(e){return Yt.mouseEvents[e]&&(e=Yt.mouseEvents[e]),e}function U(e){Wt.events[e]=function(t,r){function n(e){s.x=e.offsetX,s.y=e.offsetY,s.type=a,s.event=e,t.drawLayers({resetFire:o}),e.preventDefault()}var a,i,s;s=r.event,a="mouseover"===e||"mouseout"===e?"mousemove":e,i=q(a),r.events[a]||(i!==a?t.bind(a+".jCanvas "+i+".jCanvas",n):t.bind(a+".jCanvas",n),r.events[a]=o)}}function V(e){var t;for(t=0;t<e.length;t+=1)U(e[t])}function M(e,t,r){var n,a,o,i,l,h,c,g;n=r._args,n&&(a=k(e),o=a.event,o.x!==s&&o.y!==s&&(h=o.x*a.pixelRatio,c=o.y*a.pixelRatio,i=t.isPointInPath(h,c)||t.isPointInStroke&&t.isPointInStroke(h,c)),l=a.transforms,n.eventX=o.x,n.eventY=o.y,n.event=o.event,g=a.transforms.rotate,h=n.eventX,c=n.eventY,0!==g?(n._eventX=h*Tt(-g)-c*St(-g),n._eventY=c*Tt(-g)+h*St(-g)):(n._eventX=h,n._eventY=c),n._eventX/=l.scaleX,n._eventY/=l.scaleY,i&&a.intersecting.push(n),n.intersects=!!i)}function K(e,t,r){t._toRad=t.inDegrees?Lt/180:1,e.translate(t.x,t.y),e.rotate(t.rotate*t._toRad),e.translate(-t.x,-t.y),r&&(r.rotate+=t.rotate*t._toRad)}function Z(e,t,r){1!==t.scale&&(t.scaleX=t.scaleY=t.scale),e.translate(t.x,t.y),e.scale(t.scaleX,t.scaleY),e.translate(-t.x,-t.y),r&&(r.scaleX*=t.scaleX,r.scaleY*=t.scaleY)}function et(e,t,r){t.translate&&(t.translateX=t.translateY=t.translate),e.translate(t.translateX,t.translateY),r&&(r.translateX+=t.translateX,r.translateY+=t.translateY)}function tt(e){for(;0>e;)e+=2*Lt;return e}function rt(e,t){return e.x+e.radius*Tt(t)}function nt(e,t){return e.y+e.radius*St(t)}function at(e,t,r,n){var a,o,i,s,l,h,c,g,f,u,d;r===n?(f=0,u=0):(f=r.x,u=r.y),n.inDegrees||360!==n.end||(n.end=2*Lt),n.start*=r._toRad,n.end*=r._toRad,n.start-=Lt/2,n.end-=Lt/2,d=Lt/180,n.ccw&&(d*=-1),a=rt(n,n.start+d),o=nt(n,n.start+d),i=rt(n,n.start),s=nt(n,n.start),it(e,t,r,n,a,o,i,s),t.arc(n.x+f,n.y+u,n.radius,n.start,n.end,n.ccw),l=rt(n,n.end+d),h=nt(n,n.end+d),c=rt(n,n.end),g=nt(n,n.end),st(e,t,r,n,c,g,l,h)}function ot(e,t,r,n,a,o,i,s){var l,h,c,g,f,u,d;n.arrowRadius&&!r.closed&&(d=Pt(s-o,i-a),d-=Lt,f=r.strokeWidth*Tt(d),u=r.strokeWidth*St(d),l=i+n.arrowRadius*Tt(d+n.arrowAngle/2),h=s+n.arrowRadius*St(d+n.arrowAngle/2),c=i+n.arrowRadius*Tt(d-n.arrowAngle/2),g=s+n.arrowRadius*St(d-n.arrowAngle/2),t.moveTo(l-f,h-u),t.lineTo(i-f,s-u),t.lineTo(c-f,g-u),t.moveTo(i-f,s-u),t.lineTo(i+f,s+u),t.moveTo(i,s))}function it(e,t,r,n,a,i,s,l){n._arrowAngleConverted||(n.arrowAngle*=r._toRad,n._arrowAngleConverted=o),n.startArrow&&ot(e,t,r,n,a,i,s,l)}function st(e,t,r,n,a,i,s,l){n._arrowAngleConverted||(n.arrowAngle*=r._toRad,n._arrowAngleConverted=o),n.endArrow&&ot(e,t,r,n,a,i,s,l)}function lt(e,t,r,n){var a,i,s;for(a=2,it(e,t,r,n,n.x2+r.x,n.y2+r.y,n.x1+r.x,n.y1+r.y),n.x1!==l&&n.y1!==l&&t.moveTo(n.x1+r.x,n.y1+r.y);o&&(i=n["x"+a],s=n["y"+a],i!==l&&s!==l);)t.lineTo(i+r.x,s+r.y),a+=1;a-=1,st(e,t,r,n,n["x"+(a-1)]+r.x,n["y"+(a-1)]+r.y,n["x"+a]+r.x,n["y"+a]+r.y)}function ht(e,t,r,n){var a,i,s,h,c;for(a=2,it(e,t,r,n,n.cx1+r.x,n.cy1+r.y,n.x1+r.x,n.y1+r.y),n.x1!==l&&n.y1!==l&&t.moveTo(n.x1+r.x,n.y1+r.y);o&&(i=n["x"+a],s=n["y"+a],h=n["cx"+(a-1)],c=n["cy"+(a-1)],i!==l&&s!==l&&h!==l&&c!==l);)t.quadraticCurveTo(h+r.x,c+r.y,i+r.x,s+r.y),a+=1;a-=1,st(e,t,r,n,n["cx"+(a-1)]+r.x,n["cy"+(a-1)]+r.y,n["x"+a]+r.x,n["y"+a]+r.y)}function ct(e,t,r,n){var a,i,s,h,c,g,f,u;for(a=2,i=1,it(e,t,r,n,n.cx1+r.x,n.cy1+r.y,n.x1+r.x,n.y1+r.y),n.x1!==l&&n.y1!==l&&t.moveTo(n.x1+r.x,n.y1+r.y);o&&(s=n["x"+a],h=n["y"+a],c=n["cx"+i],g=n["cy"+i],f=n["cx"+(i+1)],u=n["cy"+(i+1)],s!==l&&h!==l&&c!==l&&g!==l&&f!==l&&u!==l);)t.bezierCurveTo(c+r.x,g+r.y,f+r.x,u+r.y,s+r.x,h+r.y),a+=1,i+=2;a-=1,i-=2,st(e,t,r,n,n["cx"+(i+1)]+r.x,n["cy"+(i+1)]+r.y,n["x"+a]+r.x,n["y"+a]+r.y)}function gt(e,t,r){return t*=e._toRad,t-=Lt/2,r*Tt(t)}function ft(e,t,r){return t*=e._toRad,t-=Lt/2,r*St(t)}function ut(e,t,r,n){var a,i,s,h,c,g,f,u,d,y,v,p,m;for(r===n?(h=0,c=0):(h=r.x,c=r.y),a=1,g=u=y=p=n.x+h,f=d=v=m=n.y+c,it(e,t,r,n,g+gt(r,n.a1,n.l1),f+ft(r,n.a1,n.l1),g,f),n.x!==l&&n.y!==l&&t.moveTo(g,f);o&&(i=n["a"+a],s=n["l"+a],i!==l&&s!==l);)y=p,v=m,p+=gt(r,i,s),m+=ft(r,i,s),1===a&&(u=p,d=m),t.lineTo(p,m),a+=1;st(e,t,r,n,y,v,p,m)}function dt(e,t,r){isNaN(Number(r.fontSize))||(r.fontSize+="px"),t.font=r.fontStyle+" "+r.fontSize+" "+r.fontFamily}function yt(e,t,r,n){var o,i,s,l=Ot.propCache;if(l.text===r.text&&l.fontStyle===r.fontStyle&&l.fontSize===r.fontSize&&l.fontFamily===r.fontFamily&&l.maxWidth===r.maxWidth&&l.lineHeight===r.lineHeight)r.width=l.width,r.height=l.height;else{for(r.width=t.measureText(n[0]).width,s=1;s<n.length;s+=1)i=t.measureText(n[s]).width,i>r.width&&(r.width=i);o=e.style.fontSize,e.style.fontSize=r.fontSize,r.height=a($.css(e,"fontSize"))*n.length*r.lineHeight,e.style.fontSize=o}}function vt(e,t){var r=t.text,n=t.maxWidth,a=r.split("\n"),o=[],i,s,l,h,c,g;for(l=0;l<a.length;l+=1){if(h=a[l],c=h.split(" "),i=[],s="",1===c.length||e.measureText(h).width<n)i=[h];else{for(g=0;g<c.length;g+=1)e.measureText(s+c[g]).width>n&&(""!==s&&i.push(s),s=""),s+=c[g],g!==c.length-1&&(s+=" ");i.push(s)}o=o.concat(i.join("\n").replace(/( (\n))|( $)/gi,"$2").split("\n"))}return o}var pt,mt=$.extend,wt=$.inArray,xt=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},bt=$.isFunction,_t=$.isPlainObject,Lt=n.PI,kt=n.round,Ct=n.abs,St=n.sin,Tt=n.cos,Pt=n.atan2,Rt=r.prototype.slice,Xt=$.event.fix,Yt={},Ot={dataCache:{},propCache:{},imageCache:{}},zt={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},Dt={},Ht=["mousedown","mousemove","mouseup","mouseover","mouseout","touchstart","touchmove","touchend"],Wt={events:{},eventHooks:{},future:{}};c.baseDefaults={align:"center",arrowAngle:90,arrowRadius:0,autosave:o,baseline:"middle",bringToFront:i,ccw:i,closed:i,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:o,crossOrigin:s,cursors:s,disableEvents:i,draggable:i,dragGroups:s,groups:s,data:s,dx:s,dy:s,end:360,eventX:s,eventY:s,fillStyle:"transparent",fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:o,height:s,imageSmoothing:o,inDegrees:o,intangible:i,index:s,letterSpacing:s,lineHeight:1,layer:i,mask:i,maxWidth:s,miterLimit:10,name:s,opacity:1,r1:s,r2:s,radius:0,repeat:"repeat",respectAlign:i,rotate:0,rounded:i,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowStroke:i,shadowX:0,shadowY:0,sHeight:s,sides:0,source:"",spread:0,start:0,strokeCap:"butt",strokeDash:s,strokeDashOffset:0,strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:s,sx:s,sy:s,text:"",translate:0,translateX:0,translateY:0,type:s,visible:o,width:s,x:0,y:0},pt=new c,h.prototype=pt,Wt.extend=function At(e){return e.name&&(e.props&&mt(pt,e.props),$.fn[e.name]=function t(r){var n=this,a,o,i,s,l;for(o=0;o<n.length;o+=1)a=n[o],i=u(a),i&&(s=new h(r),l=j(a,s,r,t),w(a,i,s),e.fn.call(a,i,s));return n},e.type&&(Yt.drawings[e.type]=e.name)),$.fn[e.name]},$.fn.getEventHooks=function jt(){var e=this,t,r,n={};return 0!==e.length&&(t=e[0],r=k(t),n=r.eventHooks),n},$.fn.setEventHooks=function Et(e){var t=this,r,n,a;for(n=0;n<t.length;n+=1)r=$(t[n]),a=k(t[n]),mt(a.eventHooks,e);return t},$.fn.getLayers=function Gt(e){var t=this,r,n,a,o,i,s=[];if(0!==t.length)if(r=t[0],n=k(r),a=n.layers,bt(e))for(i=0;i<a.length;i+=1)o=a[i],e.call(r,o)&&s.push(o);else s=a;return s},$.fn.getLayer=function It(e){var t=this,r,n,a,o,i,s;if(0!==t.length)if(r=t[0],n=k(r),a=n.layers,s=xt(e),e&&e.layer)o=e;else if("number"===s)0>e&&(e=a.length+e),o=a[e];else if("regexp"===s){for(i=0;i<a.length;i+=1)if(g(a[i].name)&&a[i].name.match(e)){o=a[i];break}}else o=n.layer.names[e];return o},$.fn.getLayerGroup=function Ft(e){var t=this,r,n,a,o,i,s=xt(e);if(0!==t.length)if(r=t[0],"array"===s)i=e;else if("regexp"===s){n=k(r),a=n.layer.groups;for(o in a)if(o.match(e)){i=a[o];break}}else n=k(r),i=n.layer.groups[e];return i},$.fn.getLayerIndex=function Bt(e){var t=this,r=t.getLayers(),n=t.getLayer(e);return wt(n,r)},$.fn.setLayer=function Nt(e,t){var r=this,n,o,s,l,h,c,g;for(o=0;o<r.length;o+=1)if(n=$(r[o]),s=k(r[o]),l=$(r[o]).getLayer(e)){P(n,s,l,t),R(n,s,l,t),d(t);for(h in t)t.hasOwnProperty(h)&&(c=t[h],g=xt(c),"object"===g&&_t(c)?(l[h]=mt({},c),d(l[h])):"array"===g?l[h]=c.slice(0):"string"===g?0===c.indexOf("+=")?l[h]+=a(c.substr(2)):0===c.indexOf("-=")?l[h]-=a(c.substr(2)):l[h]=!isNaN(c)&&f(c)?a(c):c:l[h]=c);C(n,s,l),T(n,s,l),$.isEmptyObject(t)===i&&A(n,s,l,"change",t)}return r},$.fn.setLayers=function Jt(e,t){var r=this,n,a,o,i;for(a=0;a<r.length;a+=1)for(n=$(r[a]),o=n.getLayers(t),i=0;i<o.length;i+=1)n.setLayer(o[i],e);return r},$.fn.setLayerGroup=function qt(e,t){var r=this,n,a,o,i;for(a=0;a<r.length;a+=1)if(n=$(r[a]),o=n.getLayerGroup(e))for(i=0;i<o.length;i+=1)n.setLayer(o[i],t);return r},$.fn.moveLayer=function Qt(e,t){var r=this,n,a,o,i,s;for(a=0;a<r.length;a+=1)n=$(r[a]),o=k(r[a]),i=o.layers,s=n.getLayer(e),s&&(s.index=wt(s,i),i.splice(s.index,1),i.splice(t,0,s),0>t&&(t=i.length+t),s.index=t,A(n,o,s,"move"));return r},$.fn.removeLayer=function $t(e){var t=this,r,n,a,o,i;for(n=0;n<t.length;n+=1)r=$(t[n]),a=k(t[n]),o=r.getLayers(),i=r.getLayer(e),i&&(i.index=wt(i,o),o.splice(i.index,1),P(r,a,i,{name:s}),R(r,a,i,{groups:s}),A(r,a,i,"remove"));return t},$.fn.removeLayers=function Ut(e){var t=this,r,n,a,o,i,s;for(n=0;n<t.length;n+=1){for(r=$(t[n]),a=k(t[n]),o=r.getLayers(e),s=0;s<o.length;s+=1)i=o[s],r.removeLayer(i),s-=1;a.layer.names={},a.layer.groups={}}return t},$.fn.removeLayerGroup=function Vt(e){var t=this,r,n,a,o,i,s;if(e!==l)for(n=0;n<t.length;n+=1)if(r=$(t[n]),a=k(t[n]),o=r.getLayers(),i=r.getLayerGroup(e))for(i=i.slice(0),s=0;s<i.length;s+=1)r.removeLayer(i[s]);return t},$.fn.addLayerToGroup=function Mt(e,t){var r=this,n,a,o,i=[t];for(a=0;a<r.length;a+=1)n=$(r[a]),o=n.getLayer(e),o.groups&&(i=o.groups.slice(0),-1===wt(t,o.groups)&&i.push(t)),n.setLayer(o,{groups:i});return r},$.fn.removeLayerFromGroup=function Kt(e,t){var r=this,n,a,o,i=[],s;for(a=0;a<r.length;a+=1)n=$(r[a]),o=n.getLayer(e),o.groups&&(s=wt(t,o.groups),-1!==s&&(i=o.groups.slice(0),i.splice(s,1),n.setLayer(o,{groups:i})));return r},Dt.cursors=["grab","grabbing","zoom-in","zoom-out"],Dt.prefix=function(){var t=getComputedStyle(e.documentElement,""),r=(Rt.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return"-"+r+"-"}(),$.fn.triggerLayerEvent=function(e,t){var r=this,n,a,o;for(a=0;a<r.length;a+=1)n=$(r[a]),o=k(r[a]),e=n.getLayer(e),e&&A(n,o,e,t);return r},$.fn.drawLayer=function Zt(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)a=$(t[r]),n=u(t[r]),n&&(o=a.getLayer(e),Y(a,n,o));return t},$.fn.drawLayers=function er(e){var t=this,r,n,a,l=e||{},h,c,g,f,d,v,p,m,w,x;for(d=l.index,d||(d=0),n=0;n<t.length;n+=1)if(r=$(t[n]),a=u(t[n])){for(p=k(t[n]),l.clear!==i&&r.clearCanvas(),h=p.layers,f=d;f<h.length;f+=1)if(c=h[f],c.index=f,l.resetFire&&(c._fired=i),Y(r,a,c,f+1),c._masks=p.transforms.masks.slice(0),c._method===$.fn.drawImage&&c.visible){x=!0;break}if(x)break;v=f,c=X(p),m=p.event,w=m.type,p.drag.layer&&O(r,p,w),g=p.lastIntersected,g===s||c===g||!g._hovered||g._fired||p.drag.dragging||(p.lastIntersected=s,g._fired=o,g._hovered=i,A(r,p,g,"mouseout"),D(r,p)),c&&(c[w]||(w=Q(w)),c._event&&c.intersects&&(p.lastIntersected=c,(c.mouseover||c.mouseout||c.cursors)&&!p.drag.dragging&&(c._hovered||c._fired||(c._fired=o,c._hovered=o,A(r,p,c,"mouseover"))),c._fired||(c._fired=o,m.type=s,A(r,p,c,w)),!c.draggable||c.disableEvents||"mousedown"!==w&&"touchstart"!==w||(p.drag.layer=c))),c!==s||p.drag.dragging||D(r,p),v===h.length&&(p.intersecting.length=0,p.transforms=y(zt),p.savedTransforms.length=0)}return t},$.fn.addLayer=function tr(e){var t=this,r,n,a;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(a=new h(e),a.layer=o,j(t[r],a,e));return t},Dt.props=["width","height","opacity","lineHeight"],Dt.propsObj={},$.fn.animateLayer=function rr(){function e(e,t,r){return function(){E(r),F(r),t.animating&&t.animated!==r||e.drawLayers(),r._animating=i,t.animating=i,t.animated=s,c[4]&&c[4].call(e[0],r),A(e,t,r,"animateend")}}function t(e,t,r){return function(n,a){var i,s,l,h=!1;"_"===a.prop[0]&&(h=!0,a.prop=a.prop.replace("_",""),r[a.prop]=r["_"+a.prop]),-1!==a.prop.indexOf(".")&&(i=a.prop.split("."),s=i[0],l=i[1],r[s]&&(r[s][l]=a.now)),r._pos!==a.pos&&(r._pos=a.pos,r._animating||t.animating||(r._animating=o,t.animating=o,t.animated=r),t.animating&&t.animated!==r||e.drawLayers()),c[5]&&c[5].call(e[0],n,a,r),A(e,t,r,"animate",a),h&&(a.prop="_"+a.prop)}}var r=this,n,a,h,c=Rt.call(arguments,0),g,f,d;for("object"===xt(c[2])?(c.splice(2,0,c[2].duration||s),c.splice(3,0,c[3].easing||s),c.splice(4,0,c[4].complete||s),c.splice(5,0,c[5].step||s)):(c[2]===l?(c.splice(2,0,s),c.splice(3,0,s),c.splice(4,0,s)):bt(c[2])&&(c.splice(2,0,s),c.splice(3,0,s)),c[3]===l?(c[3]=s,c.splice(4,0,s)):bt(c[3])&&c.splice(3,0,s)),a=0;a<r.length;a+=1)n=$(r[a]),h=u(r[a]),h&&(g=k(r[a]),f=n.getLayer(c[0]),f&&f._method!==$.fn.draw&&(d=mt({},c[1]),d=I(r[a],f,d),G(d,o),G(f),f.style=Dt.propsObj,$(f).animate(d,{duration:c[2],easing:$.easing[c[3]]?c[3]:s,complete:e(n,g,f),step:t(n,g,f)}),A(n,g,f,"animatestart")));return r},$.fn.animateLayerGroup=function nr(e){var t=this,r,n,a=Rt.call(arguments,0),o,i;for(n=0;n<t.length;n+=1)if(r=$(t[n]),o=r.getLayerGroup(e))for(i=0;i<o.length;i+=1)a[0]=o[i],r.animateLayer.apply(r,a);return t},$.fn.delayLayer=function ar(e,t){var r=this,n,a,o,i;for(t=t||0,a=0;a<r.length;a+=1)n=$(r[a]),o=k(r[a]),i=n.getLayer(e),i&&($(i).delay(t),A(n,o,i,"delay"));return r},$.fn.delayLayerGroup=function or(e,t){var r=this,n,a,o,i,s;for(t=t||0,a=0;a<r.length;a+=1)if(n=$(r[a]),o=n.getLayerGroup(e))for(s=0;s<o.length;s+=1)i=o[s],n.delayLayer(i,t);return r},$.fn.stopLayer=function ir(e,t){var r=this,n,a,o,i;for(a=0;a<r.length;a+=1)n=$(r[a]),o=k(r[a]),i=n.getLayer(e),i&&($(i).stop(t),A(n,o,i,"stop"));return r},$.fn.stopLayerGroup=function sr(e,t){var r=this,n,a,o,i,s;for(a=0;a<r.length;a+=1)if(n=$(r[a]),o=n.getLayerGroup(e))for(s=0;s<o.length;s+=1)i=o[s],n.stopLayer(i,t);return r},J(["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fillStyle","outlineColor","strokeStyle","shadowColor"]),Yt.touchEvents={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},Yt.mouseEvents={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"},V(["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","touchstart","touchmove","touchend"]),$.event.fix=function(e){var t,r,n;return e=Xt.call($.event,e),r=e.originalEvent,r&&(n=r.changedTouches,e.pageX!==l&&e.offsetX===l?(t=$(e.currentTarget).offset(),t&&(e.offsetX=e.pageX-t.left,e.offsetY=e.pageY-t.top)):n&&(t=$(e.currentTarget).offset(),t&&(e.offsetX=n[0].pageX-t.left,e.offsetY=n[0].pageY-t.top))),e},Yt.drawings={arc:"drawArc",bezier:"drawBezier",ellipse:"drawEllipse","function":"draw",image:"drawImage",line:"drawLine",path:"drawPath",polygon:"drawPolygon",slice:"drawSlice",quadratic:"drawQuadratic",rectangle:"drawRect",text:"drawText",vector:"drawVector",save:"saveCanvas",restore:"restoreCanvas",rotate:"rotateCanvas",scale:"scaleCanvas",translate:"translateCanvas"},$.fn.draw=function lr(e){var t=this,r,n,a,o=new h(e),i;if(Yt.drawings[o.type]&&"function"!==o.type)t[Yt.drawings[o.type]](e);else for(n=0;n<t.length;n+=1)r=$(t[n]),a=u(t[n]),a&&(o=new h(e),i=j(t[n],o,e,lr),o.visible&&o.fn&&o.fn.call(t[n],a,o));return t},$.fn.clearCanvas=function hr(e){var t=this,r,n,a=new h(e),o;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(a.width===s||a.height===s?(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t[r].width,t[r].height),n.restore()):(o=j(t[r],a,e,hr),L(t[r],n,a,a.width,a.height),n.clearRect(a.x-a.width/2,a.y-a.height/2,a.width,a.height),b(n,a)));return t},$.fn.saveCanvas=function cr(e){var t=this,r,n,a,o,i,s;for(r=0;r<t.length;r+=1)if(n=u(t[r]))for(i=k(t[r]),a=new h(e),o=j(t[r],a,e,cr),s=0;s<a.count;s+=1)v(n,i);return t},$.fn.restoreCanvas=function gr(e){var t=this,r,n,a,o,i,s;for(r=0;r<t.length;r+=1)if(n=u(t[r]))for(i=k(t[r]),a=new h(e),o=j(t[r],a,e,gr),s=0;s<a.count;s+=1)p(n,i);return t},$.fn.rotateCanvas=function fr(e){var t=this,r,n,a,o,i;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(i=k(t[r]),a=new h(e),o=j(t[r],a,e,fr),a.autosave&&v(n,i),K(n,a,i.transforms));return t},$.fn.scaleCanvas=function ur(e){var t=this,r,n,a,o,i;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(i=k(t[r]),a=new h(e),o=j(t[r],a,e,ur),a.autosave&&v(n,i),Z(n,a,i.transforms));return t},$.fn.translateCanvas=function dr(e){var t=this,r,n,a,o,i;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(i=k(t[r]),a=new h(e),o=j(t[r],a,e,dr),a.autosave&&v(n,i),et(n,a,i.transforms));return t},$.fn.drawRect=function yr(e){var t=this,r,n,a,s,l,c,g,f,d,y;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(a=new h(e),s=j(t[r],a,e,yr),a.visible&&(w(t[r],n,a),L(t[r],n,a,a.width,a.height),n.beginPath(),a.width&&a.height&&(l=a.x-a.width/2,c=a.y-a.height/2,d=Ct(a.cornerRadius),d?(g=a.x+a.width/2,f=a.y+a.height/2,a.width<0&&(y=l,l=g,g=y),a.height<0&&(y=c,c=f,f=y),0>g-l-2*d&&(d=(g-l)/2),0>f-c-2*d&&(d=(f-c)/2),n.moveTo(l+d,c),n.lineTo(g-d,c),n.arc(g-d,c+d,d,3*Lt/2,2*Lt,i),n.lineTo(g,f-d),n.arc(g-d,f-d,d,0,Lt/2,i),n.lineTo(l+d,f),n.arc(l+d,f-d,d,Lt/2,Lt,i),n.lineTo(l,c+d),n.arc(l+d,c+d,d,Lt,3*Lt/2,i),a.closed=o):n.rect(l,c,a.width,a.height)),M(t[r],n,a),_(t[r],n,a)));return t},$.fn.drawArc=function vr(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(a=new h(e),o=j(t[r],a,e,vr),a.visible&&(w(t[r],n,a),L(t[r],n,a,2*a.radius),n.beginPath(),at(t[r],n,a,a),M(t[r],n,a),_(t[r],n,a)));return t},$.fn.drawEllipse=function pr(e){var t=this,r,n,a,i,s,l;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(a=new h(e),i=j(t[r],a,e,pr),a.visible&&(w(t[r],n,a),L(t[r],n,a,a.width,a.height),s=a.width*(4/3),l=a.height,n.beginPath(),n.moveTo(a.x,a.y-l/2),n.bezierCurveTo(a.x-s/2,a.y-l/2,a.x-s/2,a.y+l/2,a.x,a.y+l/2),n.bezierCurveTo(a.x+s/2,a.y+l/2,a.x+s/2,a.y-l/2,a.x,a.y-l/2),M(t[r],n,a),a.closed=o,_(t[r],n,a)));return t},$.fn.drawPolygon=function mr(e){var t=this,r,n,a,i,s,l,c,g,f,d,y;for(r=0;r<t.length;r+=1)if(n=u(t[r]),n&&(a=new h(e),i=j(t[r],a,e,mr),a.visible)){for(w(t[r],n,a),L(t[r],n,a,2*a.radius),l=2*Lt/a.sides,c=l/2,s=c+Lt/2,g=a.radius*Tt(c),n.beginPath(),y=0;y<a.sides;y+=1)f=a.x+a.radius*Tt(s),d=a.y+a.radius*St(s),n.lineTo(f,d),a.concavity&&(f=a.x+(g+-g*a.concavity)*Tt(s+c),d=a.y+(g+-g*a.concavity)*St(s+c),n.lineTo(f,d)),s+=l;M(t[r],n,a),a.closed=o,_(t[r],n,a)}return t},$.fn.drawSlice=function wr(e){var t=this,r,n,a,i,s,l,c,g;for(n=0;n<t.length;n+=1)r=$(t[n]),a=u(t[n]),a&&(i=new h(e),s=j(t[n],i,e,wr),i.visible&&(w(t[n],a,i),L(t[n],a,i,2*i.radius),i.start*=i._toRad,i.end*=i._toRad,i.start-=Lt/2,i.end-=Lt/2,i.start=tt(i.start),i.end=tt(i.end),i.end<i.start&&(i.end+=2*Lt),l=(i.start+i.end)/2,c=i.radius*i.spread*Tt(l),g=i.radius*i.spread*St(l),i.x+=c,i.y+=g,a.beginPath(),a.arc(i.x,i.y,i.radius,i.start,i.end,i.ccw),a.lineTo(i.x,i.y),M(t[n],a,i),i.closed=o,_(t[n],a,i)));return t},$.fn.drawLine=function xr(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(a=new h(e),o=j(t[r],a,e,xr),a.visible&&(w(t[r],n,a),L(t[r],n,a),n.beginPath(),lt(t[r],n,a,a),M(t[r],n,a),_(t[r],n,a)));return t},$.fn.drawQuadratic=function br(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(a=new h(e),o=j(t[r],a,e,br),a.visible&&(w(t[r],n,a),L(t[r],n,a),n.beginPath(),ht(t[r],n,a,a),M(t[r],n,a),_(t[r],n,a)));return t},$.fn.drawBezier=function _r(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(a=new h(e),o=j(t[r],a,e,_r),a.visible&&(w(t[r],n,a),L(t[r],n,a),n.beginPath(),ct(t[r],n,a,a),M(t[r],n,a),_(t[r],n,a)));return t},$.fn.drawVector=function Lr(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=u(t[r]),n&&(a=new h(e),o=j(t[r],a,e,Lr),a.visible&&(w(t[r],n,a),L(t[r],n,a),n.beginPath(),ut(t[r],n,a,a),M(t[r],n,a),_(t[r],n,a)));return t},$.fn.drawPath=function kr(e){var t=this,r,n,a,i,s,c;for(r=0;r<t.length;r+=1)if(n=u(t[r]),n&&(a=new h(e),i=j(t[r],a,e,kr),a.visible)){for(w(t[r],n,a),L(t[r],n,a),n.beginPath(),s=1;o&&(c=a["p"+s],c!==l);)c=new h(c),"line"===c.type?lt(t[r],n,a,c):"quadratic"===c.type?ht(t[r],n,a,c):"bezier"===c.type?ct(t[r],n,a,c):"vector"===c.type?ut(t[r],n,a,c):"arc"===c.type&&at(t[r],n,a,c),s+=1;M(t[r],n,a),_(t[r],n,a)}return t},$.fn.drawText=function Cr(e){var t=this,r,n,o,i,l,c,g,f,d,y=500,v,p,m,x,_;for(n=0;n<t.length;n+=1)if(r=$(t[n]),o=u(t[n]),o&&(i=new h(e),l=j(t[n],i,e,Cr),i.visible)){if(w(t[n],o,i),o.textBaseline=i.baseline,o.textAlign=i.align,dt(t[n],o,i),c=i.maxWidth!==s?vt(o,i):i.text.toString().split("\n"),yt(t[n],o,i,c),l&&(l.width=i.width,l.height=i.height),L(t[n],o,i,i.width,i.height),x=i.x,"left"===i.align?i.respectAlign?i.x+=i.width/2:x-=i.width/2:"right"===i.align&&(i.respectAlign?i.x-=i.width/2:x+=i.width/2),i.radius)for(d=a(i.fontSize),i.letterSpacing===s&&(i.letterSpacing=d/y),f=0;f<c.length;f+=1){for(o.save(),o.translate(i.x,i.y),g=c[f],v=g.length,o.rotate(-(Lt*i.letterSpacing*(v-1))/2),m=0;v>m;m+=1)p=g[m],0!==m&&o.rotate(Lt*i.letterSpacing),o.save(),o.translate(0,-i.radius),o.fillText(p,0,0),o.restore();i.radius-=d,i.letterSpacing+=d/(2*y*Lt),o.restore()}else for(f=0;f<c.length;f+=1)g=c[f],_=i.y+f*i.height/c.length-(c.length-1)*i.height/c.length/2,o.shadowColor=i.shadowColor,o.fillText(g,x,_),"transparent"!==i.fillStyle&&(o.shadowColor="transparent"),0!==i.strokeWidth&&o.strokeText(g,x,_);_=0,"top"===i.baseline?_+=i.height/2:"bottom"===i.baseline&&(_-=i.height/2),i._event&&(o.beginPath(),o.rect(i.x-i.width/2,i.y-i.height/2+_,i.width,i.height),M(t[n],o,i),o.closePath()),b(o,i)}return Ot.propCache=i,t},$.fn.measureText=function Sr(e){var t=this,r,n,a;return n=t.getLayer(e),(!n||n&&!n._layer)&&(n=new h(e)),r=u(t[0]),r&&(dt(t[0],r,n),a=vt(r,n),yt(t[0],r,n,a)),n},$.fn.drawImage=function Tr(e){function r(e,t,r,n,a){w(e,t,n),n.width===s&&n.sWidth===s&&(n.width=n.sWidth=v.width),n.height===s&&n.sHeight===s&&(n.height=n.sHeight=v.height),a&&(a.width=n.width,a.height=n.height),n.sWidth!==s&&n.sHeight!==s&&n.sx!==s&&n.sy!==s?(n.width===s&&(n.width=n.sWidth),n.height===s&&(n.height=n.sHeight),n.cropFromCenter&&(n.sx+=n.sWidth/2,n.sy+=n.sHeight/2),n.sy-n.sHeight/2<0&&(n.sy=n.sHeight/2),n.sy+n.sHeight/2>v.height&&(n.sy=v.height-n.sHeight/2),n.sx-n.sWidth/2<0&&(n.sx=n.sWidth/2),n.sx+n.sWidth/2>v.width&&(n.sx=v.width-n.sWidth/2),L(e,t,n,n.width,n.height),t.drawImage(v,n.sx-n.sWidth/2,n.sy-n.sHeight/2,n.sWidth,n.sHeight,n.x-n.width/2,n.y-n.height/2,n.width,n.height)):(L(e,t,n,n.width,n.height),t.drawImage(v,n.x-n.width/2,n.y-n.height/2,n.width,n.height)),t.beginPath(),t.rect(n.x-n.width/2,n.y-n.height/2,n.width,n.height),M(e,t,n),t.closePath(),b(t,n),x(t,r,n)}function n(e,t,n,a,s){return function(){var l=$(e);r(e,t,n,a,s),a.layer?A(l,n,s,"load"):a.load&&a.load.call(l[0],s),a.layer&&(s._masks=n.transforms.masks.slice(0),a._next&&l.drawLayers({clear:i,resetFire:o,index:a._next}))}}var a=this,l,c,g,f,d,y,v,p,m,_=Ot.imageCache;for(c=0;c<a.length;c+=1)l=a[c],g=u(a[c]),g&&(f=k(a[c]),d=new h(e),y=j(a[c],d,e,Tr),d.visible&&(m=d.source,p=m.getContext,m.src||p?v=m:m&&(_[m]&&_[m].complete?v=_[m]:(v=new t,m.match(/^data:/i)||(v.crossOrigin=d.crossOrigin),v.src=m,_[m]=v)),v&&(v.complete||p?n(l,g,f,d,y)():(v.onload=n(l,g,f,d,y),v.src=v.src))));return a},$.fn.createPattern=function Pr(e){function r(){c=a.createPattern(i,o.repeat),o.load&&o.load.call(n[0],c)}var n=this,a,o,i,l,c,g;return a=u(n[0]),a?(o=new h(e),g=o.source,bt(g)?(i=$("<canvas />")[0],i.width=o.width,i.height=o.height,l=u(i),g.call(i,l),r()):(l=g.getContext,g.src||l?i=g:(i=new t,g.match(/^data:/i)||(i.crossOrigin=o.crossOrigin),i.src=g),i.complete||l?r():(i.onload=r(),i.src=i.src))):c=s,c},$.fn.createGradient=function Rr(e){var t=this,r,n,a,o=[],i,c,g,f,d,y,v;if(n=new h(e),r=u(t[0])){for(n.x1=n.x1||0,n.y1=n.y1||0,n.x2=n.x2||0,n.y2=n.y2||0,a=n.r1!==s&&n.r2!==s?r.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2):r.createLinearGradient(n.x1,n.y1,n.x2,n.y2),f=1;n["c"+f]!==l;f+=1)o.push(n["s"+f]!==l?n["s"+f]:s);for(i=o.length,o[0]===s&&(o[0]=0),o[i-1]===s&&(o[i-1]=1),f=0;i>f;f+=1){if(o[f]!==s){for(y=1,v=0,c=o[f],d=f+1;i>d;d+=1){if(o[d]!==s){g=o[d];break}y+=1}c>g&&(o[d]=o[f])}else o[f]===s&&(v+=1,o[f]=c+v*((g-c)/y));a.addColorStop(o[f],n["c"+(f+1)])}}else a=s;return a},$.fn.setPixels=function Xr(e){var t=this,r,n,a,o,i,l,c,g,f,d;for(n=0;n<t.length;n+=1)if(r=t[n],a=u(r),a&&(o=new h(e),i=j(r,o,e,Xr),L(t[n],a,o,o.width,o.height),(o.width===s||o.height===s)&&(o.width=r.width,o.height=r.height,o.x=o.width/2,o.y=o.height/2),0!==o.width&&0!==o.height)){if(c=a.getImageData(o.x-o.width/2,o.y-o.height/2,o.width,o.height),g=c.data,d=g.length,o.each)for(f=0;d>f;f+=4)l={r:g[f],g:g[f+1],b:g[f+2],a:g[f+3]},o.each.call(r,l,o),g[f]=l.r,g[f+1]=l.g,g[f+2]=l.b,g[f+3]=l.a;a.putImageData(c,o.x-o.width/2,o.y-o.height/2),a.restore()}return t},$.fn.getCanvasImage=function Yr(e,t){var r=this,n,a=s;return 0!==r.length&&(n=r[0],n.toDataURL&&(t===l&&(t=1),a=n.toDataURL("image/"+e,t))),a},$.fn.detectPixelRatio=function Or(e){var t=this,r,n,a,i,s,l,h,c,g,f;for(a=0;a<t.length;a+=1)n=t[a],r=$(t[a]),i=u(n),f=k(t[a]),f.scaled||(s=window.devicePixelRatio||1,l=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,h=s/l,1!==h&&(c=n.width,g=n.height,n.width=c*h,n.height=g*h,n.style.width=c+"px",n.style.height=g+"px",i.scale(h,h)),f.pixelRatio=h,f.scaled=o,e&&e.call(n,h));
return t},Wt.clearCache=function zr(){var e;for(e in Ot)Ot.hasOwnProperty(e)&&(Ot[e]={})},$.support.canvas=$("<canvas />")[0].getContext!==l,mt(Wt,{defaults:pt,setGlobalProps:w,transformShape:L,detectEvents:M,closePath:_,setCanvasFont:dt,measureText:yt}),$.jCanvas=Wt,$.jCanvasObject=h}(jQuery,document,Image,Array,Math,parseFloat,!0,!1,null);